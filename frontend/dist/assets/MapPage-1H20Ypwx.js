import{r as S,j as M,c as ka,u as Fh,a as jh,g as Uh,b as Hh,d as Gh,e as Aa,f as jt,h as Ee,s as Wh,i as Ea,R as Me,k as Kh,l as qh,m as Oa,n as $h}from"./index-Tbe7IPkS.js";import{C as Ia}from"./Card-dzqBYWzR.js";import"whatwg-fetch";const ys=S.createContext({});function xs(i){const n=S.useRef(null);return n.current===null&&(n.current=i()),n.current}const ws=typeof window<"u",Ra=ws?S.useLayoutEffect:S.useEffect,Yi=S.createContext(null),Ls=S.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class Yh extends S.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const a=s.offsetParent,h=a instanceof HTMLElement&&a.offsetWidth||0,r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft,r.right=h-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Xh({children:i,isPresent:n,anchorX:s}){const a=S.useId(),h=S.useRef(null),r=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=S.useContext(Ls);return S.useInsertionEffect(()=>{const{width:c,height:f,top:m,left:p,right:_}=r.current;if(n||!h.current||!c||!f)return;const v=s==="left"?`left: ${p}`:`right: ${_}`;h.current.dataset.motionPopId=a;const y=document.createElement("style");return u&&(y.nonce=u),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[n]),M.jsx(Yh,{isPresent:n,childRef:h,sizeRef:r,children:S.cloneElement(i,{ref:h})})}const Jh=({children:i,initial:n,isPresent:s,onExitComplete:a,custom:h,presenceAffectsLayout:r,mode:u,anchorX:c})=>{const f=xs(Qh),m=S.useId();let p=!0,_=S.useMemo(()=>(p=!1,{id:m,initial:n,isPresent:s,custom:h,onExitComplete:v=>{f.set(v,!0);for(const y of f.values())if(!y)return;a&&a()},register:v=>(f.set(v,!1),()=>f.delete(v))}),[s,f,a]);return r&&p&&(_={..._}),S.useMemo(()=>{f.forEach((v,y)=>f.set(y,!1))},[s]),S.useEffect(()=>{!s&&!f.size&&a&&a()},[s]),u==="popLayout"&&(i=M.jsx(Xh,{isPresent:s,anchorX:c,children:i})),M.jsx(Yi.Provider,{value:_,children:i})};function Qh(){return new Map}function Da(i=!0){const n=S.useContext(Yi);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:h}=n,r=S.useId();S.useEffect(()=>{if(i)return h(r)},[i]);const u=S.useCallback(()=>i&&a&&a(r),[r,a,i]);return!s&&a?[!1,u]:[!0]}const Vi=i=>i.key||"";function fr(i){const n=[];return S.Children.forEach(i,s=>{S.isValidElement(s)&&n.push(s)}),n}const tc=({children:i,custom:n,initial:s=!0,onExitComplete:a,presenceAffectsLayout:h=!0,mode:r="sync",propagate:u=!1,anchorX:c="left"})=>{const[f,m]=Da(u),p=S.useMemo(()=>fr(i),[i]),_=u&&!f?[]:p.map(Vi),v=S.useRef(!0),y=S.useRef(p),w=xs(()=>new Map),[P,k]=S.useState(p),[C,O]=S.useState(p);Ra(()=>{v.current=!1,y.current=p;for(let I=0;I<C.length;I++){const F=Vi(C[I]);_.includes(F)?w.delete(F):w.get(F)!==!0&&w.set(F,!1)}},[C,_.length,_.join("-")]);const E=[];if(p!==P){let I=[...p];for(let F=0;F<C.length;F++){const $=C[F],j=Vi($);_.includes(j)||(I.splice(F,0,$),E.push($))}return r==="wait"&&E.length&&(I=E),O(fr(I)),k(p),null}const{forceRender:V}=S.useContext(ys);return M.jsx(M.Fragment,{children:C.map(I=>{const F=Vi(I),$=u&&!f?!1:p===C||_.includes(F),j=()=>{if(w.has(F))w.set(F,!0);else return;let nt=!0;w.forEach(ft=>{ft||(nt=!1)}),nt&&(V==null||V(),O(y.current),u&&(m==null||m()),a&&a())};return M.jsx(Jh,{isPresent:$,initial:!v.current||s?void 0:!1,custom:n,presenceAffectsLayout:h,mode:r,onExitComplete:$?void 0:j,anchorX:c,children:I},F)})})};function Ps(i,n){i.indexOf(n)===-1&&i.push(n)}function bs(i,n){const s=i.indexOf(n);s>-1&&i.splice(s,1)}const qt=(i,n,s)=>s>n?n:s<i?i:s;let Ts=()=>{};const $t={},Ba=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),za=i=>/^0[^.\s]+$/u.test(i);function Cs(i){let n;return()=>(n===void 0&&(n=i()),n)}const Et=i=>i,ec=(i,n)=>s=>n(i(s)),fi=(...i)=>i.reduce(ec),si=(i,n,s)=>{const a=n-i;return a===0?1:(s-i)/a};class Ss{constructor(){this.subscriptions=[]}add(n){return Ps(this.subscriptions,n),()=>bs(this.subscriptions,n)}notify(n,s,a){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](n,s,a);else for(let r=0;r<h;r++){const u=this.subscriptions[r];u&&u(n,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nt=i=>i*1e3,Zt=i=>i/1e3;function Va(i,n){return n?i*(1e3/n):0}const Na=(i,n,s)=>(((1-3*s+3*n)*i+(3*s-6*n))*i+3*n)*i,ic=1e-7,nc=12;function sc(i,n,s,a,h){let r,u,c=0;do u=n+(s-n)/2,r=Na(u,a,h)-i,r>0?s=u:n=u;while(Math.abs(r)>ic&&++c<nc);return u}function di(i,n,s,a){if(i===n&&s===a)return Et;const h=r=>sc(r,0,1,i,s);return r=>r===0||r===1?r:Na(h(r),n,a)}const Za=i=>n=>n<=.5?i(2*n)/2:(2-i(2*(1-n)))/2,Fa=i=>n=>1-i(1-n),ja=di(.33,1.53,.69,.99),Ms=Fa(ja),Ua=Za(Ms),Ha=i=>(i*=2)<1?.5*Ms(i):.5*(2-Math.pow(2,-10*(i-1))),ks=i=>1-Math.sin(Math.acos(i)),Ga=Fa(ks),Wa=Za(ks),oc=di(.42,0,1,1),rc=di(0,0,.58,1),Ka=di(.42,0,.58,1),ac=i=>Array.isArray(i)&&typeof i[0]!="number",qa=i=>Array.isArray(i)&&typeof i[0]=="number",uc={linear:Et,easeIn:oc,easeInOut:Ka,easeOut:rc,circIn:ks,circInOut:Wa,circOut:Ga,backIn:Ms,backInOut:Ua,backOut:ja,anticipate:Ha},lc=i=>typeof i=="string",dr=i=>{if(qa(i)){Ts(i.length===4);const[n,s,a,h]=i;return di(n,s,a,h)}else if(lc(i))return uc[i];return i},Ni=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],mr={value:null};function hc(i,n){let s=new Set,a=new Set,h=!1,r=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},f=0;function m(_){u.has(_)&&(p.schedule(_),i()),f++,_(c)}const p={schedule:(_,v=!1,y=!1)=>{const P=y&&h?s:a;return v&&u.add(_),P.has(_)||P.add(_),_},cancel:_=>{a.delete(_),u.delete(_)},process:_=>{if(c=_,h){r=!0;return}h=!0,[s,a]=[a,s],s.forEach(m),n&&mr.value&&mr.value.frameloop[n].push(f),f=0,s.clear(),h=!1,r&&(r=!1,p.process(_))}};return p}const cc=40;function $a(i,n){let s=!1,a=!0;const h={delta:0,timestamp:0,isProcessing:!1},r=()=>s=!0,u=Ni.reduce((E,V)=>(E[V]=hc(r,n?V:void 0),E),{}),{setup:c,read:f,resolveKeyframes:m,preUpdate:p,update:_,preRender:v,render:y,postRender:w}=u,P=()=>{const E=$t.useManualTiming?h.timestamp:performance.now();s=!1,$t.useManualTiming||(h.delta=a?1e3/60:Math.max(Math.min(E-h.timestamp,cc),1)),h.timestamp=E,h.isProcessing=!0,c.process(h),f.process(h),m.process(h),p.process(h),_.process(h),v.process(h),y.process(h),w.process(h),h.isProcessing=!1,s&&n&&(a=!1,i(P))},k=()=>{s=!0,a=!0,h.isProcessing||i(P)};return{schedule:Ni.reduce((E,V)=>{const I=u[V];return E[V]=(F,$=!1,j=!1)=>(s||k(),I.schedule(F,$,j)),E},{}),cancel:E=>{for(let V=0;V<Ni.length;V++)u[Ni[V]].cancel(E)},state:h,steps:u}}const{schedule:et,cancel:te,state:mt,steps:Vn}=$a(typeof requestAnimationFrame<"u"?requestAnimationFrame:Et,!0);let ji;function fc(){ji=void 0}const bt={now:()=>(ji===void 0&&bt.set(mt.isProcessing||$t.useManualTiming?mt.timestamp:performance.now()),ji),set:i=>{ji=i,queueMicrotask(fc)}},Ya=i=>n=>typeof n=="string"&&n.startsWith(i),As=Ya("--"),dc=Ya("var(--"),Es=i=>dc(i)?mc.test(i.split("/*")[0].trim()):!1,mc=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Oe={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},oi={...Oe,transform:i=>qt(0,1,i)},Zi={...Oe,default:1},Qe=i=>Math.round(i*1e5)/1e5,Os=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function pc(i){return i==null}const _c=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Is=(i,n)=>s=>!!(typeof s=="string"&&_c.test(s)&&s.startsWith(i)||n&&!pc(s)&&Object.prototype.hasOwnProperty.call(s,n)),Xa=(i,n,s)=>a=>{if(typeof a!="string")return a;const[h,r,u,c]=a.match(Os);return{[i]:parseFloat(h),[n]:parseFloat(r),[s]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},gc=i=>qt(0,255,i),Nn={...Oe,transform:i=>Math.round(gc(i))},he={test:Is("rgb","red"),parse:Xa("red","green","blue"),transform:({red:i,green:n,blue:s,alpha:a=1})=>"rgba("+Nn.transform(i)+", "+Nn.transform(n)+", "+Nn.transform(s)+", "+Qe(oi.transform(a))+")"};function vc(i){let n="",s="",a="",h="";return i.length>5?(n=i.substring(1,3),s=i.substring(3,5),a=i.substring(5,7),h=i.substring(7,9)):(n=i.substring(1,2),s=i.substring(2,3),a=i.substring(3,4),h=i.substring(4,5),n+=n,s+=s,a+=a,h+=h),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:h?parseInt(h,16)/255:1}}const Jn={test:Is("#"),parse:vc,transform:he.transform},mi=i=>({test:n=>typeof n=="string"&&n.endsWith(i)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${i}`}),Qt=mi("deg"),Ft=mi("%"),Z=mi("px"),yc=mi("vh"),xc=mi("vw"),pr={...Ft,parse:i=>Ft.parse(i)/100,transform:i=>Ft.transform(i*100)},Pe={test:Is("hsl","hue"),parse:Xa("hue","saturation","lightness"),transform:({hue:i,saturation:n,lightness:s,alpha:a=1})=>"hsla("+Math.round(i)+", "+Ft.transform(Qe(n))+", "+Ft.transform(Qe(s))+", "+Qe(oi.transform(a))+")"},pt={test:i=>he.test(i)||Jn.test(i)||Pe.test(i),parse:i=>he.test(i)?he.parse(i):Pe.test(i)?Pe.parse(i):Jn.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?he.transform(i):Pe.transform(i)},wc=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lc(i){var n,s;return isNaN(i)&&typeof i=="string"&&(((n=i.match(Os))==null?void 0:n.length)||0)+(((s=i.match(wc))==null?void 0:s.length)||0)>0}const Ja="number",Qa="color",Pc="var",bc="var(",_r="${}",Tc=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ri(i){const n=i.toString(),s=[],a={color:[],number:[],var:[]},h=[];let r=0;const c=n.replace(Tc,f=>(pt.test(f)?(a.color.push(r),h.push(Qa),s.push(pt.parse(f))):f.startsWith(bc)?(a.var.push(r),h.push(Pc),s.push(f)):(a.number.push(r),h.push(Ja),s.push(parseFloat(f))),++r,_r)).split(_r);return{values:s,split:c,indexes:a,types:h}}function tu(i){return ri(i).values}function eu(i){const{split:n,types:s}=ri(i),a=n.length;return h=>{let r="";for(let u=0;u<a;u++)if(r+=n[u],h[u]!==void 0){const c=s[u];c===Ja?r+=Qe(h[u]):c===Qa?r+=pt.transform(h[u]):r+=h[u]}return r}}const Cc=i=>typeof i=="number"?0:i;function Sc(i){const n=tu(i);return eu(i)(n.map(Cc))}const ee={test:Lc,parse:tu,createTransformer:eu,getAnimatableNone:Sc};function Zn(i,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+(n-i)*6*s:s<1/2?n:s<2/3?i+(n-i)*(2/3-s)*6:i}function Mc({hue:i,saturation:n,lightness:s,alpha:a}){i/=360,n/=100,s/=100;let h=0,r=0,u=0;if(!n)h=r=u=s;else{const c=s<.5?s*(1+n):s+n-s*n,f=2*s-c;h=Zn(f,c,i+1/3),r=Zn(f,c,i),u=Zn(f,c,i-1/3)}return{red:Math.round(h*255),green:Math.round(r*255),blue:Math.round(u*255),alpha:a}}function Gi(i,n){return s=>s>0?n:i}const tt=(i,n,s)=>i+(n-i)*s,Fn=(i,n,s)=>{const a=i*i,h=s*(n*n-a)+a;return h<0?0:Math.sqrt(h)},kc=[Jn,he,Pe],Ac=i=>kc.find(n=>n.test(i));function gr(i){const n=Ac(i);if(!n)return!1;let s=n.parse(i);return n===Pe&&(s=Mc(s)),s}const vr=(i,n)=>{const s=gr(i),a=gr(n);if(!s||!a)return Gi(i,n);const h={...s};return r=>(h.red=Fn(s.red,a.red,r),h.green=Fn(s.green,a.green,r),h.blue=Fn(s.blue,a.blue,r),h.alpha=tt(s.alpha,a.alpha,r),he.transform(h))},Qn=new Set(["none","hidden"]);function Ec(i,n){return Qn.has(i)?s=>s<=0?i:n:s=>s>=1?n:i}function Oc(i,n){return s=>tt(i,n,s)}function Rs(i){return typeof i=="number"?Oc:typeof i=="string"?Es(i)?Gi:pt.test(i)?vr:Dc:Array.isArray(i)?iu:typeof i=="object"?pt.test(i)?vr:Ic:Gi}function iu(i,n){const s=[...i],a=s.length,h=i.map((r,u)=>Rs(r)(r,n[u]));return r=>{for(let u=0;u<a;u++)s[u]=h[u](r);return s}}function Ic(i,n){const s={...i,...n},a={};for(const h in s)i[h]!==void 0&&n[h]!==void 0&&(a[h]=Rs(i[h])(i[h],n[h]));return h=>{for(const r in a)s[r]=a[r](h);return s}}function Rc(i,n){const s=[],a={color:0,var:0,number:0};for(let h=0;h<n.values.length;h++){const r=n.types[h],u=i.indexes[r][a[r]],c=i.values[u]??0;s[h]=c,a[r]++}return s}const Dc=(i,n)=>{const s=ee.createTransformer(n),a=ri(i),h=ri(n);return a.indexes.var.length===h.indexes.var.length&&a.indexes.color.length===h.indexes.color.length&&a.indexes.number.length>=h.indexes.number.length?Qn.has(i)&&!h.values.length||Qn.has(n)&&!a.values.length?Ec(i,n):fi(iu(Rc(a,h),h.values),s):Gi(i,n)};function nu(i,n,s){return typeof i=="number"&&typeof n=="number"&&typeof s=="number"?tt(i,n,s):Rs(i)(i,n)}const Bc=i=>{const n=({timestamp:s})=>i(s);return{start:()=>et.update(n,!0),stop:()=>te(n),now:()=>mt.isProcessing?mt.timestamp:bt.now()}},su=(i,n,s=10)=>{let a="";const h=Math.max(Math.round(n/s),2);for(let r=0;r<h;r++)a+=i(r/(h-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Wi=2e4;function Ds(i){let n=0;const s=50;let a=i.next(n);for(;!a.done&&n<Wi;)n+=s,a=i.next(n);return n>=Wi?1/0:n}function zc(i,n=100,s){const a=s({...i,keyframes:[0,n]}),h=Math.min(Ds(a),Wi);return{type:"keyframes",ease:r=>a.next(h*r).value/n,duration:Zt(h)}}const Vc=5;function ou(i,n,s){const a=Math.max(n-Vc,0);return Va(s-i(a),n-a)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jn=.001;function Nc({duration:i=it.duration,bounce:n=it.bounce,velocity:s=it.velocity,mass:a=it.mass}){let h,r,u=1-n;u=qt(it.minDamping,it.maxDamping,u),i=qt(it.minDuration,it.maxDuration,Zt(i)),u<1?(h=m=>{const p=m*u,_=p*i,v=p-s,y=ts(m,u),w=Math.exp(-_);return jn-v/y*w},r=m=>{const _=m*u*i,v=_*s+s,y=Math.pow(u,2)*Math.pow(m,2)*i,w=Math.exp(-_),P=ts(Math.pow(m,2),u);return(-h(m)+jn>0?-1:1)*((v-y)*w)/P}):(h=m=>{const p=Math.exp(-m*i),_=(m-s)*i+1;return-jn+p*_},r=m=>{const p=Math.exp(-m*i),_=(s-m)*(i*i);return p*_});const c=5/i,f=Fc(h,r,c);if(i=Nt(i),isNaN(f))return{stiffness:it.stiffness,damping:it.damping,duration:i};{const m=Math.pow(f,2)*a;return{stiffness:m,damping:u*2*Math.sqrt(a*m),duration:i}}}const Zc=12;function Fc(i,n,s){let a=s;for(let h=1;h<Zc;h++)a=a-i(a)/n(a);return a}function ts(i,n){return i*Math.sqrt(1-n*n)}const jc=["duration","bounce"],Uc=["stiffness","damping","mass"];function yr(i,n){return n.some(s=>i[s]!==void 0)}function Hc(i){let n={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...i};if(!yr(i,Uc)&&yr(i,jc))if(i.visualDuration){const s=i.visualDuration,a=2*Math.PI/(s*1.2),h=a*a,r=2*qt(.05,1,1-(i.bounce||0))*Math.sqrt(h);n={...n,mass:it.mass,stiffness:h,damping:r}}else{const s=Nc(i);n={...n,...s,mass:it.mass},n.isResolvedFromDuration=!0}return n}function Ki(i=it.visualDuration,n=it.bounce){const s=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:n}:i;let{restSpeed:a,restDelta:h}=s;const r=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],c={done:!1,value:r},{stiffness:f,damping:m,mass:p,duration:_,velocity:v,isResolvedFromDuration:y}=Hc({...s,velocity:-Zt(s.velocity||0)}),w=v||0,P=m/(2*Math.sqrt(f*p)),k=u-r,C=Zt(Math.sqrt(f/p)),O=Math.abs(k)<5;a||(a=O?it.restSpeed.granular:it.restSpeed.default),h||(h=O?it.restDelta.granular:it.restDelta.default);let E;if(P<1){const I=ts(C,P);E=F=>{const $=Math.exp(-P*C*F);return u-$*((w+P*C*k)/I*Math.sin(I*F)+k*Math.cos(I*F))}}else if(P===1)E=I=>u-Math.exp(-C*I)*(k+(w+C*k)*I);else{const I=C*Math.sqrt(P*P-1);E=F=>{const $=Math.exp(-P*C*F),j=Math.min(I*F,300);return u-$*((w+P*C*k)*Math.sinh(j)+I*k*Math.cosh(j))/I}}const V={calculatedDuration:y&&_||null,next:I=>{const F=E(I);if(y)c.done=I>=_;else{let $=I===0?w:0;P<1&&($=I===0?Nt(w):ou(E,I,F));const j=Math.abs($)<=a,nt=Math.abs(u-F)<=h;c.done=j&&nt}return c.value=c.done?u:F,c},toString:()=>{const I=Math.min(Ds(V),Wi),F=su($=>V.next(I*$).value,I,30);return I+"ms "+F},toTransition:()=>{}};return V}Ki.applyToOptions=i=>{const n=zc(i,100,Ki);return i.ease=n.ease,i.duration=Nt(n.duration),i.type="keyframes",i};function es({keyframes:i,velocity:n=0,power:s=.8,timeConstant:a=325,bounceDamping:h=10,bounceStiffness:r=500,modifyTarget:u,min:c,max:f,restDelta:m=.5,restSpeed:p}){const _=i[0],v={done:!1,value:_},y=j=>c!==void 0&&j<c||f!==void 0&&j>f,w=j=>c===void 0?f:f===void 0||Math.abs(c-j)<Math.abs(f-j)?c:f;let P=s*n;const k=_+P,C=u===void 0?k:u(k);C!==k&&(P=C-_);const O=j=>-P*Math.exp(-j/a),E=j=>C+O(j),V=j=>{const nt=O(j),ft=E(j);v.done=Math.abs(nt)<=m,v.value=v.done?C:ft};let I,F;const $=j=>{y(v.value)&&(I=j,F=Ki({keyframes:[v.value,w(v.value)],velocity:ou(E,j,v.value),damping:h,stiffness:r,restDelta:m,restSpeed:p}))};return $(0),{calculatedDuration:null,next:j=>{let nt=!1;return!F&&I===void 0&&(nt=!0,V(j),$(j)),I!==void 0&&j>=I?F.next(j-I):(!nt&&V(j),v)}}}function Gc(i,n,s){const a=[],h=s||$t.mix||nu,r=i.length-1;for(let u=0;u<r;u++){let c=h(i[u],i[u+1]);if(n){const f=Array.isArray(n)?n[u]||Et:n;c=fi(f,c)}a.push(c)}return a}function Wc(i,n,{clamp:s=!0,ease:a,mixer:h}={}){const r=i.length;if(Ts(r===n.length),r===1)return()=>n[0];if(r===2&&n[0]===n[1])return()=>n[1];const u=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),n=[...n].reverse());const c=Gc(n,a,h),f=c.length,m=p=>{if(u&&p<i[0])return n[0];let _=0;if(f>1)for(;_<i.length-2&&!(p<i[_+1]);_++);const v=si(i[_],i[_+1],p);return c[_](v)};return s?p=>m(qt(i[0],i[r-1],p)):m}function Kc(i,n){const s=i[i.length-1];for(let a=1;a<=n;a++){const h=si(0,n,a);i.push(tt(s,1,h))}}function qc(i){const n=[0];return Kc(n,i.length-1),n}function $c(i,n){return i.map(s=>s*n)}function Yc(i,n){return i.map(()=>n||Ka).splice(0,i.length-1)}function ti({duration:i=300,keyframes:n,times:s,ease:a="easeInOut"}){const h=ac(a)?a.map(dr):dr(a),r={done:!1,value:n[0]},u=$c(s&&s.length===n.length?s:qc(n),i),c=Wc(u,n,{ease:Array.isArray(h)?h:Yc(n,h)});return{calculatedDuration:i,next:f=>(r.value=c(f),r.done=f>=i,r)}}const Xc=i=>i!==null;function Bs(i,{repeat:n,repeatType:s="loop"},a,h=1){const r=i.filter(Xc),c=h<0||n&&s!=="loop"&&n%2===1?0:r.length-1;return!c||a===void 0?r[c]:a}const Jc={decay:es,inertia:es,tween:ti,keyframes:ti,spring:Ki};function ru(i){typeof i.type=="string"&&(i.type=Jc[i.type])}class zs{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const Qc=i=>i/100;class au extends zs{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;if(s&&s.updatedAt!==bt.now()&&this.tick(bt.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;ru(n);const{type:s=ti,repeat:a=0,repeatDelay:h=0,repeatType:r,velocity:u=0}=n;let{keyframes:c}=n;const f=s||ti;f!==ti&&typeof c[0]!="number"&&(this.mixKeyframes=fi(Qc,nu(c[0],c[1])),c=[0,100]);const m=f({...n,keyframes:c});r==="mirror"&&(this.mirroredGenerator=f({...n,keyframes:[...c].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=Ds(m));const{calculatedDuration:p}=m;this.calculatedDuration=p,this.resolvedDuration=p+h,this.totalDuration=this.resolvedDuration*(a+1)-h,this.generator=m}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:a,totalDuration:h,mixKeyframes:r,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:p,repeat:_,repeatType:v,repeatDelay:y,type:w,onUpdate:P,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-h/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const C=this.currentTime-m*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?C<0:C>h;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let E=this.currentTime,V=a;if(_){const j=Math.min(this.currentTime,h)/c;let nt=Math.floor(j),ft=j%1;!ft&&j>=1&&(ft=1),ft===1&&nt--,nt=Math.min(nt,_+1),!!(nt%2)&&(v==="reverse"?(ft=1-ft,y&&(ft-=y/c)):v==="mirror"&&(V=u)),E=qt(0,1,ft)*c}const I=O?{done:!1,value:p[0]}:V.next(E);r&&(I.value=r(I.value));let{done:F}=I;!O&&f!==null&&(F=this.playbackSpeed>=0?this.currentTime>=h:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return $&&w!==es&&(I.value=Bs(p,this.options,k,this.speed)),P&&P(I.value),$&&this.finish(),I}then(n,s){return this.finished.then(n,s)}get duration(){return Zt(this.calculatedDuration)}get time(){return Zt(this.currentTime)}set time(n){n=Nt(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(bt.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=Zt(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=Bc,onPlay:s,startTime:a}=this.options;this.driver||(this.driver=n(r=>this.tick(r))),s&&s();const h=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=h):this.holdTime!==null?this.startTime=h-this.holdTime:this.startTime||(this.startTime=a??h),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),n.observe(this)}}function tf(i){for(let n=1;n<i.length;n++)i[n]??(i[n]=i[n-1])}const ce=i=>i*180/Math.PI,is=i=>{const n=ce(Math.atan2(i[1],i[0]));return ns(n)},ef={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:is,rotateZ:is,skewX:i=>ce(Math.atan(i[1])),skewY:i=>ce(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},ns=i=>(i=i%360,i<0&&(i+=360),i),xr=is,wr=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),Lr=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),nf={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wr,scaleY:Lr,scale:i=>(wr(i)+Lr(i))/2,rotateX:i=>ns(ce(Math.atan2(i[6],i[5]))),rotateY:i=>ns(ce(Math.atan2(-i[2],i[0]))),rotateZ:xr,rotate:xr,skewX:i=>ce(Math.atan(i[4])),skewY:i=>ce(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function Pr(i){return i.includes("scale")?1:0}function ss(i,n){if(!i||i==="none")return Pr(n);const s=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,h;if(s)a=nf,h=s;else{const c=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=ef,h=c}if(!h)return Pr(n);const r=a[n],u=h[1].split(",").map(of);return typeof r=="function"?r(u):u[r]}const sf=(i,n)=>{const{transform:s="none"}=getComputedStyle(i);return ss(s,n)};function of(i){return parseFloat(i.trim())}const Ie=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Re=new Set(Ie),br=i=>i===Oe||i===Z,rf=new Set(["x","y","z"]),af=Ie.filter(i=>!rf.has(i));function uf(i){const n=[];return af.forEach(s=>{const a=i.getValue(s);a!==void 0&&(n.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),n}const ke={width:({x:i},{paddingLeft:n="0",paddingRight:s="0"})=>i.max-i.min-parseFloat(n)-parseFloat(s),height:({y:i},{paddingTop:n="0",paddingBottom:s="0"})=>i.max-i.min-parseFloat(n)-parseFloat(s),top:(i,{top:n})=>parseFloat(n),left:(i,{left:n})=>parseFloat(n),bottom:({y:i},{top:n})=>parseFloat(n)+(i.max-i.min),right:({x:i},{left:n})=>parseFloat(n)+(i.max-i.min),x:(i,{transform:n})=>ss(n,"x"),y:(i,{transform:n})=>ss(n,"y")};ke.translateX=ke.x;ke.translateY=ke.y;const fe=new Set;let os=!1,rs=!1,as=!1;function uu(){if(rs){const i=Array.from(fe).filter(a=>a.needsMeasurement),n=new Set(i.map(a=>a.element)),s=new Map;n.forEach(a=>{const h=uf(a);h.length&&(s.set(a,h),a.render())}),i.forEach(a=>a.measureInitialState()),n.forEach(a=>{a.render();const h=s.get(a);h&&h.forEach(([r,u])=>{var c;(c=a.getValue(r))==null||c.set(u)})}),i.forEach(a=>a.measureEndState()),i.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}rs=!1,os=!1,fe.forEach(i=>i.complete(as)),fe.clear()}function lu(){fe.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(rs=!0)})}function lf(){as=!0,lu(),uu(),as=!1}class Vs{constructor(n,s,a,h,r,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=a,this.motionValue=h,this.element=r,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fe.add(this),os||(os=!0,et.read(lu),et.resolveKeyframes(uu))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:a,motionValue:h}=this;if(n[0]===null){const r=h==null?void 0:h.get(),u=n[n.length-1];if(r!==void 0)n[0]=r;else if(a&&s){const c=a.readValue(s,u);c!=null&&(n[0]=c)}n[0]===void 0&&(n[0]=u),h&&r===void 0&&h.set(n[0])}tf(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),fe.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fe.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hf=i=>i.startsWith("--");function cf(i,n,s){hf(n)?i.style.setProperty(n,s):i.style[n]=s}const ff=Cs(()=>window.ScrollTimeline!==void 0),df={};function mf(i,n){const s=Cs(i);return()=>df[n]??s()}const hu=mf(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xe=([i,n,s,a])=>`cubic-bezier(${i}, ${n}, ${s}, ${a})`,Tr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xe([0,.65,.55,1]),circOut:Xe([.55,0,1,.45]),backIn:Xe([.31,.01,.66,-.59]),backOut:Xe([.33,1.53,.69,.99])};function cu(i,n){if(i)return typeof i=="function"?hu()?su(i,n):"ease-out":qa(i)?Xe(i):Array.isArray(i)?i.map(s=>cu(s,n)||Tr.easeOut):Tr[i]}function pf(i,n,s,{delay:a=0,duration:h=300,repeat:r=0,repeatType:u="loop",ease:c="easeOut",times:f}={},m=void 0){const p={[n]:s};f&&(p.offset=f);const _=cu(c,h);Array.isArray(_)&&(p.easing=_);const v={delay:a,duration:h,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:r+1,direction:u==="reverse"?"alternate":"normal"};return m&&(v.pseudoElement=m),i.animate(p,v)}function fu(i){return typeof i=="function"&&"applyToOptions"in i}function _f({type:i,...n}){return fu(i)&&hu()?i.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class gf extends zs{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:a,keyframes:h,pseudoElement:r,allowFlatten:u=!1,finalKeyframe:c,onComplete:f}=n;this.isPseudoElement=!!r,this.allowFlatten=u,this.options=n,Ts(typeof n.type!="string");const m=_f(n);this.animation=pf(s,a,h,m,r),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const p=Bs(h,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):cf(s,a,p),this.animation.cancel()}f==null||f(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,s;(s=(n=this.animation).finish)==null||s.call(n)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,s;this.isPseudoElement||(s=(n=this.animation).commitStyles)==null||s.call(n)}get duration(){var s,a;const n=((a=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:a.call(s).duration)||0;return Zt(Number(n))}get time(){return Zt(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Nt(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&ff()?(this.animation.timeline=n,Et):s(this)}}const du={anticipate:Ha,backInOut:Ua,circInOut:Wa};function vf(i){return i in du}function yf(i){typeof i.ease=="string"&&vf(i.ease)&&(i.ease=du[i.ease])}const Cr=10;class xf extends gf{constructor(n){yf(n),ru(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:a,onComplete:h,element:r,...u}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const c=new au({...u,autoplay:!1}),f=Nt(this.finishedTime??this.time);s.setWithVelocity(c.sample(f-Cr).value,c.sample(f).value,Cr),c.stop()}}const Sr=(i,n)=>n==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(ee.test(i)||i==="0")&&!i.startsWith("url("));function wf(i){const n=i[0];if(i.length===1)return!0;for(let s=0;s<i.length;s++)if(i[s]!==n)return!0}function Lf(i,n,s,a){const h=i[0];if(h===null)return!1;if(n==="display"||n==="visibility")return!0;const r=i[i.length-1],u=Sr(h,n),c=Sr(r,n);return!u||!c?!1:wf(i)||(s==="spring"||fu(s))&&a}const Pf=new Set(["opacity","clipPath","filter","transform"]),bf=Cs(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Tf(i){const{motionValue:n,name:s,repeatDelay:a,repeatType:h,damping:r,type:u}=i;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return bf()&&s&&Pf.has(s)&&(s!=="transform"||!f)&&!c&&!a&&h!=="mirror"&&r!==0&&u!=="inertia"}const Cf=40;class Sf extends zs{constructor({autoplay:n=!0,delay:s=0,type:a="keyframes",repeat:h=0,repeatDelay:r=0,repeatType:u="loop",keyframes:c,name:f,motionValue:m,element:p,..._}){var w;super(),this.stop=()=>{var P,k;this._animation?(this._animation.stop(),(P=this.stopTimeline)==null||P.call(this)):(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=bt.now();const v={autoplay:n,delay:s,type:a,repeat:h,repeatDelay:r,repeatType:u,name:f,motionValue:m,element:p,..._},y=(p==null?void 0:p.KeyframeResolver)||Vs;this.keyframeResolver=new y(c,(P,k,C)=>this.onKeyframesResolved(P,k,v,!C),f,m,p),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(n,s,a,h){this.keyframeResolver=void 0;const{name:r,type:u,velocity:c,delay:f,isHandoff:m,onUpdate:p}=a;this.resolvedAt=bt.now(),Lf(n,r,u,c)||(($t.instantAnimations||!f)&&(p==null||p(Bs(n,a,s))),n[0]=n[n.length-1],a.duration=0,a.repeat=0);const v={startTime:h?this.resolvedAt?this.resolvedAt-this.createdAt>Cf?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...a,keyframes:n},y=!m&&Tf(v)?new xf({...v,element:v.motionValue.owner.current}):new au(v);y.finished.then(()=>this.notifyFinished()).catch(Et),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||lf(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const Mf=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kf(i){const n=Mf.exec(i);if(!n)return[,];const[,s,a,h]=n;return[`--${s??a}`,h]}function mu(i,n,s=1){const[a,h]=kf(i);if(!a)return;const r=window.getComputedStyle(n).getPropertyValue(a);if(r){const u=r.trim();return Ba(u)?parseFloat(u):u}return Es(h)?mu(h,n,s+1):h}function Ns(i,n){return(i==null?void 0:i[n])??(i==null?void 0:i.default)??i}const pu=new Set(["width","height","top","left","right","bottom",...Ie]),Af={test:i=>i==="auto",parse:i=>i},_u=i=>n=>n.test(i),gu=[Oe,Z,Ft,Qt,xc,yc,Af],Mr=i=>gu.find(_u(i));function Ef(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||za(i):!0}const Of=new Set(["brightness","contrast","saturate","opacity"]);function If(i){const[n,s]=i.slice(0,-1).split("(");if(n==="drop-shadow")return i;const[a]=s.match(Os)||[];if(!a)return i;const h=s.replace(a,"");let r=Of.has(n)?1:0;return a!==s&&(r*=100),n+"("+r+h+")"}const Rf=/\b([a-z-]*)\(.*?\)/gu,us={...ee,getAnimatableNone:i=>{const n=i.match(Rf);return n?n.map(If).join(" "):i}},kr={...Oe,transform:Math.round},Df={rotate:Qt,rotateX:Qt,rotateY:Qt,rotateZ:Qt,scale:Zi,scaleX:Zi,scaleY:Zi,scaleZ:Zi,skew:Qt,skewX:Qt,skewY:Qt,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:oi,originX:pr,originY:pr,originZ:Z},Zs={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z,...Df,zIndex:kr,fillOpacity:oi,strokeOpacity:oi,numOctaves:kr},Bf={...Zs,color:pt,backgroundColor:pt,outlineColor:pt,fill:pt,stroke:pt,borderColor:pt,borderTopColor:pt,borderRightColor:pt,borderBottomColor:pt,borderLeftColor:pt,filter:us,WebkitFilter:us},vu=i=>Bf[i];function yu(i,n){let s=vu(i);return s!==us&&(s=ee),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const zf=new Set(["auto","none","0"]);function Vf(i,n,s){let a=0,h;for(;a<i.length&&!h;){const r=i[a];typeof r=="string"&&!zf.has(r)&&ri(r).values.length&&(h=i[a]),a++}if(h&&s)for(const r of n)i[r]=yu(s,h)}class Nf extends Vs{constructor(n,s,a,h,r){super(n,s,a,h,r,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let f=0;f<n.length;f++){let m=n[f];if(typeof m=="string"&&(m=m.trim(),Es(m))){const p=mu(m,s.current);p!==void 0&&(n[f]=p),f===n.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!pu.has(a)||n.length!==2)return;const[h,r]=n,u=Mr(h),c=Mr(r);if(u!==c)if(br(u)&&br(c))for(let f=0;f<n.length;f++){const m=n[f];typeof m=="string"&&(n[f]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,a=[];for(let h=0;h<n.length;h++)(n[h]===null||Ef(n[h]))&&a.push(h);a.length&&Vf(n,a,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:a}=this;if(!n||!n.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ke[a](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const h=s[s.length-1];h!==void 0&&n.getValue(a,h).jump(h,!1)}measureEndState(){var c;const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const h=n.getValue(s);h&&h.jump(this.measuredOrigin,!1);const r=a.length-1,u=a[r];a[r]=ke[s](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([f,m])=>{n.getValue(f).set(m)}),this.resolveNoneKeyframes()}}function Zf(i,n,s){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let a=document;const h=(s==null?void 0:s[i])??a.querySelectorAll(i);return h?Array.from(h):[]}return Array.from(i)}const{schedule:Fs}=$a(queueMicrotask,!1),Rt={x:!1,y:!1};function xu(){return Rt.x||Rt.y}function Ff(i){return i==="x"||i==="y"?Rt[i]?null:(Rt[i]=!0,()=>{Rt[i]=!1}):Rt.x||Rt.y?null:(Rt.x=Rt.y=!0,()=>{Rt.x=Rt.y=!1})}function wu(i,n){const s=Zf(i),a=new AbortController,h={passive:!0,...n,signal:a.signal};return[s,h,()=>a.abort()]}function Ar(i){return!(i.pointerType==="touch"||xu())}function jf(i,n,s={}){const[a,h,r]=wu(i,s),u=c=>{if(!Ar(c))return;const{target:f}=c,m=n(f,c);if(typeof m!="function"||!f)return;const p=_=>{Ar(_)&&(m(_),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,h)};return a.forEach(c=>{c.addEventListener("pointerenter",u,h)}),r}const Lu=(i,n)=>n?i===n?!0:Lu(i,n.parentElement):!1,js=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,Uf=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Hf(i){return Uf.has(i.tagName)||i.tabIndex!==-1}const Je=new WeakSet;function Er(i){return n=>{n.key==="Enter"&&i(n)}}function Un(i,n){i.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const Gf=(i,n)=>{const s=i.currentTarget;if(!s)return;const a=Er(()=>{if(Je.has(s))return;Un(s,"down");const h=Er(()=>{Un(s,"up")}),r=()=>Un(s,"cancel");s.addEventListener("keyup",h,n),s.addEventListener("blur",r,n)});s.addEventListener("keydown",a,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),n)};function Or(i){return js(i)&&!xu()}function Wf(i,n,s={}){const[a,h,r]=wu(i,s),u=c=>{const f=c.currentTarget;if(!Or(c)||Je.has(f))return;Je.add(f);const m=n(f,c),p=(y,w)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",v),!(!Or(y)||!Je.has(f))&&(Je.delete(f),typeof m=="function"&&m(y,{success:w}))},_=y=>{p(y,f===window||f===document||s.useGlobalTarget||Lu(f,y.target))},v=y=>{p(y,!1)};window.addEventListener("pointerup",_,h),window.addEventListener("pointercancel",v,h)};return a.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",u,h),c instanceof HTMLElement&&(c.addEventListener("focus",m=>Gf(m,h)),!Hf(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}const Ir=30,Kf=i=>!isNaN(parseFloat(i));class qf{constructor(n,s={}){this.version="12.9.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,h=!0)=>{var u,c;const r=bt.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current)),h&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=bt.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=Kf(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new Ss);const a=this.events[n].add(s);return n==="change"?()=>{a(),et.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n,s=!0){!s||!this.passiveEffect?this.updateAndNotify(n,s):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-a}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>Ir)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Ir);return Va(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n;(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ai(i,n){return new qf(i,n)}const $f=[...gu,pt,ee],Yf=i=>$f.find(_u(i)),Pu=(i,n)=>n&&typeof i=="number"?n.transform(i):i,bu=S.createContext({strict:!1}),Rr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ae={};for(const i in Rr)Ae[i]={isEnabled:n=>Rr[i].some(s=>!!n[s])};function Xf(i){for(const n in i)Ae[n]={...Ae[n],...i[n]}}const Jf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qi(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||Jf.has(i)}let Tu=i=>!qi(i);function Qf(i){i&&(Tu=n=>n.startsWith("on")?!qi(n):i(n))}try{Qf(require("@emotion/is-prop-valid").default)}catch{}function td(i,n,s){const a={};for(const h in i)h==="values"&&typeof i.values=="object"||(Tu(h)||s===!0&&qi(h)||!n&&!qi(h)||i.draggable&&h.startsWith("onDrag"))&&(a[h]=i[h]);return a}function ed(i){if(typeof Proxy>"u")return i;const n=new Map,s=(...a)=>i(...a);return new Proxy(s,{get:(a,h)=>h==="create"?i:(n.has(h)||n.set(h,i(h)),n.get(h))})}const Xi=S.createContext({});function Ji(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function ui(i){return typeof i=="string"||Array.isArray(i)}const Us=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hs=["initial",...Us];function Qi(i){return Ji(i.animate)||Hs.some(n=>ui(i[n]))}function Cu(i){return!!(Qi(i)||i.variants)}function id(i,n){if(Qi(i)){const{initial:s,animate:a}=i;return{initial:s===!1||ui(s)?s:void 0,animate:ui(a)?a:void 0}}return i.inherit!==!1?n:{}}function nd(i){const{initial:n,animate:s}=id(i,S.useContext(Xi));return S.useMemo(()=>({initial:n,animate:s}),[Dr(n),Dr(s)])}function Dr(i){return Array.isArray(i)?i.join(" "):i}const sd=Symbol.for("motionComponentSymbol");function be(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function od(i,n,s){return S.useCallback(a=>{a&&i.onMount&&i.onMount(a),n&&(a?n.mount(a):n.unmount()),s&&(typeof s=="function"?s(a):be(s)&&(s.current=a))},[n])}const Gs=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rd="framerAppearId",Su="data-"+Gs(rd),Mu=S.createContext({});function ad(i,n,s,a,h){var P,k;const{visualElement:r}=S.useContext(Xi),u=S.useContext(bu),c=S.useContext(Yi),f=S.useContext(Ls).reducedMotion,m=S.useRef(null);a=a||u.renderer,!m.current&&a&&(m.current=a(i,{visualState:n,parent:r,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=m.current,_=S.useContext(Mu);p&&!p.projection&&h&&(p.type==="html"||p.type==="svg")&&ud(m.current,s,h,_);const v=S.useRef(!1);S.useInsertionEffect(()=>{p&&v.current&&p.update(s,c)});const y=s[Su],w=S.useRef(!!y&&!((P=window.MotionHandoffIsComplete)!=null&&P.call(window,y))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,y)));return Ra(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Fs.render(p.render),w.current&&p.animationState&&p.animationState.animateChanges())}),S.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,y)}),w.current=!1))}),p}function ud(i,n,s,a){const{layoutId:h,layout:r,drag:u,dragConstraints:c,layoutScroll:f,layoutRoot:m,layoutCrossfade:p}=n;i.projection=new s(i.latestValues,n["data-framer-portal-id"]?void 0:ku(i.parent)),i.projection.setOptions({layoutId:h,layout:r,alwaysMeasureLayout:!!u||c&&be(c),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:a,crossfade:p,layoutScroll:f,layoutRoot:m})}function ku(i){if(i)return i.options.allowProjection!==!1?i.projection:ku(i.parent)}function ld({preloadedFeatures:i,createVisualElement:n,useRender:s,useVisualState:a,Component:h}){i&&Xf(i);function r(c,f){let m;const p={...S.useContext(Ls),...c,layoutId:hd(c)},{isStatic:_}=p,v=nd(c),y=a(c,_);if(!_&&ws){cd();const w=fd(p);m=w.MeasureLayout,v.visualElement=ad(h,y,p,n,w.ProjectionNode)}return M.jsxs(Xi.Provider,{value:v,children:[m&&v.visualElement?M.jsx(m,{visualElement:v.visualElement,...p}):null,s(h,c,od(y,v.visualElement,f),y,_,v.visualElement)]})}r.displayName=`motion.${typeof h=="string"?h:`create(${h.displayName??h.name??""})`}`;const u=S.forwardRef(r);return u[sd]=h,u}function hd({layoutId:i}){const n=S.useContext(ys).id;return n&&i!==void 0?n+"-"+i:i}function cd(i,n){S.useContext(bu).strict}function fd(i){const{drag:n,layout:s}=Ae;if(!n&&!s)return{};const a={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(i)||s!=null&&s.isEnabled(i)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const li={};function dd(i){for(const n in i)li[n]=i[n],As(n)&&(li[n].isCSSVariable=!0)}function Au(i,{layout:n,layoutId:s}){return Re.has(i)||i.startsWith("origin")||(n||s!==void 0)&&(!!li[i]||i==="opacity")}const _t=i=>!!(i&&i.getVelocity),md={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pd=Ie.length;function _d(i,n,s){let a="",h=!0;for(let r=0;r<pd;r++){const u=Ie[r],c=i[u];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(u.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||s){const m=Pu(c,Zs[u]);if(!f){h=!1;const p=md[u]||u;a+=`${p}(${m}) `}s&&(n[u]=m)}}return a=a.trim(),s?a=s(n,h?"":a):h&&(a="none"),a}function Ws(i,n,s){const{style:a,vars:h,transformOrigin:r}=i;let u=!1,c=!1;for(const f in n){const m=n[f];if(Re.has(f)){u=!0;continue}else if(As(f)){h[f]=m;continue}else{const p=Pu(m,Zs[f]);f.startsWith("origin")?(c=!0,r[f]=p):a[f]=p}}if(n.transform||(u||s?a.transform=_d(n,i.transform,s):a.transform&&(a.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:p=0}=r;a.transformOrigin=`${f} ${m} ${p}`}}const Ks=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Eu(i,n,s){for(const a in n)!_t(n[a])&&!Au(a,s)&&(i[a]=n[a])}function gd({transformTemplate:i},n){return S.useMemo(()=>{const s=Ks();return Ws(s,n,i),Object.assign({},s.vars,s.style)},[n])}function vd(i,n){const s=i.style||{},a={};return Eu(a,s,i),Object.assign(a,gd(i,n)),a}function yd(i,n){const s={},a=vd(i,n);return i.drag&&i.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(s.tabIndex=0),s.style=a,s}const xd=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qs(i){return typeof i!="string"||i.includes("-")?!1:!!(xd.indexOf(i)>-1||/[A-Z]/u.test(i))}const wd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ld={offset:"strokeDashoffset",array:"strokeDasharray"};function Pd(i,n,s=1,a=0,h=!0){i.pathLength=1;const r=h?wd:Ld;i[r.offset]=Z.transform(-a);const u=Z.transform(n),c=Z.transform(s);i[r.array]=`${u} ${c}`}function Ou(i,{attrX:n,attrY:s,attrScale:a,pathLength:h,pathSpacing:r=1,pathOffset:u=0,...c},f,m){if(Ws(i,c,m),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:p,style:_}=i;p.transform&&(_.transform=p.transform,delete p.transform),(_.transform||p.transformOrigin)&&(_.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),_.transform&&(_.transformBox="fill-box",delete p.transformBox),n!==void 0&&(p.x=n),s!==void 0&&(p.y=s),a!==void 0&&(p.scale=a),h!==void 0&&Pd(p,h,r,u,!1)}const Iu=()=>({...Ks(),attrs:{}}),Ru=i=>typeof i=="string"&&i.toLowerCase()==="svg";function bd(i,n,s,a){const h=S.useMemo(()=>{const r=Iu();return Ou(r,n,Ru(a),i.transformTemplate),{...r.attrs,style:{...r.style}}},[n]);if(i.style){const r={};Eu(r,i.style,i),h.style={...r,...h.style}}return h}function Td(i=!1){return(s,a,h,{latestValues:r},u)=>{const f=(qs(s)?bd:yd)(a,r,u,s),m=td(a,typeof s=="string",i),p=s!==S.Fragment?{...m,...f,ref:h}:{},{children:_}=a,v=S.useMemo(()=>_t(_)?_.get():_,[_]);return S.createElement(s,{...p,children:v})}}function Br(i){const n=[{},{}];return i==null||i.values.forEach((s,a)=>{n[0][a]=s.get(),n[1][a]=s.getVelocity()}),n}function $s(i,n,s,a){if(typeof n=="function"){const[h,r]=Br(a);n=n(s!==void 0?s:i.custom,h,r)}if(typeof n=="string"&&(n=i.variants&&i.variants[n]),typeof n=="function"){const[h,r]=Br(a);n=n(s!==void 0?s:i.custom,h,r)}return n}function Ui(i){return _t(i)?i.get():i}function Cd({scrapeMotionValuesFromProps:i,createRenderState:n},s,a,h){return{latestValues:Sd(s,a,h,i),renderState:n()}}const Du=i=>(n,s)=>{const a=S.useContext(Xi),h=S.useContext(Yi),r=()=>Cd(i,n,a,h);return s?r():xs(r)};function Sd(i,n,s,a){const h={},r=a(i,{});for(const v in r)h[v]=Ui(r[v]);let{initial:u,animate:c}=i;const f=Qi(i),m=Cu(i);n&&m&&!f&&i.inherit!==!1&&(u===void 0&&(u=n.initial),c===void 0&&(c=n.animate));let p=s?s.initial===!1:!1;p=p||u===!1;const _=p?c:u;if(_&&typeof _!="boolean"&&!Ji(_)){const v=Array.isArray(_)?_:[_];for(let y=0;y<v.length;y++){const w=$s(i,v[y]);if(w){const{transitionEnd:P,transition:k,...C}=w;for(const O in C){let E=C[O];if(Array.isArray(E)){const V=p?E.length-1:0;E=E[V]}E!==null&&(h[O]=E)}for(const O in P)h[O]=P[O]}}}return h}function Ys(i,n,s){var r;const{style:a}=i,h={};for(const u in a)(_t(a[u])||n.style&&_t(n.style[u])||Au(u,i)||((r=s==null?void 0:s.getValue(u))==null?void 0:r.liveStyle)!==void 0)&&(h[u]=a[u]);return h}const Md={useVisualState:Du({scrapeMotionValuesFromProps:Ys,createRenderState:Ks})};function Bu(i,n,s){const a=Ys(i,n,s);for(const h in i)if(_t(i[h])||_t(n[h])){const r=Ie.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;a[r]=i[h]}return a}const kd={useVisualState:Du({scrapeMotionValuesFromProps:Bu,createRenderState:Iu})};function Ad(i,n){return function(a,{forwardMotionProps:h}={forwardMotionProps:!1}){const u={...qs(a)?kd:Md,preloadedFeatures:i,useRender:Td(h),createVisualElement:n,Component:a};return ld(u)}}function hi(i,n,s){const a=i.getProps();return $s(a,n,s!==void 0?s:a.custom,i)}const ls=i=>Array.isArray(i);function Ed(i,n,s){i.hasValue(n)?i.getValue(n).set(s):i.addValue(n,ai(s))}function Od(i){return ls(i)?i[i.length-1]||0:i}function Id(i,n){const s=hi(i,n);let{transitionEnd:a={},transition:h={},...r}=s||{};r={...r,...a};for(const u in r){const c=Od(r[u]);Ed(i,u,c)}}function Rd(i){return!!(_t(i)&&i.add)}function hs(i,n){const s=i.getValue("willChange");if(Rd(s))return s.add(n);if(!s&&$t.WillChange){const a=new $t.WillChange("auto");i.addValue("willChange",a),a.add(n)}}function zu(i){return i.props[Su]}const Dd=i=>i!==null;function Bd(i,{repeat:n,repeatType:s="loop"},a){const h=i.filter(Dd),r=n&&s!=="loop"&&n%2===1?0:h.length-1;return h[r]}const zd={type:"spring",stiffness:500,damping:25,restSpeed:10},Vd=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),Nd={type:"keyframes",duration:.8},Zd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fd=(i,{keyframes:n})=>n.length>2?Nd:Re.has(i)?i.startsWith("scale")?Vd(n[1]):zd:Zd;function jd({when:i,delay:n,delayChildren:s,staggerChildren:a,staggerDirection:h,repeat:r,repeatType:u,repeatDelay:c,from:f,elapsed:m,...p}){return!!Object.keys(p).length}const Xs=(i,n,s,a={},h,r)=>u=>{const c=Ns(a,i)||{},f=c.delay||a.delay||0;let{elapsed:m=0}=a;m=m-Nt(f);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...c,delay:-m,onUpdate:v=>{n.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:i,motionValue:n,element:r?void 0:h};jd(c)||Object.assign(p,Fd(i,p)),p.duration&&(p.duration=Nt(p.duration)),p.repeatDelay&&(p.repeatDelay=Nt(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let _=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(_=!0)),($t.instantAnimations||$t.skipAnimations)&&(_=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,_&&!r&&n.get()!==void 0){const v=Bd(p.keyframes,c);if(v!==void 0){et.update(()=>{p.onUpdate(v),p.onComplete()});return}}return new Sf(p)};function Ud({protectedKeys:i,needsAnimating:n},s){const a=i.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,a}function Vu(i,n,{delay:s=0,transitionOverride:a,type:h}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:u,...c}=n;a&&(r=a);const f=[],m=h&&i.animationState&&i.animationState.getState()[h];for(const p in c){const _=i.getValue(p,i.latestValues[p]??null),v=c[p];if(v===void 0||m&&Ud(m,p))continue;const y={delay:s,...Ns(r||{},p)},w=_.get();if(w!==void 0&&!_.isAnimating&&!Array.isArray(v)&&v===w&&!y.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const C=zu(i);if(C){const O=window.MotionHandoffAnimation(C,p,et);O!==null&&(y.startTime=O,P=!0)}}hs(i,p),_.start(Xs(p,_,v,i.shouldReduceMotion&&pu.has(p)?{type:!1}:y,i,P));const k=_.animation;k&&f.push(k)}return u&&Promise.all(f).then(()=>{et.update(()=>{u&&Id(i,u)})}),f}function cs(i,n,s={}){var f;const a=hi(i,n,s.type==="exit"?(f=i.presenceContext)==null?void 0:f.custom:void 0);let{transition:h=i.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(h=s.transitionOverride);const r=a?()=>Promise.all(Vu(i,a,s)):()=>Promise.resolve(),u=i.variantChildren&&i.variantChildren.size?(m=0)=>{const{delayChildren:p=0,staggerChildren:_,staggerDirection:v}=h;return Hd(i,n,p+m,_,v,s)}:()=>Promise.resolve(),{when:c}=h;if(c){const[m,p]=c==="beforeChildren"?[r,u]:[u,r];return m().then(()=>p())}else return Promise.all([r(),u(s.delay)])}function Hd(i,n,s=0,a=0,h=1,r){const u=[],c=(i.variantChildren.size-1)*a,f=h===1?(m=0)=>m*a:(m=0)=>c-m*a;return Array.from(i.variantChildren).sort(Gd).forEach((m,p)=>{m.notify("AnimationStart",n),u.push(cs(m,n,{...r,delay:s+f(p)}).then(()=>m.notify("AnimationComplete",n)))}),Promise.all(u)}function Gd(i,n){return i.sortNodePosition(n)}function Wd(i,n,s={}){i.notify("AnimationStart",n);let a;if(Array.isArray(n)){const h=n.map(r=>cs(i,r,s));a=Promise.all(h)}else if(typeof n=="string")a=cs(i,n,s);else{const h=typeof n=="function"?hi(i,n,s.custom):n;a=Promise.all(Vu(i,h,s))}return a.then(()=>{i.notify("AnimationComplete",n)})}function Nu(i,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==i.length)return!1;for(let a=0;a<s;a++)if(n[a]!==i[a])return!1;return!0}const Kd=Hs.length;function Zu(i){if(!i)return;if(!i.isControllingVariants){const s=i.parent?Zu(i.parent)||{}:{};return i.props.initial!==void 0&&(s.initial=i.props.initial),s}const n={};for(let s=0;s<Kd;s++){const a=Hs[s],h=i.props[a];(ui(h)||h===!1)&&(n[a]=h)}return n}const qd=[...Us].reverse(),$d=Us.length;function Yd(i){return n=>Promise.all(n.map(({animation:s,options:a})=>Wd(i,s,a)))}function Xd(i){let n=Yd(i),s=zr(),a=!0;const h=f=>(m,p)=>{var v;const _=hi(i,p,f==="exit"?(v=i.presenceContext)==null?void 0:v.custom:void 0);if(_){const{transition:y,transitionEnd:w,...P}=_;m={...m,...P,...w}}return m};function r(f){n=f(i)}function u(f){const{props:m}=i,p=Zu(i.parent)||{},_=[],v=new Set;let y={},w=1/0;for(let k=0;k<$d;k++){const C=qd[k],O=s[C],E=m[C]!==void 0?m[C]:p[C],V=ui(E),I=C===f?O.isActive:null;I===!1&&(w=k);let F=E===p[C]&&E!==m[C]&&V;if(F&&a&&i.manuallyAnimateOnMount&&(F=!1),O.protectedKeys={...y},!O.isActive&&I===null||!E&&!O.prevProp||Ji(E)||typeof E=="boolean")continue;const $=Jd(O.prevProp,E);let j=$||C===f&&O.isActive&&!F&&V||k>w&&V,nt=!1;const ft=Array.isArray(E)?E:[E];let st=ft.reduce(h(C),{});I===!1&&(st={});const{prevResolvedValues:gt={}}=O,nn={...gt,...st},Tt=ot=>{j=!0,v.has(ot)&&(nt=!0,v.delete(ot)),O.needsAnimating[ot]=!0;const B=i.getValue(ot);B&&(B.liveStyle=!1)};for(const ot in nn){const B=st[ot],de=gt[ot];if(y.hasOwnProperty(ot))continue;let N=!1;ls(B)&&ls(de)?N=!Nu(B,de):N=B!==de,N?B!=null?Tt(ot):v.add(ot):B!==void 0&&v.has(ot)?Tt(ot):O.protectedKeys[ot]=!0}O.prevProp=E,O.prevResolvedValues=st,O.isActive&&(y={...y,...st}),a&&i.blockInitialAnimation&&(j=!1),j&&(!(F&&$)||nt)&&_.push(...ft.map(ot=>({animation:ot,options:{type:C}})))}if(v.size){const k={};if(typeof m.initial!="boolean"){const C=hi(i,Array.isArray(m.initial)?m.initial[0]:m.initial);C&&C.transition&&(k.transition=C.transition)}v.forEach(C=>{const O=i.getBaseTarget(C),E=i.getValue(C);E&&(E.liveStyle=!0),k[C]=O??null}),_.push({animation:k})}let P=!!_.length;return a&&(m.initial===!1||m.initial===m.animate)&&!i.manuallyAnimateOnMount&&(P=!1),a=!1,P?n(_):Promise.resolve()}function c(f,m){var _;if(s[f].isActive===m)return Promise.resolve();(_=i.variantChildren)==null||_.forEach(v=>{var y;return(y=v.animationState)==null?void 0:y.setActive(f,m)}),s[f].isActive=m;const p=u(f);for(const v in s)s[v].protectedKeys={};return p}return{animateChanges:u,setActive:c,setAnimateFunction:r,getState:()=>s,reset:()=>{s=zr(),a=!0}}}function Jd(i,n){return typeof n=="string"?n!==i:Array.isArray(n)?!Nu(n,i):!1}function ue(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zr(){return{animate:ue(!0),whileInView:ue(),whileHover:ue(),whileTap:ue(),whileDrag:ue(),whileFocus:ue(),exit:ue()}}class ie{constructor(n){this.isMounted=!1,this.node=n}update(){}}class Qd extends ie{constructor(n){super(n),n.animationState||(n.animationState=Xd(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Ji(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let tm=0;class em extends ie{constructor(){super(...arguments),this.id=tm++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===a)return;const h=this.node.animationState.setActive("exit",!n);s&&!n&&h.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const im={animation:{Feature:Qd},exit:{Feature:em}};function ci(i,n,s,a={passive:!0}){return i.addEventListener(n,s,a),()=>i.removeEventListener(n,s)}function pi(i){return{point:{x:i.pageX,y:i.pageY}}}const nm=i=>n=>js(n)&&i(n,pi(n));function ei(i,n,s,a){return ci(i,n,nm(s),a)}function Fu({top:i,left:n,right:s,bottom:a}){return{x:{min:n,max:s},y:{min:i,max:a}}}function sm({x:i,y:n}){return{top:n.min,right:i.max,bottom:n.max,left:i.min}}function om(i,n){if(!n)return i;const s=n({x:i.left,y:i.top}),a=n({x:i.right,y:i.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}const ju=1e-4,rm=1-ju,am=1+ju,Uu=.01,um=0-Uu,lm=0+Uu;function yt(i){return i.max-i.min}function hm(i,n,s){return Math.abs(i-n)<=s}function Vr(i,n,s,a=.5){i.origin=a,i.originPoint=tt(n.min,n.max,i.origin),i.scale=yt(s)/yt(n),i.translate=tt(s.min,s.max,i.origin)-i.originPoint,(i.scale>=rm&&i.scale<=am||isNaN(i.scale))&&(i.scale=1),(i.translate>=um&&i.translate<=lm||isNaN(i.translate))&&(i.translate=0)}function ii(i,n,s,a){Vr(i.x,n.x,s.x,a?a.originX:void 0),Vr(i.y,n.y,s.y,a?a.originY:void 0)}function Nr(i,n,s){i.min=s.min+n.min,i.max=i.min+yt(n)}function cm(i,n,s){Nr(i.x,n.x,s.x),Nr(i.y,n.y,s.y)}function Zr(i,n,s){i.min=n.min-s.min,i.max=i.min+yt(n)}function ni(i,n,s){Zr(i.x,n.x,s.x),Zr(i.y,n.y,s.y)}const Fr=()=>({translate:0,scale:1,origin:0,originPoint:0}),Te=()=>({x:Fr(),y:Fr()}),jr=()=>({min:0,max:0}),at=()=>({x:jr(),y:jr()});function At(i){return[i("x"),i("y")]}function Hn(i){return i===void 0||i===1}function fs({scale:i,scaleX:n,scaleY:s}){return!Hn(i)||!Hn(n)||!Hn(s)}function le(i){return fs(i)||Hu(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function Hu(i){return Ur(i.x)||Ur(i.y)}function Ur(i){return i&&i!=="0%"}function $i(i,n,s){const a=i-s,h=n*a;return s+h}function Hr(i,n,s,a,h){return h!==void 0&&(i=$i(i,h,a)),$i(i,s,a)+n}function ds(i,n=0,s=1,a,h){i.min=Hr(i.min,n,s,a,h),i.max=Hr(i.max,n,s,a,h)}function Gu(i,{x:n,y:s}){ds(i.x,n.translate,n.scale,n.originPoint),ds(i.y,s.translate,s.scale,s.originPoint)}const Gr=.999999999999,Wr=1.0000000000001;function fm(i,n,s,a=!1){const h=s.length;if(!h)return;n.x=n.y=1;let r,u;for(let c=0;c<h;c++){r=s[c],u=r.projectionDelta;const{visualElement:f}=r.options;f&&f.props.style&&f.props.style.display==="contents"||(a&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Se(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),u&&(n.x*=u.x.scale,n.y*=u.y.scale,Gu(i,u)),a&&le(r.latestValues)&&Se(i,r.latestValues))}n.x<Wr&&n.x>Gr&&(n.x=1),n.y<Wr&&n.y>Gr&&(n.y=1)}function Ce(i,n){i.min=i.min+n,i.max=i.max+n}function Kr(i,n,s,a,h=.5){const r=tt(i.min,i.max,h);ds(i,n,s,r,a)}function Se(i,n){Kr(i.x,n.x,n.scaleX,n.scale,n.originX),Kr(i.y,n.y,n.scaleY,n.scale,n.originY)}function Wu(i,n){return Fu(om(i.getBoundingClientRect(),n))}function dm(i,n,s){const a=Wu(i,s),{scroll:h}=n;return h&&(Ce(a.x,h.offset.x),Ce(a.y,h.offset.y)),a}const Ku=({current:i})=>i?i.ownerDocument.defaultView:null,qr=(i,n)=>Math.abs(i-n);function mm(i,n){const s=qr(i.x,n.x),a=qr(i.y,n.y);return Math.sqrt(s**2+a**2)}class qu{constructor(n,s,{transformPagePoint:a,contextWindow:h,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Wn(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,y=mm(_.offset,{x:0,y:0})>=3;if(!v&&!y)return;const{point:w}=_,{timestamp:P}=mt;this.history.push({...w,timestamp:P});const{onStart:k,onMove:C}=this.handlers;v||(k&&k(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,_)},this.handlePointerMove=(_,v)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Gn(v,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(_,v)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Wn(_.type==="pointercancel"?this.lastMoveEventInfo:Gn(v,this.transformPagePoint),this.history);this.startEvent&&y&&y(_,k),w&&w(_,k)},!js(n))return;this.dragSnapToOrigin=r,this.handlers=s,this.transformPagePoint=a,this.contextWindow=h||window;const u=pi(n),c=Gn(u,this.transformPagePoint),{point:f}=c,{timestamp:m}=mt;this.history=[{...f,timestamp:m}];const{onSessionStart:p}=s;p&&p(n,Wn(c,this.history)),this.removeListeners=fi(ei(this.contextWindow,"pointermove",this.handlePointerMove),ei(this.contextWindow,"pointerup",this.handlePointerUp),ei(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),te(this.updatePoint)}}function Gn(i,n){return n?{point:n(i.point)}:i}function $r(i,n){return{x:i.x-n.x,y:i.y-n.y}}function Wn({point:i},n){return{point:i,delta:$r(i,$u(n)),offset:$r(i,pm(n)),velocity:_m(n,.1)}}function pm(i){return i[0]}function $u(i){return i[i.length-1]}function _m(i,n){if(i.length<2)return{x:0,y:0};let s=i.length-1,a=null;const h=$u(i);for(;s>=0&&(a=i[s],!(h.timestamp-a.timestamp>Nt(n)));)s--;if(!a)return{x:0,y:0};const r=Zt(h.timestamp-a.timestamp);if(r===0)return{x:0,y:0};const u={x:(h.x-a.x)/r,y:(h.y-a.y)/r};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function gm(i,{min:n,max:s},a){return n!==void 0&&i<n?i=a?tt(n,i,a.min):Math.max(i,n):s!==void 0&&i>s&&(i=a?tt(s,i,a.max):Math.min(i,s)),i}function Yr(i,n,s){return{min:n!==void 0?i.min+n:void 0,max:s!==void 0?i.max+s-(i.max-i.min):void 0}}function vm(i,{top:n,left:s,bottom:a,right:h}){return{x:Yr(i.x,s,h),y:Yr(i.y,n,a)}}function Xr(i,n){let s=n.min-i.min,a=n.max-i.max;return n.max-n.min<i.max-i.min&&([s,a]=[a,s]),{min:s,max:a}}function ym(i,n){return{x:Xr(i.x,n.x),y:Xr(i.y,n.y)}}function xm(i,n){let s=.5;const a=yt(i),h=yt(n);return h>a?s=si(n.min,n.max-a,i.min):a>h&&(s=si(i.min,i.max-h,n.min)),qt(0,1,s)}function wm(i,n){const s={};return n.min!==void 0&&(s.min=n.min-i.min),n.max!==void 0&&(s.max=n.max-i.min),s}const ms=.35;function Lm(i=ms){return i===!1?i=0:i===!0&&(i=ms),{x:Jr(i,"left","right"),y:Jr(i,"top","bottom")}}function Jr(i,n,s){return{min:Qr(i,n),max:Qr(i,s)}}function Qr(i,n){return typeof i=="number"?i:i[n]||0}const Pm=new WeakMap;class bm{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=n}start(n,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const h=p=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(pi(p).point)},r=(p,_)=>{const{drag:v,dragPropagation:y,onDragStart:w}=this.getProps();if(v&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ff(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(k=>{let C=this.getAxisMotionValue(k).get()||0;if(Ft.test(C)){const{projection:O}=this.visualElement;if(O&&O.layout){const E=O.layout.layoutBox[k];E&&(C=yt(E)*(parseFloat(C)/100))}}this.originPoint[k]=C}),w&&et.postRender(()=>w(p,_)),hs(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},u=(p,_)=>{const{dragPropagation:v,dragDirectionLock:y,onDirectionLock:w,onDrag:P}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:k}=_;if(y&&this.currentDirection===null){this.currentDirection=Tm(k),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",_.point,k),this.updateAxis("y",_.point,k),this.visualElement.render(),P&&P(p,_)},c=(p,_)=>this.stop(p,_),f=()=>At(p=>{var _;return this.getAnimationState(p)==="paused"&&((_=this.getAxisMotionValue(p).animation)==null?void 0:_.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new qu(n,{onSessionStart:h,onStart:r,onMove:u,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:Ku(this.visualElement)})}stop(n,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:h}=s;this.startAnimation(h);const{onDragEnd:r}=this.getProps();r&&et.postRender(()=>r(n,s))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,a){const{drag:h}=this.getProps();if(!a||!Fi(n,h,this.currentDirection))return;const r=this.getAxisMotionValue(n);let u=this.originPoint[n]+a[n];this.constraints&&this.constraints[n]&&(u=gm(u,this.constraints[n],this.elastic[n])),r.set(u)}resolveConstraints(){var r;const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,h=this.constraints;n&&be(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=vm(a.layoutBox,n):this.constraints=!1,this.elastic=Lm(s),h!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&At(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=wm(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!be(n))return!1;const a=n.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const r=dm(a,h.root,this.visualElement.getTransformPagePoint());let u=ym(h.layout.layoutBox,r);if(s){const c=s(sm(u));this.hasMutatedConstraints=!!c,c&&(u=Fu(c))}return u}startAnimation(n){const{drag:s,dragMomentum:a,dragElastic:h,dragTransition:r,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},m=At(p=>{if(!Fi(p,s,this.currentDirection))return;let _=f&&f[p]||{};u&&(_={min:0,max:0});const v=h?200:1e6,y=h?40:1e7,w={type:"inertia",velocity:a?n[p]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...r,..._};return this.startAxisValueAnimation(p,w)});return Promise.all(m).then(c)}startAxisValueAnimation(n,s){const a=this.getAxisMotionValue(n);return hs(this.visualElement,n),a.start(Xs(n,a,0,s,this.visualElement,!1))}stopAnimation(){At(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){At(n=>{var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.pause()})}getAnimationState(n){var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,a=this.visualElement.getProps(),h=a[s];return h||this.visualElement.getValue(n,(a.initial?a.initial[n]:void 0)||0)}snapToCursor(n){At(s=>{const{drag:a}=this.getProps();if(!Fi(s,a,this.currentDirection))return;const{projection:h}=this.visualElement,r=this.getAxisMotionValue(s);if(h&&h.layout){const{min:u,max:c}=h.layout.layoutBox[s];r.set(n[s]-tt(u,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!be(s)||!a||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};At(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const f=c.get();h[u]=xm({min:f,max:f},this.constraints[u])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),At(u=>{if(!Fi(u,n,null))return;const c=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];c.set(tt(f,m,h[u]))})}addListeners(){if(!this.visualElement.current)return;Pm.set(this.visualElement,this);const n=this.visualElement.current,s=ei(n,"pointerdown",f=>{const{drag:m,dragListener:p=!0}=this.getProps();m&&p&&this.start(f)}),a=()=>{const{dragConstraints:f}=this.getProps();be(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,r=h.addEventListener("measure",a);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),et.read(a);const u=ci(window,"resize",()=>this.scalePositionWithinConstraints()),c=h.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(At(p=>{const _=this.getAxisMotionValue(p);_&&(this.originPoint[p]+=f[p].translate,_.set(_.get()+f[p].translate))}),this.visualElement.render())});return()=>{u(),s(),r(),c&&c()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:h=!1,dragConstraints:r=!1,dragElastic:u=ms,dragMomentum:c=!0}=n;return{...n,drag:s,dragDirectionLock:a,dragPropagation:h,dragConstraints:r,dragElastic:u,dragMomentum:c}}}function Fi(i,n,s){return(n===!0||n===i)&&(s===null||s===i)}function Tm(i,n=10){let s=null;return Math.abs(i.y)>n?s="y":Math.abs(i.x)>n&&(s="x"),s}class Cm extends ie{constructor(n){super(n),this.removeGroupControls=Et,this.removeListeners=Et,this.controls=new bm(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Et}unmount(){this.removeGroupControls(),this.removeListeners()}}const ta=i=>(n,s)=>{i&&et.postRender(()=>i(n,s))};class Sm extends ie{constructor(){super(...arguments),this.removePointerDownListener=Et}onPointerDown(n){this.session=new qu(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ku(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:a,onPanEnd:h}=this.node.getProps();return{onSessionStart:ta(n),onStart:ta(s),onMove:a,onEnd:(r,u)=>{delete this.session,h&&et.postRender(()=>h(r,u))}}}mount(){this.removePointerDownListener=ei(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ea(i,n){return n.max===n.min?0:i/(n.max-n.min)*100}const Ye={correct:(i,n)=>{if(!n.target)return i;if(typeof i=="string")if(Z.test(i))i=parseFloat(i);else return i;const s=ea(i,n.target.x),a=ea(i,n.target.y);return`${s}% ${a}%`}},Mm={correct:(i,{treeScale:n,projectionDelta:s})=>{const a=i,h=ee.parse(i);if(h.length>5)return a;const r=ee.createTransformer(i),u=typeof h[0]!="number"?1:0,c=s.x.scale*n.x,f=s.y.scale*n.y;h[0+u]/=c,h[1+u]/=f;const m=tt(c,f,.5);return typeof h[2+u]=="number"&&(h[2+u]/=m),typeof h[3+u]=="number"&&(h[3+u]/=m),r(h)}};class km extends S.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:a,layoutId:h}=this.props,{projection:r}=n;dd(Am),r&&(s.group&&s.group.add(r),a&&a.register&&h&&a.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Hi.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:a,drag:h,isPresent:r}=this.props,u=a.projection;return u&&(u.isPresent=r,h||n.layoutDependency!==s||s===void 0||n.isPresent!==r?u.willUpdate():this.safeToRemove(),n.isPresent!==r&&(r?u.promote():u.relegate()||et.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Fs.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:h}=n;h&&(h.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(h),a&&a.deregister&&a.deregister(h))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function Yu(i){const[n,s]=Da(),a=S.useContext(ys);return M.jsx(km,{...i,layoutGroup:a,switchLayoutGroup:S.useContext(Mu),isPresent:n,safeToRemove:s})}const Am={borderRadius:{...Ye,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomLeftRadius:Ye,borderBottomRightRadius:Ye,boxShadow:Mm};function Em(i,n,s){const a=_t(i)?i:ai(i);return a.start(Xs("",a,n,s)),a.animation}function Om(i){return i instanceof SVGElement&&i.tagName!=="svg"}const Im=(i,n)=>i.depth-n.depth;class Rm{constructor(){this.children=[],this.isDirty=!1}add(n){Ps(this.children,n),this.isDirty=!0}remove(n){bs(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(Im),this.isDirty=!1,this.children.forEach(n)}}function Dm(i,n){const s=bt.now(),a=({timestamp:h})=>{const r=h-s;r>=n&&(te(a),i(r-n))};return et.setup(a,!0),()=>te(a)}const Xu=["TopLeft","TopRight","BottomLeft","BottomRight"],Bm=Xu.length,ia=i=>typeof i=="string"?parseFloat(i):i,na=i=>typeof i=="number"||Z.test(i);function zm(i,n,s,a,h,r){h?(i.opacity=tt(0,s.opacity??1,Vm(a)),i.opacityExit=tt(n.opacity??1,0,Nm(a))):r&&(i.opacity=tt(n.opacity??1,s.opacity??1,a));for(let u=0;u<Bm;u++){const c=`border${Xu[u]}Radius`;let f=sa(n,c),m=sa(s,c);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||na(f)===na(m)?(i[c]=Math.max(tt(ia(f),ia(m),a),0),(Ft.test(m)||Ft.test(f))&&(i[c]+="%")):i[c]=m}(n.rotate||s.rotate)&&(i.rotate=tt(n.rotate||0,s.rotate||0,a))}function sa(i,n){return i[n]!==void 0?i[n]:i.borderRadius}const Vm=Ju(0,.5,Ga),Nm=Ju(.5,.95,Et);function Ju(i,n,s){return a=>a<i?0:a>n?1:s(si(i,n,a))}function oa(i,n){i.min=n.min,i.max=n.max}function kt(i,n){oa(i.x,n.x),oa(i.y,n.y)}function ra(i,n){i.translate=n.translate,i.scale=n.scale,i.originPoint=n.originPoint,i.origin=n.origin}function aa(i,n,s,a,h){return i-=n,i=$i(i,1/s,a),h!==void 0&&(i=$i(i,1/h,a)),i}function Zm(i,n=0,s=1,a=.5,h,r=i,u=i){if(Ft.test(n)&&(n=parseFloat(n),n=tt(u.min,u.max,n/100)-u.min),typeof n!="number")return;let c=tt(r.min,r.max,a);i===r&&(c-=n),i.min=aa(i.min,n,s,c,h),i.max=aa(i.max,n,s,c,h)}function ua(i,n,[s,a,h],r,u){Zm(i,n[s],n[a],n[h],n.scale,r,u)}const Fm=["x","scaleX","originX"],jm=["y","scaleY","originY"];function la(i,n,s,a){ua(i.x,n,Fm,s?s.x:void 0,a?a.x:void 0),ua(i.y,n,jm,s?s.y:void 0,a?a.y:void 0)}function ha(i){return i.translate===0&&i.scale===1}function Qu(i){return ha(i.x)&&ha(i.y)}function ca(i,n){return i.min===n.min&&i.max===n.max}function Um(i,n){return ca(i.x,n.x)&&ca(i.y,n.y)}function fa(i,n){return Math.round(i.min)===Math.round(n.min)&&Math.round(i.max)===Math.round(n.max)}function tl(i,n){return fa(i.x,n.x)&&fa(i.y,n.y)}function da(i){return yt(i.x)/yt(i.y)}function ma(i,n){return i.translate===n.translate&&i.scale===n.scale&&i.originPoint===n.originPoint}class Hm{constructor(){this.members=[]}add(n){Ps(this.members,n),n.scheduleRender()}remove(n){if(bs(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(h=>n===h);if(s===0)return!1;let a;for(let h=s;h>=0;h--){const r=this.members[h];if(r.isPresent!==!1){a=r;break}}return a?(this.promote(a),!0):!1}promote(n,s){const a=this.lead;if(n!==a&&(this.prevLead=a,this.lead=n,n.show(),a)){a.instance&&a.scheduleRender(),n.scheduleRender(),n.resumeFrom=a,s&&(n.resumeFrom.preserveOpacity=!0),a.snapshot&&(n.snapshot=a.snapshot,n.snapshot.latestValues=a.animationValues||a.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:h}=n.options;h===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:a}=n;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gm(i,n,s){let a="";const h=i.x.translate/n.x,r=i.y.translate/n.y,u=(s==null?void 0:s.z)||0;if((h||r||u)&&(a=`translate3d(${h}px, ${r}px, ${u}px) `),(n.x!==1||n.y!==1)&&(a+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:m,rotate:p,rotateX:_,rotateY:v,skewX:y,skewY:w}=s;m&&(a=`perspective(${m}px) ${a}`),p&&(a+=`rotate(${p}deg) `),_&&(a+=`rotateX(${_}deg) `),v&&(a+=`rotateY(${v}deg) `),y&&(a+=`skewX(${y}deg) `),w&&(a+=`skewY(${w}deg) `)}const c=i.x.scale*n.x,f=i.y.scale*n.y;return(c!==1||f!==1)&&(a+=`scale(${c}, ${f})`),a||"none"}const Kn=["","X","Y","Z"],Wm={visibility:"hidden"},pa=1e3;let Km=0;function qn(i,n,s,a){const{latestValues:h}=n;h[i]&&(s[i]=h[i],n.setStaticValue(i,0),a&&(a[i]=0))}function el(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:n}=i.options;if(!n)return;const s=zu(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:h,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(s,"transform",et,!(h||r))}const{parent:a}=i;a&&!a.hasCheckedOptimisedAppear&&el(a)}function il({attachResizeListener:i,defaultParent:n,measureScroll:s,checkIsScrollRoot:a,resetTransform:h}){return class{constructor(u={},c=n==null?void 0:n()){this.id=Km++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ym),this.nodes.forEach(ep),this.nodes.forEach(ip),this.nodes.forEach(Xm)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rm)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ss),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const f=this.eventHandlers.get(u);f&&f.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Om(u),this.instance=u;const{layoutId:f,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(m||f)&&(this.isLayoutDirty=!0),i){let _;const v=()=>this.root.updateBlockedByResize=!1;i(u,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=Dm(v,250),Hi.hasAnimatedSinceResize&&(Hi.hasAnimatedSinceResize=!1,this.nodes.forEach(ga))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||p.getDefaultTransition()||ap,{onLayoutAnimationStart:k,onLayoutAnimationComplete:C}=p.getProps(),O=!this.targetLayout||!tl(this.targetLayout,w),E=!v&&y;if(this.options.layoutRoot||this.resumeFrom||E||v&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,E);const V={...Ns(P,"layout"),onPlay:k,onComplete:C};(p.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else v||ga(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,te(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(np),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&el(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const _=this.path[p];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_a);return}this.isUpdating||this.nodes.forEach(Qm),this.isUpdating=!1,this.nodes.forEach(tp),this.nodes.forEach(qm),this.nodes.forEach($m),this.clearAllSnapshots();const c=bt.now();mt.delta=qt(0,1e3/60,c-mt.timestamp),mt.timestamp=c,mt.isProcessing=!0,Vn.update.process(mt),Vn.preRender.process(mt),Vn.render.process(mt),mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fs.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Jm),this.sharedNodes.forEach(sp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yt(this.snapshot.measuredBox.x)&&!yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c){const f=a(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!h)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Qu(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,p=m!==this.prevTransformTemplateValue;u&&(c||le(this.latestValues)||p)&&(h(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return u&&(f=this.removeTransform(f)),up(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:u}=this.options;if(!u)return at();const c=u.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(lp))){const{scroll:p}=this.root;p&&(Ce(c.x,p.offset.x),Ce(c.y,p.offset.y))}return c}removeElementScroll(u){var f;const c=at();if(kt(c,u),(f=this.scroll)!=null&&f.wasRoot)return c;for(let m=0;m<this.path.length;m++){const p=this.path[m],{scroll:_,options:v}=p;p!==this.root&&_&&v.layoutScroll&&(_.wasRoot&&kt(c,u),Ce(c.x,_.offset.x),Ce(c.y,_.offset.y))}return c}applyTransform(u,c=!1){const f=at();kt(f,u);for(let m=0;m<this.path.length;m++){const p=this.path[m];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Se(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),le(p.latestValues)&&Se(f,p.latestValues)}return le(this.latestValues)&&Se(f,this.latestValues),f}removeTransform(u){const c=at();kt(c,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!le(m.latestValues))continue;fs(m.latestValues)&&m.updateSnapshot();const p=at(),_=m.measurePageBox();kt(p,_),la(c,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,p)}return le(this.latestValues)&&la(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var v;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:_}=this.options;if(!(!this.layout||!(p||_))){if(this.resolvedRelativeTargetAt=mt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),ni(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kt(this.target,this.layout.layoutBox),Gu(this.target,this.targetDelta)):kt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),ni(this.relativeTargetOrigin,this.target,y.target),kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fs(this.parent.latestValues)||Hu(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===mt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||p))return;kt(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,v=this.treeScale.y;fm(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=at());const{target:y}=u;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ra(this.prevProjectionDelta.x,this.projectionDelta.x),ra(this.prevProjectionDelta.y,this.projectionDelta.y)),ii(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==v||!ma(this.projectionDelta.x,this.prevProjectionDelta.x)||!ma(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Te(),this.projectionDelta=Te(),this.projectionDeltaWithTransform=Te()}setAnimationOrigin(u,c=!1){const f=this.snapshot,m=f?f.latestValues:{},p={...this.latestValues},_=Te();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=at(),y=f?f.source:void 0,w=this.layout?this.layout.source:void 0,P=y!==w,k=this.getStack(),C=!k||k.members.length<=1,O=!!(P&&!C&&this.options.crossfade===!0&&!this.path.some(rp));this.animationProgress=0;let E;this.mixTargetDelta=V=>{const I=V/1e3;va(_.x,u.x,I),va(_.y,u.y,I),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ni(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),op(this.relativeTarget,this.relativeTargetOrigin,v,I),E&&Um(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=at()),kt(E,this.relativeTarget)),P&&(this.animationValues=p,zm(p,m,this.latestValues,I,O,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(te(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Hi.hasAnimatedSinceResize=!0,this.currentAnimation=Em(0,pa,{...u,onUpdate:c=>{this.mixTargetDelta(c),u.onUpdate&&u.onUpdate(c)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pa),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:f,layout:m,latestValues:p}=u;if(!(!c||!f||!m)){if(this!==u&&this.layout&&m&&nl(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||at();const _=yt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+_;const v=yt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+v}kt(c,f),Se(c,p),ii(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new Hm),this.sharedNodes.get(u).add(c);const m=c.options.initialPromotionConfig;c.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const m={};f.z&&qn("z",u,m,this.animationValues);for(let p=0;p<Kn.length;p++)qn(`rotate${Kn[p]}`,u,m,this.animationValues),qn(`skew${Kn[p]}`,u,m,this.animationValues);u.render();for(const p in m)u.setStaticValue(p,m[p]),this.animationValues&&(this.animationValues[p]=m[p]);u.scheduleRender()}getProjectionStyles(u){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Wm;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ui(u==null?void 0:u.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Ui(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!le(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const p=m.animationValues||m.latestValues;this.applyTransformsToTarget(),c.transform=Gm(this.projectionDeltaWithTransform,this.treeScale,p),f&&(c.transform=f(p,c.transform));const{x:_,y:v}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${v.origin*100}% 0`,m.animationValues?c.opacity=m===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in li){if(p[y]===void 0)continue;const{correct:w,applyTo:P,isCSSVariable:k}=li[y],C=c.transform==="none"?p[y]:w(p[y],m);if(P){const O=P.length;for(let E=0;E<O;E++)c[P[E]]=C}else k?this.options.visualElement.renderState.vars[y]=C:c[y]=C}return this.options.layoutId&&(c.pointerEvents=m===this?Ui(u==null?void 0:u.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var c;return(c=u.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(_a),this.root.sharedNodes.clear()}}}function qm(i){i.updateLayout()}function $m(i){var s;const n=((s=i.resumeFrom)==null?void 0:s.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&n&&i.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:h}=i.layout,{animationType:r}=i.options,u=n.source!==i.layout.source;r==="size"?At(_=>{const v=u?n.measuredBox[_]:n.layoutBox[_],y=yt(v);v.min=a[_].min,v.max=v.min+y}):nl(r,n.layoutBox,a)&&At(_=>{const v=u?n.measuredBox[_]:n.layoutBox[_],y=yt(a[_]);v.max=v.min+y,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[_].max=i.relativeTarget[_].min+y)});const c=Te();ii(c,a,n.layoutBox);const f=Te();u?ii(f,i.applyTransform(h,!0),n.measuredBox):ii(f,a,n.layoutBox);const m=!Qu(c);let p=!1;if(!i.resumeFrom){const _=i.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:v,layout:y}=_;if(v&&y){const w=at();ni(w,n.layoutBox,v.layoutBox);const P=at();ni(P,a,y.layoutBox),tl(w,P)||(p=!0),_.options.layoutRoot&&(i.relativeTarget=P,i.relativeTargetOrigin=w,i.relativeParent=_)}}}i.notifyListeners("didUpdate",{layout:a,snapshot:n,delta:f,layoutDelta:c,hasLayoutChanged:m,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:a}=i.options;a&&a()}i.options.transition=void 0}function Ym(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function Xm(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Jm(i){i.clearSnapshot()}function _a(i){i.clearMeasurements()}function Qm(i){i.isLayoutDirty=!1}function tp(i){const{visualElement:n}=i.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),i.resetTransform()}function ga(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function ep(i){i.resolveTargetDelta()}function ip(i){i.calcProjection()}function np(i){i.resetSkewAndRotation()}function sp(i){i.removeLeadSnapshot()}function va(i,n,s){i.translate=tt(n.translate,0,s),i.scale=tt(n.scale,1,s),i.origin=n.origin,i.originPoint=n.originPoint}function ya(i,n,s,a){i.min=tt(n.min,s.min,a),i.max=tt(n.max,s.max,a)}function op(i,n,s,a){ya(i.x,n.x,s.x,a),ya(i.y,n.y,s.y,a)}function rp(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const ap={duration:.45,ease:[.4,0,.1,1]},xa=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),wa=xa("applewebkit/")&&!xa("chrome/")?Math.round:Et;function La(i){i.min=wa(i.min),i.max=wa(i.max)}function up(i){La(i.x),La(i.y)}function nl(i,n,s){return i==="position"||i==="preserve-aspect"&&!hm(da(n),da(s),.2)}function lp(i){var n;return i!==i.root&&((n=i.scroll)==null?void 0:n.wasRoot)}const hp=il({attachResizeListener:(i,n)=>ci(i,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$n={current:void 0},sl=il({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!$n.current){const i=new hp({});i.mount(window),i.setOptions({layoutScroll:!0}),$n.current=i}return $n.current},resetTransform:(i,n)=>{i.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),cp={pan:{Feature:Sm},drag:{Feature:Cm,ProjectionNode:sl,MeasureLayout:Yu}};function Pa(i,n,s){const{props:a}=i;i.animationState&&a.whileHover&&i.animationState.setActive("whileHover",s==="Start");const h="onHover"+s,r=a[h];r&&et.postRender(()=>r(n,pi(n)))}class fp extends ie{mount(){const{current:n}=this.node;n&&(this.unmount=jf(n,(s,a)=>(Pa(this.node,a,"Start"),h=>Pa(this.node,h,"End"))))}unmount(){}}class dp extends ie{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fi(ci(this.node.current,"focus",()=>this.onFocus()),ci(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ba(i,n,s){const{props:a}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&a.whileTap&&i.animationState.setActive("whileTap",s==="Start");const h="onTap"+(s==="End"?"":s),r=a[h];r&&et.postRender(()=>r(n,pi(n)))}class mp extends ie{mount(){const{current:n}=this.node;n&&(this.unmount=Wf(n,(s,a)=>(ba(this.node,a,"Start"),(h,{success:r})=>ba(this.node,h,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ps=new WeakMap,Yn=new WeakMap,pp=i=>{const n=ps.get(i.target);n&&n(i)},_p=i=>{i.forEach(pp)};function gp({root:i,...n}){const s=i||document;Yn.has(s)||Yn.set(s,{});const a=Yn.get(s),h=JSON.stringify(n);return a[h]||(a[h]=new IntersectionObserver(_p,{root:i,...n})),a[h]}function vp(i,n,s){const a=gp(n);return ps.set(i,s),a.observe(i),()=>{ps.delete(i),a.unobserve(i)}}const yp={some:0,all:1};class xp extends ie{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:a,amount:h="some",once:r}=n,u={root:s?s.current:void 0,rootMargin:a,threshold:typeof h=="number"?h:yp[h]},c=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,r&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:p,onViewportLeave:_}=this.node.getProps(),v=m?p:_;v&&v(f)};return vp(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(wp(n,s))&&this.startObserver()}unmount(){}}function wp({viewport:i={}},{viewport:n={}}={}){return s=>i[s]!==n[s]}const Lp={inView:{Feature:xp},tap:{Feature:mp},focus:{Feature:dp},hover:{Feature:fp}},Pp={layout:{ProjectionNode:sl,MeasureLayout:Yu}},_s={current:null},ol={current:!1};function bp(){if(ol.current=!0,!!ws)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),n=()=>_s.current=i.matches;i.addListener(n),n()}else _s.current=!1}const Tp=new WeakMap;function Cp(i,n,s){for(const a in n){const h=n[a],r=s[a];if(_t(h))i.addValue(a,h);else if(_t(r))i.addValue(a,ai(h,{owner:i}));else if(r!==h)if(i.hasValue(a)){const u=i.getValue(a);u.liveStyle===!0?u.jump(h):u.hasAnimated||u.set(h)}else{const u=i.getStaticValue(a);i.addValue(a,ai(u!==void 0?u:h,{owner:i}))}}for(const a in s)n[a]===void 0&&i.removeValue(a);return n}const Ta=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sp{scrapeMotionValuesFromProps(n,s,a){return{}}constructor({parent:n,props:s,presenceContext:a,reducedMotionConfig:h,blockInitialAnimation:r,visualState:u},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vs,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=bt.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,et.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=m,this.parent=n,this.props=s,this.presenceContext=a,this.depth=n?n.depth+1:0,this.reducedMotionConfig=h,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=Qi(s),this.isVariantNode=Cu(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:p,..._}=this.scrapeMotionValuesFromProps(s,{},this);for(const v in _){const y=_[v];f[v]!==void 0&&_t(y)&&y.set(f[v],!1)}}mount(n){this.current=n,Tp.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),ol.current||bp(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_s.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),te(this.notifyUpdate),te(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const a=Re.has(n);a&&this.onBindTransform&&this.onBindTransform();const h=s.on("change",c=>{this.latestValues[n]=c,this.props.onUpdate&&et.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),r=s.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{h(),r(),u&&u(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in Ae){const s=Ae[n];if(!s)continue;const{isEnabled:a,Feature:h}=s;if(!this.features[n]&&h&&a(this.props)&&(this.features[n]=new h(this)),this.features[n]){const r=this.features[n];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<Ta.length;a++){const h=Ta[a];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const r="on"+h,u=n[r];u&&(this.propEventSubscriptions[h]=this.on(h,u))}this.prevMotionValues=Cp(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const a=this.values.get(n);s!==a&&(a&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let a=this.values.get(n);return a===void 0&&s!==void 0&&(a=ai(s===null?void 0:s,{owner:this}),this.addValue(n,a)),a}readValue(n,s){let a=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return a!=null&&(typeof a=="string"&&(Ba(a)||za(a))?a=parseFloat(a):!Yf(a)&&ee.test(s)&&(a=yu(n,s)),this.setBaseTarget(n,_t(a)?a.get():a)),_t(a)?a.get():a}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){var r;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const u=$s(this.props,s,(r=this.presenceContext)==null?void 0:r.custom);u&&(a=u[n])}if(s&&a!==void 0)return a;const h=this.getBaseTargetFromProps(this.props,n);return h!==void 0&&!_t(h)?h:this.initialValues[n]!==void 0&&a===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new Ss),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}}class rl extends Sp{constructor(){super(...arguments),this.KeyframeResolver=Nf}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:a}){delete s[n],delete a[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;_t(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function al(i,{style:n,vars:s},a,h){Object.assign(i.style,n,h&&h.getProjectionStyles(a));for(const r in s)i.style.setProperty(r,s[r])}function Mp(i){return window.getComputedStyle(i)}class kp extends rl{constructor(){super(...arguments),this.type="html",this.renderInstance=al}readValueFromInstance(n,s){if(Re.has(s))return sf(n,s);{const a=Mp(n),h=(As(s)?a.getPropertyValue(s):a[s])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(n,{transformPagePoint:s}){return Wu(n,s)}build(n,s,a){Ws(n,s,a.transformTemplate)}scrapeMotionValuesFromProps(n,s,a){return Ys(n,s,a)}}const ul=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ap(i,n,s,a){al(i,n,void 0,a);for(const h in n.attrs)i.setAttribute(ul.has(h)?h:Gs(h),n.attrs[h])}class Ep extends rl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=at}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(Re.has(s)){const a=vu(s);return a&&a.default||0}return s=ul.has(s)?s:Gs(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,a){return Bu(n,s,a)}build(n,s,a){Ou(n,s,this.isSVGTag,a.transformTemplate)}renderInstance(n,s,a,h){Ap(n,s,a,h)}mount(n){this.isSVGTag=Ru(n.tagName),super.mount(n)}}const Op=(i,n)=>qs(i)?new Ep(n):new kp(n,{allowProjection:i!==S.Fragment}),Ip=Ad({...im,...Lp,...cp,...Pp},Op),Ca=ed(Ip);function Rp({open:i,onClose:n,children:s,className:a="",width:h="w-80",side:r="right"}){const u={hidden:{x:r==="right"?"100%":"-100%"},visible:{x:0}};return M.jsx(tc,{children:i&&M.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[M.jsx(Ca.div,{className:"absolute inset-0 bg-black/60",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),M.jsx(Ca.div,{className:ka("relative bg-surface text-text shadow-xl overflow-y-auto",h),initial:"hidden",animate:"visible",exit:"hidden",variants:u,transition:{type:"tween",duration:.3},children:s})]})})}function Xn({title:i,children:n,className:s=""}){return M.jsxs("section",{className:ka("space-y-2",s),children:[i&&M.jsx("h2",{className:"text-xl font-display text-text",children:i}),M.jsx("div",{className:"space-y-4",children:n})]})}function Sa({type:i="text",value:n,onChange:s,placeholder:a="",className:h="",disabled:r=!1,...u}){return M.jsx("input",{type:i,value:n,onChange:s,placeholder:a,disabled:r,className:"w-full bg-[var(--surface)]/90 text-[var(--text)] placeholder:text-[color:var(--dim)] border border-[color:var(--border)] rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-white/10 transition-shadow "+h,...u})}function Dp({children:i}){return M.jsx("div",{className:"flex items-center gap-3 bg-[rgba(17,17,17,0.85)] backdrop-blur-md rounded-2xl px-3 py-2 shadow-lg",children:i})}function Bp(i,n=300){const[s,a]=S.useState(i);return S.useEffect(()=>{const h=setTimeout(()=>a(i),n);return()=>clearTimeout(h)},[i,n]),s}function zp(i,n,s,a){const h=Fh(),r=jh(),u=m=>{const p=new URLSearchParams(m),_=p.get("q")||"",v=p.get("pid"),y=p.get("fid"),w=p.get("compare"),P=p.get("yr"),k=p.get("mode"),C={};if(_&&(C.person=_),v&&(C.selectedPersonId=v),y&&(C.selectedFamilyId=y),w&&(C.compareIds=w.split(",").filter(Boolean)),P&&P.includes("-")){const[O,E]=P.split("-").map(V=>parseInt(V,10));!Number.isNaN(O)&&!Number.isNaN(E)&&(C.yearRange=[O,E])}return{parsed:C,modeParam:k}},c=(m,p)=>{const _=new URLSearchParams;return m.person&&_.set("q",m.person),m.selectedPersonId&&_.set("pid",m.selectedPersonId),m.selectedFamilyId&&_.set("fid",m.selectedFamilyId),Array.isArray(m.compareIds)&&m.compareIds.length&&_.set("compare",m.compareIds.join(",")),Array.isArray(m.yearRange)&&m.yearRange.length===2&&_.set("yr",`${m.yearRange[0]}-${m.yearRange[1]}`),p&&p!=="default"&&_.set("mode",p),_.toString()};S.useEffect(()=>{const{parsed:m,modeParam:p}=u(h.search);(Object.keys(m).length>0||!!p)&&(n(m),p&&a(p))},[]);const f=S.useMemo(()=>c(i,s),[i,s]);S.useEffect(()=>{(h.search.startsWith("?")?h.search.slice(1):h.search)!==f&&r({search:f?`?${f}`:""},{replace:!0})},[f,h.search,r])}function Vp(i,n,s){const[a,h]=S.useState([]),[r,u]=S.useState(!1),[c,f]=S.useState(null),m=S.useCallback(()=>{if(!i)return;u(!0),f(null);const{selectedFamilyId:p,compareIds:_,...v}=n;(s==="family"?Uh(i,p):s==="compare"?Hh(i,_):Gh(i,v)).then(w=>{let P=[];Array.isArray(w)&&w.length&&w[0].event_type?P=w:Array.isArray(w)&&(P=w.flatMap(k=>(k.movements||[]).map(C=>({...C,person_id:k.person_id,person_name:k.name})))),h(P)}).catch(w=>{console.error("❌ movement fetch failed",w),f("Failed to load movements.")}).finally(()=>{u(!1)})},[i,n,s]);return S.useEffect(()=>{m()},[m]),{movements:a,loading:r,error:c}}function Np({onClose:i}){const{counts:n}=Aa(),{filters:s,setFilters:a}=jt(),h=n.relatives||{},r=u=>a(c=>({...c,relations:{...c.relations,[u]:!c.relations[u]}}));return M.jsxs("div",{className:"absolute left-full ml-2 top-0 bg-[rgba(24,24,24,0.95)] backdrop-blur-md rounded-xl p-3 space-y-2 shadow-xl z-50 w-44",children:[Object.entries(h).map(([u,c])=>M.jsxs("button",{onClick:()=>r(u),className:"flex justify-between w-full text-left px-2 py-1 rounded hover:bg-white/10",children:[M.jsx("span",{className:"capitalize",children:u}),M.jsx("span",{children:c.length})]},u)),M.jsx("button",{onClick:i,className:"mt-2 w-full py-1 bg-accent/20 hover:bg-accent/40 rounded text-sm",children:"Close"})]})}function Zp(){const{counts:i}=Aa(),{filters:n,mode:s}=jt(),[a,h]=S.useState(!1);return S.useEffect(()=>{},[i,n]),M.jsxs(Ia,{className:"legend-panel fixed left-4 bottom-4 z-40 rounded-2xl p-4 text-sm space-y-3 shadow-xl backdrop-blur-md w-72",style:{backgroundColor:"rgba(24,24,24,0.85)"},children:[M.jsx("h3",{className:"font-semibold mb-1 text-white",children:"Legend"}),(()=>{const r=[];return(s==="person"||s==="compare")&&r.push(["👤","People",i.people]),s==="family"&&r.push(["👪","Families",i.families]),s==="person"&&n.selectedPersonId&&r.push(["🏠","Household",i.household]),r.push(["🌳","Whole Tree",i.wholeTree]),r})().map(([r,u,c])=>M.jsxs("div",{className:"flex justify-between text-white",children:[M.jsxs("div",{className:"flex items-center",children:[M.jsx("span",{className:"mr-2",children:r}),u]}),M.jsx("div",{children:c})]},u)),M.jsx("button",{onClick:()=>h(!a),className:"w-full bg-accent/20 hover:bg-accent/40 rounded-lg py-1 text-sm transition text-white",children:"Choose Relatives"}),a&&M.jsx(Np,{onClose:()=>h(!1)})]})}const Fp=[{value:"person",label:"👤 Person"},{value:"family",label:"🏡 Family"},{value:"compare",label:"⚔️ Compare"}];function jp(){const{mode:i,setMode:n}=jt();return M.jsxs("div",{className:"flex flex-col",children:[M.jsx("label",{className:"text-xs font-medium text-dim mb-1",children:"Mode"}),M.jsx("div",{className:"flex gap-2",children:Fp.map(s=>M.jsx("button",{onClick:()=>n(s.value),className:`px-3 py-2 rounded-md text-sm border ${i===s.value?"bg-accent text-black border-accent":"bg-surface text-white border-border hover:border-white/50"} transition-all`,children:s.label},s.value))})]})}function Up(){const{filters:i,setFilters:n,isDrawerOpen:s,setIsDrawerOpen:a,clearAll:h}=jt(),r=(c,f)=>n(m=>({...m,[c]:{...m[c],[f]:!m[c][f]}})),u=(c,f)=>n(m=>{const p=[...m.yearRange];return p[c]=Number(f),{...m,yearRange:p}});return M.jsx(Rp,{open:s,onClose:()=>a(!1),width:"w-72",className:"backdrop-blur-md",children:M.jsxs("div",{className:`
          flex flex-col h-full
          bg-[var(--surface)]/80 backdrop-blur-lg
          text-[var(--text)]
          p-4
          rounded-l-lg
        `,children:[M.jsxs("header",{className:"flex items-center justify-between mb-4",children:[M.jsx("h2",{className:"text-xl font-display font-semibold",children:"Filters"}),M.jsx("button",{onClick:h,className:"text-sm text-accent hover:underline",children:"Clear all"})]}),M.jsx(Xn,{title:"Years",children:M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx(Sa,{type:"number",value:i.yearRange[0],onChange:c=>u(0,c.target.value),className:"w-24"}),M.jsx("span",{children:"—"}),M.jsx(Sa,{type:"number",value:i.yearRange[1],onChange:c=>u(1,c.target.value),className:"w-24"})]})}),[{label:"Event Types",key:"eventTypes"},{label:"Relations",key:"relations"},{label:"Sources",key:"sources"}].map(({label:c,key:f})=>M.jsx(Xn,{title:c,children:M.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(i[f]).map(([m,p])=>M.jsx("button",{onClick:()=>r(f,m),className:`filter-pill ${p?"bg-accent text-black":"bg-white/10 text-white"}`,children:m},m))})},f)),M.jsx(Xn,{title:"Location Confidence",children:M.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[M.jsx("input",{type:"checkbox",checked:i.vague,onChange:()=>n(c=>({...c,vague:!c.vague}))}),M.jsx("span",{children:"Include vague / state-only places"})]})}),M.jsx("footer",{className:"flex justify-end space-x-4 pt-4 border-t border-white/10 mt-6",children:M.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-white text-black rounded hover:bg-neutral-200 transition",children:"Apply"})})]})})}function Hp(){const{activeSection:i,toggleSection:n}=Ee(),{filters:s,setFilters:a}=jt(),h=i==="search",r=()=>n("search"),u=c=>a(f=>({...f,person:c.target.value}));return M.jsx("div",{className:`transition-all ${h?"w-full":"w-40"}`,children:M.jsx("input",{className:"bg-surface border border-border rounded px-3 py-1 w-full",placeholder:"Type name...",value:s.person,onFocus:r,onChange:u})})}function Gp(){const{activeSection:i,toggleSection:n}=Ee(),{filters:s,setFilters:a}=jt(),h=i==="person",[r,u]=S.useState([]);S.useEffect(()=>{if(s.person.trim().length<2)return u([]);Wh(s.person).then(u)},[s.person]);const c=f=>{a(m=>({...m,selectedPersonId:f.id})),n("person")};return M.jsx("div",{className:`transition-all ${h?"w-full":"w-40"} bg-[var(--surface)] border border-white/10 rounded overflow-hidden`,children:M.jsx("ul",{className:"divide-y divide-white/10",children:r.map(f=>M.jsx("li",{children:M.jsxs("button",{onClick:()=>c(f),className:"w-full text-left px-3 py-2 hover:bg-white/10 transition",children:[f.name," ",f.birthYear&&`(${f.birthYear})`]})},f.id))})})}function Wp(){const{activeSection:i,toggleSection:n}=Ee(),{filters:s,setFilters:a}=jt(),h=i==="family",[r,u]=S.useState([]);S.useEffect(()=>{if(s.person.trim().length<2)return u([]);Ea(s.person).then(u).catch(f=>{console.error("Failed to search families:",f),u([])})},[s.person]);const c=f=>{a(m=>({...m,selectedFamilyId:f.id})),n("family")};return M.jsx("div",{className:`transition-all ${h?"w-full":"w-40"} bg-[var(--surface)] border border-white/10 rounded overflow-hidden`,children:M.jsx("ul",{className:"max-h-60 overflow-y-auto divide-y divide-white/10",children:r.map(f=>M.jsx("li",{children:M.jsx("button",{onClick:()=>c(f),className:"w-full text-left px-3 py-2 hover:bg-white/10 transition",children:f.name})},f.id))})})}function Kp(){const{activeSection:i,toggleSection:n}=Ee(),{filters:s,setFilters:a}=jt(),h=i==="compare",[r,u]=S.useState([]);S.useEffect(()=>{if(s.person.trim().length<2)return u([]);Ea(s.person).then(u)},[s.person]);const c=m=>{a(p=>{const v=p.compareIds.includes(m)?p.compareIds.filter(y=>y!==m):[...p.compareIds,m];return{...p,compareIds:v}})},f=()=>n("compare");return M.jsxs("div",{className:`transition-all ${h?"w-full":"w-40"} bg-[var(--surface)] border border-white/10 rounded overflow-hidden`,children:[M.jsx("ul",{className:"divide-y divide-white/10 max-h-60 overflow-y-auto",children:r.map(m=>M.jsx("li",{className:"flex items-center",children:M.jsxs("label",{className:"flex-1 px-3 py-2 hover:bg-white/10",children:[M.jsx("input",{type:"checkbox",checked:s.compareIds.includes(m.id),onChange:()=>c(m.id),className:"mr-2"}),m.name]})},m.id))}),M.jsx("button",{onClick:f,className:"w-full bg-accent/20 hover:bg-accent/40 rounded-lg py-1 text-sm mt-2 transition text-white",children:"Done"})]})}function qp(){const{activeSection:i,toggleSection:n}=Ee(),{filters:s,clearAll:a,setIsDrawerOpen:h}=jt();Me.useEffect(()=>{},[i]);const r=()=>{n("filters"),h(!0)};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-50 w-[90vw] max-w-4xl",children:M.jsxs(Dp,{children:[M.jsx(jp,{}),(i===null||i==="search")&&M.jsx(Hp,{}),i==="person"&&M.jsx(Gp,{}),i==="family"&&M.jsx(Wp,{}),i==="compare"&&M.jsx(Kp,{}),i===null&&M.jsx("button",{"aria-label":"Open Filters",onClick:r,className:"text-sm text-accent hover:underline",children:"Filters"}),M.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[M.jsx("span",{className:"text-xs text-white/60",children:(()=>{let u=0;return s.person&&u++,s.vague&&u++,u+=Object.values(s.eventTypes||{}).filter(Boolean).length,u+=Object.values(s.relations||{}).filter(Boolean).length,u+=Object.values(s.sources||{}).filter(Boolean).length,Array.isArray(s.yearRange)&&(s.yearRange[0]!==1800||s.yearRange[1]!==2e3)&&u++,`${u} filter${u===1?"":"s"} applied`})()}),M.jsx("button",{onClick:a,className:"text-xs text-white/70 hover:text-white underline-offset-2 hover:underline",title:"Clear all filters",children:"Clear"})]})]})}),i==="filters"&&M.jsx(Up,{})]})}function $p({loading:i,error:n,empty:s}){if(!i&&!n&&!s)return null;let a="Loading...";return n?a=n:s&&(a="No data found."),M.jsx("div",{className:"absolute inset-0 z-40 flex items-center justify-center bg-black/60 text-white",role:"status","aria-live":"polite",children:M.jsx(Ia,{className:"bg-surface/90 backdrop-blur-md border-white/10",children:M.jsx("p",{className:"px-4 py-2 text-sm",children:a})})})}function ll(i,n){const s=S.useRef(n);S.useEffect(function(){n!==s.current&&i.attributionControl!=null&&(s.current!=null&&i.attributionControl.removeAttribution(s.current),n!=null&&i.attributionControl.addAttribution(n)),s.current=n},[i,n])}const Yp=1;function Xp(i){return Object.freeze({__version:Yp,map:i})}function hl(i,n){return Object.freeze({...i,...n})}const cl=S.createContext(null),fl=cl.Provider;function _i(){const i=S.useContext(cl);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function dl(i){function n(s,a){const{instance:h,context:r}=i(s).current;return S.useImperativeHandle(a,()=>h),s.children==null?null:Me.createElement(fl,{value:r},s.children)}return S.forwardRef(n)}function Jp(i){function n(s,a){const[h,r]=S.useState(!1),{instance:u}=i(s,r).current;S.useImperativeHandle(a,()=>u),S.useEffect(function(){h&&u.update()},[u,h,s.children]);const c=u._contentNode;return c?Kh.createPortal(s.children,c):null}return S.forwardRef(n)}function ml(i){function n(s,a){const{instance:h}=i(s).current;return S.useImperativeHandle(a,()=>h),null}return S.forwardRef(n)}function Qp(i){return function(s){const a=_i(),h=i(s,a),{instance:r}=h.current,u=S.useRef(s.position),{position:c}=s;return S.useEffect(function(){return r.addTo(a.map),function(){r.remove()}},[a.map,r]),S.useEffect(function(){c!=null&&c!==u.current&&(r.setPosition(c),u.current=c)},[r,c]),h}}function Js(i,n){const s=S.useRef();S.useEffect(function(){return n!=null&&i.instance.on(n),s.current=n,function(){s.current!=null&&i.instance.off(s.current),s.current=null}},[i,n])}function tn(i,n){const s=i.pane??n.pane;return s?{...i,pane:s}:i}function t_(i,n){return function(a,h){const r=_i(),u=i(tn(a,r),r);return ll(r.map,a.attribution),Js(u.current,a.eventHandlers),n(u.current,r,a,h),u}}var gs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,n){(function(s,a){a(n)})(Oa,function(s){var a="1.9.4";function h(t){var e,o,l,d;for(o=1,l=arguments.length;o<l;o++){d=arguments[o];for(e in d)t[e]=d[e]}return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function u(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var l=o.call(arguments,2);return function(){return t.apply(e,l.length?l.concat(o.call(arguments)):arguments)}}var c=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function m(t,e,o){var l,d,g,x;return x=function(){l=!1,d&&(g.apply(o,d),d=!1)},g=function(){l?d=arguments:(t.apply(o,arguments),setTimeout(x,e),l=!0)},g}function p(t,e,o){var l=e[1],d=e[0],g=l-d;return t===l&&o?t:((t-d)%g+g)%g+d}function _(){return!1}function v(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w(t){return y(t).split(/\s+/)}function P(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function k(t,e,o){var l=[];for(var d in t)l.push(encodeURIComponent(o?d.toUpperCase():d)+"="+encodeURIComponent(t[d]));return(!e||e.indexOf("?")===-1?"?":"&")+l.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function O(t,e){return t.replace(C,function(o,l){var d=e[l];if(d===void 0)throw new Error("No value provided for variable "+o);return typeof d=="function"&&(d=d(e)),d})}var E=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function V(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var $=0;function j(t){var e=+new Date,o=Math.max(0,16-(e-$));return $=e+o,window.setTimeout(t,o)}var nt=window.requestAnimationFrame||F("RequestAnimationFrame")||j,ft=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function st(t,e,o){if(o&&nt===j)t.call(e);else return nt.call(window,u(t,e))}function gt(t){t&&ft.call(window,t)}var nn={__proto__:null,extend:h,create:r,bind:u,get lastId(){return c},stamp:f,throttle:m,wrapNum:p,falseFn:_,formatNum:v,trim:y,splitWords:w,setOptions:P,getParamString:k,template:O,isArray:E,indexOf:V,emptyImageUrl:I,requestFn:nt,cancelFn:ft,requestAnimFrame:st,cancelAnimFrame:gt};function Tt(){}Tt.extend=function(t){var e=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,l=r(o);l.constructor=e,e.prototype=l;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(e[d]=this[d]);return t.statics&&h(e,t.statics),t.includes&&(to(t.includes),h.apply(null,[l].concat(t.includes))),h(l,t),delete l.statics,delete l.includes,l.options&&(l.options=o.options?r(o.options):{},h(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,x=l._initHooks.length;g<x;g++)l._initHooks[g].call(this)}},e},Tt.include=function(t){var e=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},Tt.mergeOptions=function(t){return h(this.prototype.options,t),this},Tt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function to(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=E(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xt={on:function(t,e,o){if(typeof t=="object")for(var l in t)this._on(l,t[l],e);else{t=w(t);for(var d=0,g=t.length;d<g;d++)this._on(t[d],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],e);else{t=w(t);for(var d=arguments.length===1,g=0,x=t.length;g<x;g++)d?this._off(t[g]):this._off(t[g],e,o)}return this},_on:function(t,e,o,l){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var d={fn:e,ctx:o};l&&(d.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(d)}},_off:function(t,e,o){var l,d,g;if(this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(d=0,g=l.length;d<g;d++)l[d].fn=_;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var x=this._listens(t,e,o);if(x!==!1){var b=l[x];this._firingCount&&(b.fn=_,this._events[t]=l=l.slice()),l.splice(x,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var l=h({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var d=this._events[t];if(d){this._firingCount=this._firingCount+1||1;for(var g=0,x=d.length;g<x;g++){var b=d[g],T=b.fn;b.once&&this.off(t,T,b.ctx),T.call(b.ctx||this,l)}this._firingCount--}}return o&&this._propagateEvent(l),this},listens:function(t,e,o,l){typeof t!="string"&&console.warn('"string" type argument expected');var d=e;typeof e!="function"&&(l=!!e,d=void 0,o=void 0);var g=this._events&&this._events[t];if(g&&g.length&&this._listens(t,d,o)!==!1)return!0;if(l){for(var x in this._eventParents)if(this._eventParents[x].listens(t,e,o,l))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var l=this._events[t]||[];if(!e)return!!l.length;o===this&&(o=void 0);for(var d=0,g=l.length;d<g;d++)if(l[d].fn===e&&l[d].ctx===o)return d;return!1},once:function(t,e,o){if(typeof t=="object")for(var l in t)this._on(l,t[l],e,!0);else{t=w(t);for(var d=0,g=t.length;d<g;d++)this._on(t[d],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};xt.addEventListener=xt.on,xt.removeEventListener=xt.clearAllEventListeners=xt.off,xt.addOneTimeEventListener=xt.once,xt.fireEvent=xt.fire,xt.hasEventListeners=xt.listens;var ot=Tt.extend(xt);function B(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var de=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(t){t=N(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=N(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function N(t,e,o){return t instanceof B?t:E(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,o)}function J(t,e){if(t)for(var o=e?[t,e]:t,l=0,d=o.length;l<d;l++)this.extend(o[l])}J.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof B||typeof t[0]=="number"||"x"in t)e=o=N(t);else if(t=wt(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof B?t=N(t):t=wt(t),t instanceof J?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=wt(t);var e=this.min,o=this.max,l=t.min,d=t.max,g=d.x>=e.x&&l.x<=o.x,x=d.y>=e.y&&l.y<=o.y;return g&&x},overlaps:function(t){t=wt(t);var e=this.min,o=this.max,l=t.min,d=t.max,g=d.x>e.x&&l.x<o.x,x=d.y>e.y&&l.y<o.y;return g&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,l=Math.abs(e.x-o.x)*t,d=Math.abs(e.y-o.y)*t;return wt(N(e.x-l,e.y-d),N(o.x+l,o.y+d))},equals:function(t){return t?(t=wt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function wt(t,e){return!t||t instanceof J?t:new J(t,e)}function Lt(t,e){if(t)for(var o=e?[t,e]:t,l=0,d=o.length;l<d;l++)this.extend(o[l])}Lt.prototype={extend:function(t){var e=this._southWest,o=this._northEast,l,d;if(t instanceof Y)l=t,d=t;else if(t instanceof Lt){if(l=t._southWest,d=t._northEast,!l||!d)return this}else return t?this.extend(W(t)||ut(t)):this;return!e&&!o?(this._southWest=new Y(l.lat,l.lng),this._northEast=new Y(d.lat,d.lng)):(e.lat=Math.min(l.lat,e.lat),e.lng=Math.min(l.lng,e.lng),o.lat=Math.max(d.lat,o.lat),o.lng=Math.max(d.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,l=Math.abs(e.lat-o.lat)*t,d=Math.abs(e.lng-o.lng)*t;return new Lt(new Y(e.lat-l,e.lng-d),new Y(o.lat+l,o.lng+d))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Y||"lat"in t?t=W(t):t=ut(t);var e=this._southWest,o=this._northEast,l,d;return t instanceof Lt?(l=t.getSouthWest(),d=t.getNorthEast()):l=d=t,l.lat>=e.lat&&d.lat<=o.lat&&l.lng>=e.lng&&d.lng<=o.lng},intersects:function(t){t=ut(t);var e=this._southWest,o=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),g=d.lat>=e.lat&&l.lat<=o.lat,x=d.lng>=e.lng&&l.lng<=o.lng;return g&&x},overlaps:function(t){t=ut(t);var e=this._southWest,o=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),g=d.lat>e.lat&&l.lat<o.lat,x=d.lng>e.lng&&l.lng<o.lng;return g&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ut(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(t,e){return t instanceof Lt?t:new Lt(t,e)}function Y(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}Y.prototype={equals:function(t,e){if(!t)return!1;t=W(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return Yt.distance(this,W(t))},wrap:function(){return Yt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return ut([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function W(t,e,o){return t instanceof Y?t:E(t)&&typeof t[0]!="object"?t.length===3?new Y(t[0],t[1],t[2]):t.length===2?new Y(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Y(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new Y(t,e,o)}var Ut={latLngToPoint:function(t,e){var o=this.projection.project(t),l=this.scale(e);return this.transformation._transform(o,l)},pointToLatLng:function(t,e){var o=this.scale(e),l=this.transformation.untransform(t,o);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),l=this.transformation.transform(e.min,o),d=this.transformation.transform(e.max,o);return new J(l,d)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?p(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?p(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new Y(o,e,l)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),l=e.lat-o.lat,d=e.lng-o.lng;if(l===0&&d===0)return t;var g=t.getSouthWest(),x=t.getNorthEast(),b=new Y(g.lat-l,g.lng-d),T=new Y(x.lat-l,x.lng-d);return new Lt(b,T)}},Yt=h({},Ut,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,l=t.lat*o,d=e.lat*o,g=Math.sin((e.lat-t.lat)*o/2),x=Math.sin((e.lng-t.lng)*o/2),b=g*g+Math.cos(l)*Math.cos(d)*x*x,T=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*T}}),eo=6378137,sn={R:eo,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,l=Math.max(Math.min(o,t.lat),-o),d=Math.sin(l*e);return new B(this.R*t.lng*e,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(t){var e=180/Math.PI;return new Y((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=eo*Math.PI;return new J([-t,-t],[t,t])}()};function on(t,e,o,l){if(E(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=l}on.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Be(t,e,o,l){return new on(t,e,o,l)}var rn=h({},Yt,{code:"EPSG:3857",projection:sn,transformation:function(){var t=.5/(Math.PI*sn.R);return Be(t,.5,-t,.5)}()}),gl=h({},rn,{code:"EPSG:900913"});function io(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function no(t,e){var o="",l,d,g,x,b,T;for(l=0,g=t.length;l<g;l++){for(b=t[l],d=0,x=b.length;d<x;d++)T=b[d],o+=(d?"L":"M")+T.x+" "+T.y;o+=e?D.svg?"z":"x":""}return o||"M0 0"}var an=document.documentElement.style,yi="ActiveXObject"in window,vl=yi&&!document.addEventListener,so="msLaunchUri"in navigator&&!("documentMode"in document),un=Dt("webkit"),oo=Dt("android"),ro=Dt("android 2")||Dt("android 3"),yl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xl=oo&&Dt("Google")&&yl<537&&!("AudioNode"in window),ln=!!window.opera,ao=!so&&Dt("chrome"),uo=Dt("gecko")&&!un&&!ln&&!yi,wl=!ao&&Dt("safari"),lo=Dt("phantom"),ho="OTransition"in an,Ll=navigator.platform.indexOf("Win")===0,co=yi&&"transition"in an,hn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ro,fo="MozPerspective"in an,Pl=!window.L_DISABLE_3D&&(co||hn||fo)&&!ho&&!lo,ze=typeof orientation<"u"||Dt("mobile"),bl=ze&&un,Tl=ze&&hn,mo=!window.PointerEvent&&window.MSPointerEvent,po=!!(window.PointerEvent||mo),_o="ontouchstart"in window||!!window.TouchEvent,Cl=!window.L_NO_TOUCH&&(_o||po),Sl=ze&&ln,Ml=ze&&uo,kl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Al=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,e),window.removeEventListener("testPassiveEventSupport",_,e)}catch{}return t}(),El=function(){return!!document.createElement("canvas").getContext}(),cn=!!(document.createElementNS&&io("svg").createSVGRect),Ol=!!cn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Il=!cn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Rl=navigator.platform.indexOf("Mac")===0,Dl=navigator.platform.indexOf("Linux")===0;function Dt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var D={ie:yi,ielt9:vl,edge:so,webkit:un,android:oo,android23:ro,androidStock:xl,opera:ln,chrome:ao,gecko:uo,safari:wl,phantom:lo,opera12:ho,win:Ll,ie3d:co,webkit3d:hn,gecko3d:fo,any3d:Pl,mobile:ze,mobileWebkit:bl,mobileWebkit3d:Tl,msPointer:mo,pointer:po,touch:Cl,touchNative:_o,mobileOpera:Sl,mobileGecko:Ml,retina:kl,passiveEvents:Al,canvas:El,svg:cn,vml:Il,inlineSvg:Ol,mac:Rl,linux:Dl},go=D.msPointer?"MSPointerDown":"pointerdown",vo=D.msPointer?"MSPointerMove":"pointermove",yo=D.msPointer?"MSPointerUp":"pointerup",xo=D.msPointer?"MSPointerCancel":"pointercancel",fn={touchstart:go,touchmove:vo,touchend:yo,touchcancel:xo},wo={touchstart:Fl,touchmove:xi,touchend:xi,touchcancel:xi},me={},Lo=!1;function Bl(t,e,o){return e==="touchstart"&&Zl(),wo[e]?(o=wo[e].bind(this,o),t.addEventListener(fn[e],o,!1),o):(console.warn("wrong event specified:",e),_)}function zl(t,e,o){if(!fn[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(fn[e],o,!1)}function Vl(t){me[t.pointerId]=t}function Nl(t){me[t.pointerId]&&(me[t.pointerId]=t)}function Po(t){delete me[t.pointerId]}function Zl(){Lo||(document.addEventListener(go,Vl,!0),document.addEventListener(vo,Nl,!0),document.addEventListener(yo,Po,!0),document.addEventListener(xo,Po,!0),Lo=!0)}function xi(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in me)e.touches.push(me[o]);e.changedTouches=[e],t(e)}}function Fl(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&dt(e),xi(t,e)}function jl(t){var e={},o,l;for(l in t)o=t[l],e[l]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ul=200;function Hl(t,e){t.addEventListener("dblclick",e);var o=0,l;function d(g){if(g.detail!==1){l=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var x=Mo(g);if(!(x.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!x.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var b=Date.now();b-o<=Ul?(l++,l===2&&e(jl(g))):l=1,o=b}}}return t.addEventListener("click",d),{dblclick:e,simDblclick:d}}function Gl(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var dn=Pi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ve=Pi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bo=Ve==="webkitTransition"||Ve==="OTransition"?Ve+"End":"transitionend";function To(t){return typeof t=="string"?document.getElementById(t):t}function Ne(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);o=l?l[e]:null}return o==="auto"?null:o}function q(t,e,o){var l=document.createElement(t);return l.className=e||"",o&&o.appendChild(l),l}function Q(t){var e=t.parentNode;e&&e.removeChild(t)}function wi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function _e(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function mn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=Li(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function H(t,e){if(t.classList!==void 0)for(var o=w(e),l=0,d=o.length;l<d;l++)t.classList.add(o[l]);else if(!mn(t,e)){var g=Li(t);pn(t,(g?g+" ":"")+e)}}function rt(t,e){t.classList!==void 0?t.classList.remove(e):pn(t,y((" "+Li(t)+" ").replace(" "+e+" "," ")))}function pn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Li(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ct(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Wl(t,e)}function Wl(t,e){var o=!1,l="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(l)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+l+"(opacity="+e+")"}function Pi(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function ne(t,e,o){var l=e||new B(0,0);t.style[dn]=(D.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(o?" scale("+o+")":"")}function lt(t,e){t._leaflet_pos=e,D.any3d?ne(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function se(t){return t._leaflet_pos||new B(0,0)}var Ze,Fe,_n;if("onselectstart"in document)Ze=function(){U(window,"selectstart",dt)},Fe=function(){X(window,"selectstart",dt)};else{var je=Pi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ze=function(){if(je){var t=document.documentElement.style;_n=t[je],t[je]="none"}},Fe=function(){je&&(document.documentElement.style[je]=_n,_n=void 0)}}function gn(){U(window,"dragstart",dt)}function vn(){X(window,"dragstart",dt)}var bi,yn;function xn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Ti(),bi=t,yn=t.style.outlineStyle,t.style.outlineStyle="none",U(window,"keydown",Ti))}function Ti(){bi&&(bi.style.outlineStyle=yn,bi=void 0,yn=void 0,X(window,"keydown",Ti))}function Co(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function wn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Kl={__proto__:null,TRANSFORM:dn,TRANSITION:Ve,TRANSITION_END:bo,get:To,getStyle:Ne,create:q,remove:Q,empty:wi,toFront:pe,toBack:_e,hasClass:mn,addClass:H,removeClass:rt,setClass:pn,getClass:Li,setOpacity:Ct,testProp:Pi,setTransform:ne,setPosition:lt,getPosition:se,get disableTextSelection(){return Ze},get enableTextSelection(){return Fe},disableImageDrag:gn,enableImageDrag:vn,preventOutline:xn,restoreOutline:Ti,getSizedParentNode:Co,getScale:wn};function U(t,e,o,l){if(e&&typeof e=="object")for(var d in e)Pn(t,d,e[d],o);else{e=w(e);for(var g=0,x=e.length;g<x;g++)Pn(t,e[g],o,l)}return this}var Bt="_leaflet_events";function X(t,e,o,l){if(arguments.length===1)So(t),delete t[Bt];else if(e&&typeof e=="object")for(var d in e)bn(t,d,e[d],o);else if(e=w(e),arguments.length===2)So(t,function(b){return V(e,b)!==-1});else for(var g=0,x=e.length;g<x;g++)bn(t,e[g],o,l);return this}function So(t,e){for(var o in t[Bt]){var l=o.split(/\d/)[0];(!e||e(l))&&bn(t,l,null,null,o)}}var Ln={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pn(t,e,o,l){var d=e+f(o)+(l?"_"+f(l):"");if(t[Bt]&&t[Bt][d])return this;var g=function(b){return o.call(l||t,b||window.event)},x=g;!D.touchNative&&D.pointer&&e.indexOf("touch")===0?g=Bl(t,e,g):D.touch&&e==="dblclick"?g=Hl(t,g):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Ln[e]||e,g,D.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(g=function(b){b=b||window.event,Cn(t,b)&&x(b)},t.addEventListener(Ln[e],g,!1)):t.addEventListener(e,x,!1):t.attachEvent("on"+e,g),t[Bt]=t[Bt]||{},t[Bt][d]=g}function bn(t,e,o,l,d){d=d||e+f(o)+(l?"_"+f(l):"");var g=t[Bt]&&t[Bt][d];if(!g)return this;!D.touchNative&&D.pointer&&e.indexOf("touch")===0?zl(t,e,g):D.touch&&e==="dblclick"?Gl(t,g):"removeEventListener"in t?t.removeEventListener(Ln[e]||e,g,!1):t.detachEvent("on"+e,g),t[Bt][d]=null}function oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Tn(t){return Pn(t,"wheel",oe),this}function Ue(t){return U(t,"mousedown touchstart dblclick contextmenu",oe),t._leaflet_disable_click=!0,this}function dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function re(t){return dt(t),oe(t),this}function Mo(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function ko(t,e){if(!e)return new B(t.clientX,t.clientY);var o=wn(e),l=o.boundingClientRect;return new B((t.clientX-l.left)/o.x-e.clientLeft,(t.clientY-l.top)/o.y-e.clientTop)}var ql=D.linux&&D.chrome?window.devicePixelRatio:D.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ao(t){return D.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ql:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Cn(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var $l={__proto__:null,on:U,off:X,stopPropagation:oe,disableScrollPropagation:Tn,disableClickPropagation:Ue,preventDefault:dt,stop:re,getPropagationPath:Mo,getMousePosition:ko,getWheelDelta:Ao,isExternalTarget:Cn,addListener:U,removeListener:X},Eo=ot.extend({run:function(t,e,o,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=se(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=st(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),lt(this._el,o),this.fire("step")},_complete:function(){gt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),K=ot.extend({options:{crs:rn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=P(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ve&&D.any3d&&!D.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),U(this._proxy,bo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=h({animate:o.animate},o.zoom),o.pan=h({animate:o.animate,duration:o.duration},o.pan));var l=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(D.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(D.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var l=this.getZoomScale(e),d=this.getSize().divideBy(2),g=t instanceof B?t:this.latLngToContainerPoint(t),x=g.subtract(d).multiplyBy(1-1/l),b=this.containerPointToLatLng(d.add(x));return this.setView(b,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ut(t);var o=N(e.paddingTopLeft||e.padding||[0,0]),l=N(e.paddingBottomRight||e.padding||[0,0]),d=this.getBoundsZoom(t,!1,o.add(l));if(d=typeof e.maxZoom=="number"?Math.min(e.maxZoom,d):d,d===1/0)return{center:t.getCenter(),zoom:d};var g=l.subtract(o).divideBy(2),x=this.project(t.getSouthWest(),d),b=this.project(t.getNorthEast(),d),T=this.unproject(x.add(b).divideBy(2).add(g),d);return{center:T,zoom:d}},fitBounds:function(t,e){if(t=ut(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=N(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Eo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){H(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!D.any3d)return this.setView(t,e,o);this._stop();var l=this.project(this.getCenter()),d=this.project(t),g=this.getSize(),x=this._zoom;t=W(t),e=e===void 0?x:e;var b=Math.max(g.x,g.y),T=b*this.getZoomScale(x,e),A=d.distanceTo(l)||1,R=1.42,z=R*R;function G(ht){var zi=ht?-1:1,zh=ht?T:b,Vh=T*T-b*b+zi*z*z*A*A,Nh=2*zh*z*A,zn=Vh/Nh,cr=Math.sqrt(zn*zn+1)-zn,Zh=cr<1e-9?-18:Math.log(cr);return Zh}function vt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function ct(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Mt(ht){return vt(ht)/ct(ht)}var Pt=G(0);function Le(ht){return b*(ct(Pt)/ct(Pt+R*ht))}function Ih(ht){return b*(ct(Pt)*Mt(Pt+R*ht)-vt(Pt))/z}function Rh(ht){return 1-Math.pow(1-ht,1.5)}var Dh=Date.now(),lr=(G(1)-Pt)/R,Bh=o.duration?1e3*o.duration:1e3*lr*.8;function hr(){var ht=(Date.now()-Dh)/Bh,zi=Rh(ht)*lr;ht<=1?(this._flyToFrame=st(hr,this),this._move(this.unproject(l.add(d.subtract(l).multiplyBy(Ih(zi)/A)),x),this.getScaleZoom(b/Le(zi),x),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),hr.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=ut(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),l=this._limitCenter(o,this._zoom,ut(t));return o.equals(l)||this.panTo(l,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=N(e.paddingTopLeft||e.padding||[0,0]),l=N(e.paddingBottomRight||e.padding||[0,0]),d=this.project(this.getCenter()),g=this.project(t),x=this.getPixelBounds(),b=wt([x.min.add(o),x.max.subtract(l)]),T=b.getSize();if(!b.contains(g)){this._enforcingBounds=!0;var A=g.subtract(b.getCenter()),R=b.extend(g).getSize().subtract(T);d.x+=A.x<0?-R.x:R.x,d.y+=A.y<0?-R.y:R.y,this.panTo(this.unproject(d),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),l=e.divideBy(2).round(),d=o.divideBy(2).round(),g=l.subtract(d);return!g.x&&!g.y?this:(t.animate&&t.pan?this.panBy(g):(t.pan&&this._rawPanBy(g),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=u(this._handleGeolocationResponse,this),o=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,l=new Y(e,o),d=l.toBounds(t.coords.accuracy*2),g=this._locateOptions;if(g.setView){var x=this.getBoundsZoom(d);this.setView(l,g.maxZoom?Math.min(x,g.maxZoom):x)}var b={latlng:l,bounds:d,timestamp:t.timestamp};for(var T in t.coords)typeof t.coords[T]=="number"&&(b[T]=t.coords[T]);this.fire("locationfound",b)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(gt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Q(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=q("div",o,e||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Lt(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=ut(t),o=N(o||[0,0]);var l=this.getZoom()||0,d=this.getMinZoom(),g=this.getMaxZoom(),x=t.getNorthWest(),b=t.getSouthEast(),T=this.getSize().subtract(o),A=wt(this.project(b,l),this.project(x,l)).getSize(),R=D.any3d?this.options.zoomSnap:1,z=T.x/A.x,G=T.y/A.y,vt=e?Math.max(z,G):Math.min(z,G);return l=this.getScaleZoom(vt,l),R&&(l=Math.round(l/(R/100))*(R/100),l=e?Math.ceil(l/R)*R:Math.floor(l/R)*R),Math.max(d,Math.min(g,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new J(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var l=o.zoom(t*o.scale(e));return isNaN(l)?1/0:l},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(N(t),e)},layerPointToLatLng:function(t){var e=N(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(W(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ut(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return ko(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=To(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");U(e,"scroll",this._onScroll,this),this._containerId=f(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&D.any3d,H(t,"leaflet-container"+(D.touch?" leaflet-touch":"")+(D.retina?" leaflet-retina":"")+(D.ielt9?" leaflet-oldie":"")+(D.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ne(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),lt(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(H(t.markerPane,"leaflet-zoom-hide"),H(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){lt(this._mapPane,new B(0,0));var l=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var d=this._zoom!==e;this._moveStart(d,o)._move(t,e)._moveEnd(d),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,l){e===void 0&&(e=this._zoom);var d=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?o&&o.pinch&&this.fire("zoom",o):((d||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return gt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){lt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var e=t?X:U;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),D.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){gt(this._resizeRequest),this._resizeRequest=st(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],l,d=e==="mouseout"||e==="mouseover",g=t.target||t.srcElement,x=!1;g;){if(l=this._targets[f(g)],l&&(e==="click"||e==="preclick")&&this._draggableMoved(l)){x=!0;break}if(l&&l.listens(e,!0)&&(d&&!Cn(g,t)||(o.push(l),d))||g===this._container)break;g=g.parentNode}return!o.length&&!x&&!d&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&xn(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var l=h({},t);l.type="preclick",this._fireDOMEvent(l,l.type,o)}var d=this._findEventTargets(t,e);if(o){for(var g=[],x=0;x<o.length;x++)o[x].listens(e,!0)&&g.push(o[x]);d=g.concat(d)}if(d.length){e==="contextmenu"&&dt(t);var b=d[0],T={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var A=b.getLatLng&&(!b._radius||b._radius<=10);T.containerPoint=A?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(t),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=A?b.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(x=0;x<d.length;x++)if(d[x].fire(e,T,!0),T.originalEvent._stopped||d[x].options.bubblingMouseEvents===!1&&V(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return se(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var l=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,e,o){var l=this._getNewPixelOrigin(o,e);return wt([this.project(t.getSouthWest(),e)._subtract(l),this.project(t.getNorthWest(),e)._subtract(l),this.project(t.getSouthEast(),e)._subtract(l),this.project(t.getNorthEast(),e)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var l=this.project(t,e),d=this.getSize().divideBy(2),g=new J(l.subtract(d),l.add(d)),x=this._getBoundsOffset(g,o,e);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?t:this.unproject(l.add(x),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),l=new J(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(l,e))},_getBoundsOffset:function(t,e,o){var l=wt(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),d=l.min.subtract(t.min),g=l.max.subtract(t.max),x=this._rebound(d.x,-g.x),b=this._rebound(d.y,-g.y);return new B(x,b)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),l=D.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=q("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=dn,l=this._proxy.style[o];ne(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),l===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ne(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(e),d=this._getCenterOffset(t)._divideBy(1-1/l);return o.animate!==!0&&!this.getSize().contains(d)?!1:(st(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,l){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,H(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yl(t,e){return new K(t,e)}var Ot=Tt.extend({options:{position:"topright"},initialize:function(t){P(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),l=t._controlCorners[o];return H(e,"leaflet-control"),o.indexOf("bottom")!==-1?l.insertBefore(e,l.firstChild):l.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),He=function(t){return new Ot(t)};K.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=q("div",e+"control-container",this._container);function l(d,g){var x=e+d+" "+e+g;t[d+g]=q("div",x,o)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Q(this._controlCorners[t]);Q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Oo=Ot.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,l){return o<l?-1:l<o?1:0}},initialize:function(t,e,o){P(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in e)this._addLayer(e[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ot.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(f(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){H(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(H(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=q("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ue(e),Tn(e);var l=this._section=q("section",t+"-list");o&&(this._map.on("click",this.collapse,this),U(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var d=this._layersLink=q("a",t+"-toggle",e);d.href="#",d.title="Layers",d.setAttribute("role","button"),U(d,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){dt(g),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=q("div",t+"-base",l),this._separator=q("div",t+"-separator",l),this._overlaysList=q("div",t+"-overlays",l),e.appendChild(l)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&f(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(u(function(l,d){return this.options.sortFunction(l.layer,d.layer,l.name,d.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wi(this._baseLayersList),wi(this._overlaysList),this._layerControlInputs=[];var t,e,o,l,d=0;for(o=0;o<this._layers.length;o++)l=this._layers[o],this._addItem(l),e=e||l.overlay,t=t||!l.overlay,d+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&d>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(f(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=o,l.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=o):l=this._createRadioElement("leaflet-base-layers_"+f(this),o),this._layerControlInputs.push(l),l.layerId=f(t.layer),U(l,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+t.name;var g=document.createElement("span");e.appendChild(g),g.appendChild(l),g.appendChild(d);var x=t.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,l=[],d=[];this._handlingClick=!0;for(var g=t.length-1;g>=0;g--)e=t[g],o=this._getLayer(e.layerId).layer,e.checked?l.push(o):e.checked||d.push(o);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])&&this._map.removeLayer(d[g]);for(g=0;g<l.length;g++)this._map.hasLayer(l[g])||this._map.addLayer(l[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,l=this._map.getZoom(),d=t.length-1;d>=0;d--)e=t[d],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&l<o.options.minZoom||o.options.maxZoom!==void 0&&l>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,U(t,"click",dt),this.expand();var e=this;setTimeout(function(){X(t,"click",dt),e._preventClick=!1})}}),Xl=function(t,e,o){return new Oo(t,e,o)},Sn=Ot.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=q("div",e+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,l,d){var g=q("a",o,l);return g.innerHTML=t,g.href="#",g.title=e,g.setAttribute("role","button"),g.setAttribute("aria-label",e),Ue(g),U(g,"click",re),U(g,"click",d,this),U(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";rt(this._zoomInButton,e),rt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(H(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(H(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});K.mergeOptions({zoomControl:!0}),K.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sn,this.addControl(this.zoomControl))});var Jl=function(t){return new Sn(t)},Io=Ot.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=q("div",e),l=this.options;return this._addScales(l,e+"-line",o),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=q("div",e,o)),t.imperial&&(this._iScale=q("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,l,d;e>5280?(o=e/5280,l=this._getRoundNum(o),this._updateScale(this._iScale,l+" mi",l/o)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),Ql=function(t){return new Io(t)},th='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mn=Ot.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(D.inlineSvg?th+" ":"")+"Leaflet</a>"},initialize:function(t){P(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=q("div","leaflet-control-attribution"),Ue(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});K.mergeOptions({attributionControl:!0}),K.addInitHook(function(){this.options.attributionControl&&new Mn().addTo(this)});var eh=function(t){return new Mn(t)};Ot.Layers=Oo,Ot.Zoom=Sn,Ot.Scale=Io,Ot.Attribution=Mn,He.layers=Xl,He.zoom=Jl,He.scale=Ql,He.attribution=eh;var zt=Tt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zt.addTo=function(t,e){return t.addHandler(e,this),this};var ih={Events:xt},Ro=D.touch?"touchstart mousedown":"mousedown",Xt=ot.extend({options:{clickTolerance:3},initialize:function(t,e,o,l){P(this,l),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||(U(this._dragStartTarget,Ro,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xt._dragging===this&&this.finishDrag(!0),X(this._dragStartTarget,Ro,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!mn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Xt._dragging===this&&this.finishDrag();return}if(!(Xt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Xt._dragging=this,this._preventOutline&&xn(this._element),gn(),Ze(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=Co(this._element);this._startPoint=new B(e.clientX,e.clientY),this._startPos=se(this._element),this._parentScale=wn(o);var l=t.type==="mousedown";U(document,l?"mousemove":"touchmove",this._onMove,this),U(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new B(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,H(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),H(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),lt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),X(document,"mousemove touchmove",this._onMove,this),X(document,"mouseup touchend touchcancel",this._onUp,this),vn(),Fe();var e=this._moved&&this._moving;this._moving=!1,Xt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Do(t,e,o){var l,d=[1,4,2,8],g,x,b,T,A,R,z,G;for(g=0,R=t.length;g<R;g++)t[g]._code=ae(t[g],e);for(b=0;b<4;b++){for(z=d[b],l=[],g=0,R=t.length,x=R-1;g<R;x=g++)T=t[g],A=t[x],T._code&z?A._code&z||(G=Ci(A,T,z,e,o),G._code=ae(G,e),l.push(G)):(A._code&z&&(G=Ci(A,T,z,e,o),G._code=ae(G,e),l.push(G)),l.push(T));t=l}return t}function Bo(t,e){var o,l,d,g,x,b,T,A,R;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var z=W([0,0]),G=ut(t),vt=G.getNorthWest().distanceTo(G.getSouthWest())*G.getNorthEast().distanceTo(G.getNorthWest());vt<1700&&(z=kn(t));var ct=t.length,Mt=[];for(o=0;o<ct;o++){var Pt=W(t[o]);Mt.push(e.project(W([Pt.lat-z.lat,Pt.lng-z.lng])))}for(b=T=A=0,o=0,l=ct-1;o<ct;l=o++)d=Mt[o],g=Mt[l],x=d.y*g.x-g.y*d.x,T+=(d.x+g.x)*x,A+=(d.y+g.y)*x,b+=x*3;b===0?R=Mt[0]:R=[T/b,A/b];var Le=e.unproject(N(R));return W([Le.lat+z.lat,Le.lng+z.lng])}function kn(t){for(var e=0,o=0,l=0,d=0;d<t.length;d++){var g=W(t[d]);e+=g.lat,o+=g.lng,l++}return W([e/l,o/l])}var nh={__proto__:null,clipPolygon:Do,polygonCenter:Bo,centroid:kn};function zo(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=rh(t,o),t=oh(t,o),t}function Vo(t,e,o){return Math.sqrt(Ge(t,e,o,!0))}function sh(t,e,o){return Ge(t,e,o)}function oh(t,e){var o=t.length,l=typeof Uint8Array<"u"?Uint8Array:Array,d=new l(o);d[0]=d[o-1]=1,An(t,d,e,0,o-1);var g,x=[];for(g=0;g<o;g++)d[g]&&x.push(t[g]);return x}function An(t,e,o,l,d){var g=0,x,b,T;for(b=l+1;b<=d-1;b++)T=Ge(t[b],t[l],t[d],!0),T>g&&(x=b,g=T);g>o&&(e[x]=1,An(t,e,o,l,x),An(t,e,o,x,d))}function rh(t,e){for(var o=[t[0]],l=1,d=0,g=t.length;l<g;l++)ah(t[l],t[d])>e&&(o.push(t[l]),d=l);return d<g-1&&o.push(t[g-1]),o}var No;function Zo(t,e,o,l,d){var g=l?No:ae(t,o),x=ae(e,o),b,T,A;for(No=x;;){if(!(g|x))return[t,e];if(g&x)return!1;b=g||x,T=Ci(t,e,b,o,d),A=ae(T,o),b===g?(t=T,g=A):(e=T,x=A)}}function Ci(t,e,o,l,d){var g=e.x-t.x,x=e.y-t.y,b=l.min,T=l.max,A,R;return o&8?(A=t.x+g*(T.y-t.y)/x,R=T.y):o&4?(A=t.x+g*(b.y-t.y)/x,R=b.y):o&2?(A=T.x,R=t.y+x*(T.x-t.x)/g):o&1&&(A=b.x,R=t.y+x*(b.x-t.x)/g),new B(A,R,d)}function ae(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function ah(t,e){var o=e.x-t.x,l=e.y-t.y;return o*o+l*l}function Ge(t,e,o,l){var d=e.x,g=e.y,x=o.x-d,b=o.y-g,T=x*x+b*b,A;return T>0&&(A=((t.x-d)*x+(t.y-g)*b)/T,A>1?(d=o.x,g=o.y):A>0&&(d+=x*A,g+=b*A)),x=t.x-d,b=t.y-g,l?x*x+b*b:new B(d,g)}function St(t){return!E(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Fo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function jo(t,e){var o,l,d,g,x,b,T,A;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var R=W([0,0]),z=ut(t),G=z.getNorthWest().distanceTo(z.getSouthWest())*z.getNorthEast().distanceTo(z.getNorthWest());G<1700&&(R=kn(t));var vt=t.length,ct=[];for(o=0;o<vt;o++){var Mt=W(t[o]);ct.push(e.project(W([Mt.lat-R.lat,Mt.lng-R.lng])))}for(o=0,l=0;o<vt-1;o++)l+=ct[o].distanceTo(ct[o+1])/2;if(l===0)A=ct[0];else for(o=0,g=0;o<vt-1;o++)if(x=ct[o],b=ct[o+1],d=x.distanceTo(b),g+=d,g>l){T=(g-l)/d,A=[b.x-T*(b.x-x.x),b.y-T*(b.y-x.y)];break}var Pt=e.unproject(N(A));return W([Pt.lat+R.lat,Pt.lng+R.lng])}var uh={__proto__:null,simplify:zo,pointToSegmentDistance:Vo,closestPointOnSegment:sh,clipSegment:Zo,_getEdgeIntersection:Ci,_getBitCode:ae,_sqClosestPointOnSegment:Ge,isFlat:St,_flat:Fo,polylineCenter:jo},En={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new Y(t.y,t.x)},bounds:new J([-180,-90],[180,90])},On={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,l=t.lat*e,d=this.R_MINOR/o,g=Math.sqrt(1-d*d),x=g*Math.sin(l),b=Math.tan(Math.PI/4-l/2)/Math.pow((1-x)/(1+x),g/2);return l=-o*Math.log(Math.max(b,1e-10)),new B(t.lng*e*o,l)},unproject:function(t){for(var e=180/Math.PI,o=this.R,l=this.R_MINOR/o,d=Math.sqrt(1-l*l),g=Math.exp(-t.y/o),x=Math.PI/2-2*Math.atan(g),b=0,T=.1,A;b<15&&Math.abs(T)>1e-7;b++)A=d*Math.sin(x),A=Math.pow((1-A)/(1+A),d/2),T=Math.PI/2-2*Math.atan(g*A)-x,x+=T;return new Y(x*e,t.x*e/o)}},lh={__proto__:null,LonLat:En,Mercator:On,SphericalMercator:sn},hh=h({},Yt,{code:"EPSG:3395",projection:On,transformation:function(){var t=.5/(Math.PI*On.R);return Be(t,.5,-t,.5)}()}),Uo=h({},Yt,{code:"EPSG:4326",projection:En,transformation:Be(1/180,1,-1/180,.5)}),ch=h({},Ut,{projection:En,transformation:Be(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,l=e.lat-t.lat;return Math.sqrt(o*o+l*l)},infinite:!0});Ut.Earth=Yt,Ut.EPSG3395=hh,Ut.EPSG3857=rn,Ut.EPSG900913=gl,Ut.EPSG4326=Uo,Ut.Simple=ch;var It=ot.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});K.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=f(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=f(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return f(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?E(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=f(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var l in this._zoomBoundLayers){var d=this._zoomBoundLayers[l].options;t=d.minZoom===void 0?t:Math.min(t,d.minZoom),e=d.maxZoom===void 0?e:Math.max(e,d.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ge=It.extend({initialize:function(t,e){P(this,e),this._layers={};var o,l;if(t)for(o=0,l=t.length;o<l;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,l;for(o in this._layers)l=this._layers[o],l[t]&&l[t].apply(l,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),fh=function(t,e){return new ge(t,e)},Ht=ge.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ge.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ge.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Lt;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),dh=function(t,e){return new Ht(t,e)},ve=Tt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){P(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,e){var o=this.options,l=o[e+"Size"];typeof l=="number"&&(l=[l,l]);var d=N(l),g=N(e==="shadow"&&o.shadowAnchor||o.iconAnchor||d&&d.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),g&&(t.style.marginLeft=-g.x+"px",t.style.marginTop=-g.y+"px"),d&&(t.style.width=d.x+"px",t.style.height=d.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return D.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function mh(t){return new ve(t)}var We=ve.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof We.imagePath!="string"&&(We.imagePath=this._detectIconPath()),(this.options.imagePath||We.imagePath)+ve.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,l,d){var g=l.exec(o);return g&&g[d]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=q("div","leaflet-default-icon-path",document.body),e=Ne(t,"background-image")||Ne(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Ho=zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),H(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,l=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,g=se(e._icon),x=o.getPixelBounds(),b=o.getPixelOrigin(),T=wt(x.min._subtract(b).add(d),x.max._subtract(b).subtract(d));if(!T.contains(g)){var A=N((Math.max(T.max.x,g.x)-T.max.x)/(x.max.x-T.max.x)-(Math.min(T.min.x,g.x)-T.min.x)/(x.min.x-T.min.x),(Math.max(T.max.y,g.y)-T.max.y)/(x.max.y-T.max.y)-(Math.min(T.min.y,g.y)-T.min.y)/(x.min.y-T.min.y)).multiplyBy(l);o.panBy(A,{animate:!1}),this._draggable._newPos._add(A),this._draggable._startPos._add(A),lt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=st(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(gt(this._panRequest),this._panRequest=st(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,l=se(e._icon),d=e._map.layerPointToLatLng(l);o&&lt(o,l),e._latlng=d,t.latlng=d,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){gt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Si=It.extend({options:{icon:new We,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){P(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),l=!1;o!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),H(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&U(o,"focus",this._panOnFocus,this);var d=t.icon.createShadow(this._shadow),g=!1;d!==this._shadow&&(this._removeShadow(),g=!0),d&&(H(d,e),d.alt=""),this._shadow=d,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&g&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&X(this._icon,"focus",this._panOnFocus,this),Q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Q(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&lt(this._icon,t),this._shadow&&lt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(H(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ho)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ho(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ct(this._icon,t),this._shadow&&Ct(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?N(e.iconSize):N(0,0),l=e.iconAnchor?N(e.iconAnchor):N(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:o.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ph(t,e){return new Si(t,e)}var Jt=It.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return P(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Mi=Jt.extend({options:{fill:!0,radius:10},initialize:function(t,e){P(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Jt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),l=[t+o,e+o];this._pxBounds=new J(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _h(t,e){return new Mi(t,e)}var In=Mi.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=h({},o,{radius:e})),P(this,e),this._latlng=W(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Lt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Jt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,l=o.options.crs;if(l.distance===Yt.distance){var d=Math.PI/180,g=this._mRadius/Yt.R/d,x=o.project([e+g,t]),b=o.project([e-g,t]),T=x.add(b).divideBy(2),A=o.unproject(T).lat,R=Math.acos((Math.cos(g*d)-Math.sin(e*d)*Math.sin(A*d))/(Math.cos(e*d)*Math.cos(A*d)))/d;(isNaN(R)||R===0)&&(R=g/Math.cos(Math.PI/180*e)),this._point=T.subtract(o.getPixelOrigin()),this._radius=isNaN(R)?0:T.x-o.project([A,t-R]).x,this._radiusY=T.y-x.y}else{var z=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(z).x}this._updateBounds()}});function gh(t,e,o){return new In(t,e,o)}var Gt=Jt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){P(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,l=Ge,d,g,x=0,b=this._parts.length;x<b;x++)for(var T=this._parts[x],A=1,R=T.length;A<R;A++){d=T[A-1],g=T[A];var z=l(t,d,g,!0);z<e&&(e=z,o=l(t,d,g))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Lt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=St(t),l=0,d=t.length;l<d;l++)o?(e[l]=W(t[l]),this._bounds.extend(e[l])):e[l]=this._convertLatLngs(t[l]);return e},_project:function(){var t=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var l=t[0]instanceof Y,d=t.length,g,x;if(l){for(x=[],g=0;g<d;g++)x[g]=this._map.latLngToLayerPoint(t[g]),o.extend(x[g]);e.push(x)}else for(g=0;g<d;g++)this._projectLatlngs(t[g],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,l,d,g,x,b,T;for(o=0,d=0,g=this._rings.length;o<g;o++)for(T=this._rings[o],l=0,x=T.length;l<x-1;l++)b=Zo(T[l],T[l+1],t,l,!0),b&&(e[d]=e[d]||[],e[d].push(b[0]),(b[1]!==T[l+1]||l===x-2)&&(e[d].push(b[1]),d++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,l=t.length;o<l;o++)t[o]=zo(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,l,d,g,x,b,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,g=this._parts.length;o<g;o++)for(b=this._parts[o],l=0,x=b.length,d=x-1;l<x;d=l++)if(!(!e&&l===0)&&Vo(t,b[d],b[l])<=T)return!0;return!1}});function vh(t,e){return new Gt(t,e)}Gt._flat=Fo;var ye=Gt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Gt.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof Y&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){Gt.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new B(e,e);if(t=new J(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,d=this._rings.length,g;l<d;l++)g=Do(this._rings[l],t,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,l,d,g,x,b,T,A;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(g=0,T=this._parts.length;g<T;g++)for(o=this._parts[g],x=0,A=o.length,b=A-1;x<A;b=x++)l=o[x],d=o[b],l.y>t.y!=d.y>t.y&&t.x<(d.x-l.x)*(t.y-l.y)/(d.y-l.y)+l.x&&(e=!e);return e||Gt.prototype._containsPoint.call(this,t,!0)}});function yh(t,e){return new ye(t,e)}var Wt=Ht.extend({initialize:function(t,e){P(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=E(t)?t:t.features,o,l,d;if(e){for(o=0,l=e.length;o<l;o++)d=e[o],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(g.filter&&!g.filter(t))return this;var x=ki(t,g);return x?(x.feature=Oi(t),x.defaultOptions=x.options,this.resetStyle(x),g.onEachFeature&&g.onEachFeature(t,x),this.addLayer(x)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ki(t,e){var o=t.type==="Feature"?t.geometry:t,l=o?o.coordinates:null,d=[],g=e&&e.pointToLayer,x=e&&e.coordsToLatLng||Rn,b,T,A,R;if(!l&&!o)return null;switch(o.type){case"Point":return b=x(l),Go(g,t,b,e);case"MultiPoint":for(A=0,R=l.length;A<R;A++)b=x(l[A]),d.push(Go(g,t,b,e));return new Ht(d);case"LineString":case"MultiLineString":return T=Ai(l,o.type==="LineString"?0:1,x),new Gt(T,e);case"Polygon":case"MultiPolygon":return T=Ai(l,o.type==="Polygon"?1:2,x),new ye(T,e);case"GeometryCollection":for(A=0,R=o.geometries.length;A<R;A++){var z=ki({geometry:o.geometries[A],type:"Feature",properties:t.properties},e);z&&d.push(z)}return new Ht(d);case"FeatureCollection":for(A=0,R=o.features.length;A<R;A++){var G=ki(o.features[A],e);G&&d.push(G)}return new Ht(d);default:throw new Error("Invalid GeoJSON object.")}}function Go(t,e,o,l){return t?t(e,o):new Si(o,l&&l.markersInheritOptions&&l)}function Rn(t){return new Y(t[1],t[0],t[2])}function Ai(t,e,o){for(var l=[],d=0,g=t.length,x;d<g;d++)x=e?Ai(t[d],e-1,o):(o||Rn)(t[d]),l.push(x);return l}function Dn(t,e){return t=W(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function Ei(t,e,o,l){for(var d=[],g=0,x=t.length;g<x;g++)d.push(e?Ei(t[g],St(t[g])?0:e-1,o,l):Dn(t[g],l));return!e&&o&&d.length>0&&d.push(d[0].slice()),d}function xe(t,e){return t.feature?h({},t.feature,{geometry:e}):Oi(e)}function Oi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Bn={toGeoJSON:function(t){return xe(this,{type:"Point",coordinates:Dn(this.getLatLng(),t)})}};Si.include(Bn),In.include(Bn),Mi.include(Bn),Gt.include({toGeoJSON:function(t){var e=!St(this._latlngs),o=Ei(this._latlngs,e?1:0,!1,t);return xe(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),ye.include({toGeoJSON:function(t){var e=!St(this._latlngs),o=e&&!St(this._latlngs[0]),l=Ei(this._latlngs,o?2:e?1:0,!0,t);return e||(l=[l]),xe(this,{type:(o?"Multi":"")+"Polygon",coordinates:l})}}),ge.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),xe(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",l=[];return this.eachLayer(function(d){if(d.toGeoJSON){var g=d.toGeoJSON(t);if(o)l.push(g.geometry);else{var x=Oi(g);x.type==="FeatureCollection"?l.push.apply(l,x.features):l.push(x)}}}),o?xe(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function Wo(t,e){return new Wt(t,e)}var xh=Wo,Ii=It.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=ut(e),P(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(H(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&_e(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ut(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:q("img");if(H(e,"leaflet-image-layer"),this._zoomAnimated&&H(e,"leaflet-zoom-animated"),this.options.className&&H(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onload=u(this.fire,this,"load"),e.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ne(this._image,o,e)},_reset:function(){var t=this._image,e=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();lt(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),wh=function(t,e,o){return new Ii(t,e,o)},Ko=Ii.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:q("video");if(H(e,"leaflet-image-layer"),this._zoomAnimated&&H(e,"leaflet-zoom-animated"),this.options.className&&H(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onloadeddata=u(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),l=[],d=0;d<o.length;d++)l.push(o[d].src);this._url=o.length>0?l:[e.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var x=q("source");x.src=this._url[g],e.appendChild(x)}}});function Lh(t,e,o){return new Ko(t,e,o)}var qo=Ii.extend({_initImage:function(){var t=this._image=this._url;H(t,"leaflet-image-layer"),this._zoomAnimated&&H(t,"leaflet-zoom-animated"),this.options.className&&H(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function Ph(t,e,o){return new qo(t,e,o)}var Vt=It.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof Y||E(t))?(this._latlng=W(t),P(this,e)):(P(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(H(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(u(Q,void 0,this._container),200)):Q(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&_e(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Ht){e=null;var o=this._source._layers;for(var l in o)if(o[l]._map){e=o[l];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=N(this.options.offset),o=this._getAnchor();this._zoomAnimated?lt(this._container,t.add(o)):e=e.add(t).add(o);var l=this._containerBottom=-e.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=l+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}});K.include({_initOverlay:function(t,e,o,l){var d=e;return d instanceof t||(d=new t(l).setContent(e)),o&&d.setLatLng(o),d}}),It.include({_initOverlay:function(t,e,o,l){var d=o;return d instanceof t?(P(d,l),d._source=this):(d=e&&!l?e:new t(l,this),d.setContent(o)),d}});var Ri=Vt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Vt.prototype.openOn.call(this,t)},onAdd:function(t){Vt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jt||this._source.on("preclick",oe))},onRemove:function(t){Vt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jt||this._source.off("preclick",oe))},getEvents:function(){var t=Vt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=q("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=q("div",t+"-content-wrapper",e);if(this._contentNode=q("div",t+"-content",o),Ue(e),Tn(this._contentNode),U(e,"contextmenu",oe),this._tipContainer=q("div",t+"-tip-container",e),this._tip=q("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=q("a",t+"-close-button",e);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',U(l,"click",function(d){dt(d),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var l=t.offsetHeight,d=this.options.maxHeight,g="leaflet-popup-scrolled";d&&l>d?(e.height=d+"px",H(t,g)):rt(t,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();lt(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Ne(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,l=this._containerWidth,d=new B(this._containerLeft,-o-this._containerBottom);d._add(se(this._container));var g=t.layerPointToContainerPoint(d),x=N(this.options.autoPanPadding),b=N(this.options.autoPanPaddingTopLeft||x),T=N(this.options.autoPanPaddingBottomRight||x),A=t.getSize(),R=0,z=0;g.x+l+T.x>A.x&&(R=g.x+l-A.x+T.x),g.x-R-b.x<0&&(R=g.x-b.x),g.y+o+T.y>A.y&&(z=g.y+o-A.y+T.y),g.y-z-b.y<0&&(z=g.y-b.y),(R||z)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([R,z]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bh=function(t,e){return new Ri(t,e)};K.mergeOptions({closePopupOnClick:!0}),K.include({openPopup:function(t,e,o){return this._initOverlay(Ri,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),It.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ri,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ht||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){re(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Jt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Di=Vt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Vt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Vt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Vt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=q("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,l=this._map,d=this._container,g=l.latLngToContainerPoint(l.getCenter()),x=l.layerPointToContainerPoint(t),b=this.options.direction,T=d.offsetWidth,A=d.offsetHeight,R=N(this.options.offset),z=this._getAnchor();b==="top"?(e=T/2,o=A):b==="bottom"?(e=T/2,o=0):b==="center"?(e=T/2,o=A/2):b==="right"?(e=0,o=A/2):b==="left"?(e=T,o=A/2):x.x<g.x?(b="right",e=0,o=A/2):(b="left",e=T+(R.x+z.x)*2,o=A/2),t=t.subtract(N(e,o,!0)).add(R).add(z),rt(d,"leaflet-tooltip-right"),rt(d,"leaflet-tooltip-left"),rt(d,"leaflet-tooltip-top"),rt(d,"leaflet-tooltip-bottom"),H(d,"leaflet-tooltip-"+b),lt(d,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ct(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Th=function(t,e){return new Di(t,e)};K.include({openTooltip:function(t,e,o){return this._initOverlay(Di,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),It.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Di,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ht||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(U(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),U(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,l;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(e)}});var $o=ve.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(wi(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var l=N(o.bgPos);e.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ch(t){return new $o(t)}ve.Default=We;var Ke=It.extend({options:{tileSize:256,opacity:1,updateWhenIdle:D.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){P(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Q(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_e(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),l=0,d=e.length,g;l<d;l++)g=e[l].style.zIndex,e[l]!==this._container&&g&&(o=t(o,+g));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!D.ielt9){Ct(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var l in this._tiles){var d=this._tiles[l];if(!(!d.current||!d.loaded)){var g=Math.min(1,(t-d.loaded)/200);Ct(d.el,g),g<1?e=!0:(d.active?o=!0:this._onOpaqueTile(d),d.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(gt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=q("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(Q(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var l=this._levels[t],d=this._map;return l||(l=this._levels[t]={},l.el=q("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=e,l.origin=d.project(d.unproject(d.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,d.getCenter(),d.getZoom()),_(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var l=e.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Q(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,l){var d=Math.floor(t/2),g=Math.floor(e/2),x=o-1,b=new B(+d,+g);b.z=+x;var T=this._tileCoordsToKey(b),A=this._tiles[T];return A&&A.active?(A.retain=!0,!0):(A&&A.loaded&&(A.retain=!0),x>l?this._retainParent(d,g,x,l):!1)},_retainChildren:function(t,e,o,l){for(var d=2*t;d<2*t+2;d++)for(var g=2*e;g<2*e+2;g++){var x=new B(d,g);x.z=o+1;var b=this._tileCoordsToKey(x),T=this._tiles[b];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);o+1<l&&this._retainChildren(d,g,o+1,l)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,l){var d=Math.round(e);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var g=this.options.updateWhenZooming&&d!==this._tileZoom;(!l||g)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var l=this._map.getZoomScale(o,t.zoom),d=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(e,o)).round();D.any3d?ne(t.el,d,l):lt(t.el,d)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),l=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],l).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],l).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],l).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],l).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),l=e.getZoomScale(o,this._tileZoom),d=e.project(t,this._tileZoom).floor(),g=e.getSize().divideBy(l*2);return new J(d.subtract(g),d.add(g))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),d=this._pxBoundsToTileRange(l),g=d.getCenter(),x=[],b=this.options.keepBuffer,T=new J(d.getBottomLeft().subtract([b,-b]),d.getTopRight().add([b,-b]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var A in this._tiles){var R=this._tiles[A].coords;(R.z!==this._tileZoom||!T.contains(new B(R.x,R.y)))&&(this._tiles[A].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var z=d.min.y;z<=d.max.y;z++)for(var G=d.min.x;G<=d.max.x;G++){var vt=new B(G,z);if(vt.z=this._tileZoom,!!this._isValidTile(vt)){var ct=this._tiles[this._tileCoordsToKey(vt)];ct?ct.current=!0:x.push(vt)}}if(x.sort(function(Pt,Le){return Pt.distanceTo(g)-Le.distanceTo(g)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(G=0;G<x.length;G++)this._addTile(x[G],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return ut(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),l=t.scaleBy(o),d=l.add(o),g=e.unproject(l,t.z),x=e.unproject(d,t.z);return[g,x]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new Lt(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new B(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(Q(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){H(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=_,t.onmousemove=_,D.ielt9&&this.options.opacity<1&&Ct(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),l=this._tileCoordsToKey(t),d=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(d),this.createTile.length<2&&st(u(this._tileReady,this,t,null,d)),lt(d,o),this._tiles[l]={el:d,coords:t,current:!0},e.appendChild(d),this.fire("tileloadstart",{tile:d,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var l=this._tileCoordsToKey(t);o=this._tiles[l],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Ct(o.el,0),gt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(H(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),D.ielt9||!this._map._fadeAnimated?st(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?p(t.x,this._wrapX):t.x,this._wrapY?p(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new J(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Sh(t){return new Ke(t)}var we=Ke.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=P(this,e),e.detectRetina&&D.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return U(o,"load",u(this._tileOnLoad,this,e,o)),U(o,"error",u(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:D.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return O(this._url,h(e,this.options))},_tileOnLoad:function(t,e){D.ielt9?setTimeout(u(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var l=this.options.errorTileUrl;l&&e.getAttribute("src")!==l&&(e.src=l),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,l=this.options.zoomOffset;return o&&(t=e-t),t+l},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=_,e.onerror=_,!e.complete)){e.src=I;var o=this._tiles[t].coords;Q(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",I),Ke.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===I))return Ke.prototype._tileReady.call(this,t,e,o)}});function Yo(t,e){return new we(t,e)}var Xo=we.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=h({},this.defaultWmsParams);for(var l in e)l in this.options||(o[l]=e[l]);e=P(this,e);var d=e.detectRetina&&D.retina?2:1,g=this.getTileSize();o.width=g.x*d,o.height=g.y*d,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,we.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,l=wt(o.project(e[0]),o.project(e[1])),d=l.min,g=l.max,x=(this._wmsVersion>=1.3&&this._crs===Uo?[d.y,d.x,g.y,g.x]:[d.x,d.y,g.x,g.y]).join(","),b=we.prototype.getTileUrl.call(this,t);return b+k(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(t,e){return h(this.wmsParams,t),e||this.redraw(),this}});function Mh(t,e){return new Xo(t,e)}we.WMS=Xo,Yo.wms=Mh;var Kt=It.extend({options:{padding:.1},initialize:function(t){P(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),H(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),d=this._map.project(this._center,e),g=l.multiplyBy(-o).add(d).subtract(this._map._getNewPixelOrigin(t,e));D.any3d?ne(this._container,g,o):lt(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new J(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jo=Kt.extend({options:{tolerance:0},getEvents:function(){var t=Kt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");U(t,"mousemove",this._onMouseMove,this),U(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),U(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){gt(this._redrawRequest),delete this._ctx,Q(this._container),X(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kt.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),l=D.retina?2:1;lt(e,t.min),e.width=l*o.x,e.height=l*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",D.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Kt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,l=e.prev;o?o.prev=l:this._drawLast=l,l?l.next=o:this._drawFirst=o,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],l,d;for(d=0;d<e.length;d++){if(l=Number(e[d]),isNaN(l))return;o.push(l)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||st(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,l,d,g,x=t._parts,b=x.length,T=this._ctx;if(b){for(T.beginPath(),o=0;o<b;o++){for(l=0,d=x[o].length;l<d;l++)g=x[o][l],T[l?"lineTo":"moveTo"](g.x,g.y);e&&T.closePath()}this._fillStroke(T,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,l=Math.max(Math.round(t._radius),1),d=(Math.max(Math.round(t._radiusY),1)||l)/l;d!==1&&(o.save(),o.scale(1,d)),o.beginPath(),o.arc(e.x,e.y/d,l,0,Math.PI*2,!1),d!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,l,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(l=o);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(rt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,l,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(e)&&(l=o);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(H(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,l=e.prev;if(o)o.prev=l;else return;l?l.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,l=e.prev;if(l)l.next=o;else return;o?o.prev=l:l&&(this._drawLast=l),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Qo(t){return D.canvas?new Jo(t):null}var qe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kh={_initContainer:function(){this._container=q("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qe("shape");H(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qe("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Q(e),t.removeInteractiveTarget(e),delete this._layers[f(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,l=t.options,d=t._container;d.stroked=!!l.stroke,d.filled=!!l.fill,l.stroke?(e||(e=t._stroke=qe("stroke")),d.appendChild(e),e.weight=l.weight+"px",e.color=l.color,e.opacity=l.opacity,l.dashArray?e.dashStyle=E(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=l.lineCap.replace("butt","flat"),e.joinstyle=l.lineJoin):e&&(d.removeChild(e),t._stroke=null),l.fill?(o||(o=t._fill=qe("fill")),d.appendChild(o),o.color=l.fillColor||l.color,o.opacity=l.fillOpacity):o&&(d.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),l=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+l+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){_e(t._container)}},Bi=D.vml?qe:io,$e=Kt.extend({_initContainer:function(){this._container=Bi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Q(this._container),X(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),lt(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Bi("path");t.options.className&&H(e,t.options.className),t.options.interactive&&H(e,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Q(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,no(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||o,d="a"+o+","+l+" 0 1,0 ",g=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+d+o*2+",0 "+d+-o*2+",0 ";this._setPath(t,g)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){_e(t._path)}});D.vml&&$e.include(kh);function tr(t){return D.svg||D.vml?new $e(t):null}K.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Qo(t)||tr(t)}});var er=ye.extend({initialize:function(t,e){ye.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ut(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ah(t,e){return new er(t,e)}$e.create=Bi,$e.pointsToPath=no,Wt.geometryToLayer=ki,Wt.coordsToLatLng=Rn,Wt.coordsToLatLngs=Ai,Wt.latLngToCoords=Dn,Wt.latLngsToCoords=Ei,Wt.getFeature=xe,Wt.asFeature=Oi,K.mergeOptions({boxZoom:!0});var ir=zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){U(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){X(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ze(),gn(),this._startPoint=this._map.mouseEventToContainerPoint(t),U(document,{contextmenu:re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=q("div","leaflet-zoom-box",this._container),H(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new J(this._point,this._startPoint),o=e.getSize();lt(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(Q(this._box),rt(this._container,"leaflet-crosshair")),Fe(),vn(),X(document,{contextmenu:re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var e=new Lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});K.addInitHook("addHandler","boxZoom",ir),K.mergeOptions({doubleClickZoom:!0});var nr=zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),l=e.options.zoomDelta,d=t.originalEvent.shiftKey?o-l:o+l;e.options.doubleClickZoom==="center"?e.setZoom(d):e.setZoomAround(t.containerPoint,d)}});K.addInitHook("addHandler","doubleClickZoom",nr),K.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sr=zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Xt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}H(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ut(this._map.options.maxBounds);this._offsetLimit=wt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,l=this._draggable._newPos.x,d=(l-e+o)%t+e-o,g=(l+e+o)%t-e-o,x=Math.abs(d+o)<Math.abs(g+o)?d:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(t){var e=this._map,o=e.options,l=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),l)e.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,x=o.easeLinearity,b=d.multiplyBy(x/g),T=b.distanceTo([0,0]),A=Math.min(o.inertiaMaxSpeed,T),R=b.multiplyBy(A/T),z=A/(o.inertiaDeceleration*x),G=R.multiplyBy(-z/2).round();!G.x&&!G.y?e.fire("moveend"):(G=e._limitOffset(G,e.options.maxBounds),st(function(){e.panBy(G,{duration:z,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});K.addInitHook("addHandler","dragging",sr),K.mergeOptions({keyboard:!0,keyboardPanDelta:80});var or=zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),U(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),X(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,l=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(l,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,l,d;for(l=0,d=o.left.length;l<d;l++)e[o.left[l]]=[-1*t,0];for(l=0,d=o.right.length;l<d;l++)e[o.right[l]]=[t,0];for(l=0,d=o.down.length;l<d;l++)e[o.down[l]]=[0,t];for(l=0,d=o.up.length;l<d;l++)e[o.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,l,d;for(l=0,d=o.zoomIn.length;l<d;l++)e[o.zoomIn[l]]=t;for(l=0,d=o.zoomOut.length;l<d;l++)e[o.zoomOut[l]]=-t},_addHooks:function(){U(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){X(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,l;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(l=this._panKeys[e],t.shiftKey&&(l=N(l).multiplyBy(3)),o.options.maxBounds&&(l=o._limitOffset(N(l),o.options.maxBounds)),o.options.worldCopyJump){var d=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(l)));o.panTo(d)}else o.panBy(l)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;re(t)}}});K.addInitHook("addHandler","keyboard",or),K.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rr=zt.extend({addHooks:function(){U(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){X(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ao(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),l),re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,g=o?Math.ceil(d/o)*o:d,x=t._limitZoom(e+(this._delta>0?g:-g))-e;this._delta=0,this._startTime=null,x&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+x):t.setZoomAround(this._lastMousePos,e+x))}});K.addInitHook("addHandler","scrollWheelZoom",rr);var Eh=600;K.mergeOptions({tapHold:D.touchNative&&D.safari&&D.mobile,tapTolerance:15});var ar=zt.extend({addHooks:function(){U(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){X(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new B(e.clientX,e.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(U(document,"touchend",dt),U(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Eh),U(document,"touchend touchcancel contextmenu",this._cancel,this),U(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){X(document,"touchend",dt),X(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),X(document,"touchend touchcancel contextmenu",this._cancel,this),X(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});K.addInitHook("addHandler","tapHold",ar),K.mergeOptions({touchZoom:D.touch,bounceAtZoomLimits:!0});var ur=zt.extend({addHooks:function(){H(this._map._container,"leaflet-touch-zoom"),U(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),X(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(l)._divideBy(2))),this._startDist=o.distanceTo(l),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),U(document,"touchmove",this._onTouchMove,this),U(document,"touchend touchcancel",this._onTouchEnd,this),dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]),d=o.distanceTo(l)/this._startDist;if(this._zoom=e.getScaleZoom(d,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&d<1||this._zoom>e.getMaxZoom()&&d>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var g=o._add(l)._divideBy(2)._subtract(this._centerPoint);if(d===1&&g.x===0&&g.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),gt(this._animRequest);var x=u(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=st(x,this,!0),dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,gt(this._animRequest),X(document,"touchmove",this._onTouchMove,this),X(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});K.addInitHook("addHandler","touchZoom",ur),K.BoxZoom=ir,K.DoubleClickZoom=nr,K.Drag=sr,K.Keyboard=or,K.ScrollWheelZoom=rr,K.TapHold=ar,K.TouchZoom=ur,s.Bounds=J,s.Browser=D,s.CRS=Ut,s.Canvas=Jo,s.Circle=In,s.CircleMarker=Mi,s.Class=Tt,s.Control=Ot,s.DivIcon=$o,s.DivOverlay=Vt,s.DomEvent=$l,s.DomUtil=Kl,s.Draggable=Xt,s.Evented=ot,s.FeatureGroup=Ht,s.GeoJSON=Wt,s.GridLayer=Ke,s.Handler=zt,s.Icon=ve,s.ImageOverlay=Ii,s.LatLng=Y,s.LatLngBounds=Lt,s.Layer=It,s.LayerGroup=ge,s.LineUtil=uh,s.Map=K,s.Marker=Si,s.Mixin=ih,s.Path=Jt,s.Point=B,s.PolyUtil=nh,s.Polygon=ye,s.Polyline=Gt,s.Popup=Ri,s.PosAnimation=Eo,s.Projection=lh,s.Rectangle=er,s.Renderer=Kt,s.SVG=$e,s.SVGOverlay=qo,s.TileLayer=we,s.Tooltip=Di,s.Transformation=on,s.Util=nn,s.VideoOverlay=Ko,s.bind=u,s.bounds=wt,s.canvas=Qo,s.circle=gh,s.circleMarker=_h,s.control=He,s.divIcon=Ch,s.extend=h,s.featureGroup=dh,s.geoJSON=Wo,s.geoJson=xh,s.gridLayer=Sh,s.icon=mh,s.imageOverlay=wh,s.latLng=W,s.latLngBounds=ut,s.layerGroup=fh,s.map=Yl,s.marker=ph,s.point=N,s.polygon=yh,s.polyline=vh,s.popup=bh,s.rectangle=Ah,s.setOptions=P,s.stamp=f,s.svg=tr,s.svgOverlay=Ph,s.tileLayer=Yo,s.tooltip=Th,s.transformation=Be,s.version=a,s.videoOverlay=Lh;var Oh=window.L;s.noConflict=function(){return window.L=Oh,this},window.L=s})})(gs,gs.exports);var De=gs.exports;const en=qh(De);function gi(i,n,s){return Object.freeze({instance:i,context:n,container:s})}function vi(i,n){return n==null?function(a,h){const r=S.useRef();return r.current||(r.current=i(a,h)),r}:function(a,h){const r=S.useRef();r.current||(r.current=i(a,h));const u=S.useRef(a),{instance:c}=r.current;return S.useEffect(function(){u.current!==a&&(n(c,a,u.current),u.current=a)},[c,a,h]),r}}function pl(i,n){S.useEffect(function(){return(n.layerContainer??n.map).addLayer(i.instance),function(){var r;(r=n.layerContainer)==null||r.removeLayer(i.instance),n.map.removeLayer(i.instance)}},[n,i])}function _l(i){return function(s){const a=_i(),h=i(tn(s,a),a);return ll(a.map,s.attribution),Js(h.current,s.eventHandlers),pl(h.current,a),h}}function e_(i,n){const s=S.useRef();S.useEffect(function(){if(n.pathOptions!==s.current){const h=n.pathOptions??{};i.instance.setStyle(h),s.current=h}},[i,n])}function i_(i){return function(s){const a=_i(),h=i(tn(s,a),a);return Js(h.current,s.eventHandlers),pl(h.current,a),e_(h.current,s),h}}function n_(i){function n(h,r){return gi(i(h),r)}const s=vi(n),a=Qp(s);return ml(a)}function s_(i,n){const s=vi(i,n),a=_l(s);return dl(a)}function o_(i,n){const s=vi(i),a=t_(s,n);return Jp(a)}function r_(i,n){const s=vi(i,n),a=i_(s);return dl(a)}function a_(i,n){const s=vi(i,n),a=_l(s);return ml(a)}function u_(i,n,s){const{opacity:a,zIndex:h}=n;a!=null&&a!==s.opacity&&i.setOpacity(a),h!=null&&h!==s.zIndex&&i.setZIndex(h)}function l_(){return _i().map}function vs(){return vs=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},vs.apply(this,arguments)}function h_({bounds:i,boundsOptions:n,center:s,children:a,className:h,id:r,placeholder:u,style:c,whenReady:f,zoom:m,...p},_){const[v]=S.useState({className:h,id:r,style:c}),[y,w]=S.useState(null);S.useImperativeHandle(_,()=>(y==null?void 0:y.map)??null,[y]);const P=S.useCallback(C=>{if(C!==null&&y===null){const O=new De.Map(C,p);s!=null&&m!=null?O.setView(s,m):i!=null&&O.fitBounds(i,n),f!=null&&O.whenReady(f),w(Xp(O))}},[]);S.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const k=y?Me.createElement(fl,{value:y},a):u??null;return Me.createElement("div",vs({},v,{ref:P}),k)}const c_=S.forwardRef(h_),f_=s_(function({position:n,...s},a){const h=new De.Marker(n,s);return gi(h,hl(a,{overlayContainer:h}))},function(n,s,a){s.position!==a.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==a.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==a.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==a.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),d_=o_(function(n,s){const a=new De.Popup(n,s.overlayContainer);return gi(a,s)},function(n,s,{position:a},h){S.useEffect(function(){const{instance:u}=n;function c(m){m.popup===u&&(u.update(),h(!0))}function f(m){m.popup===u&&h(!1)}return s.map.on({popupopen:c,popupclose:f}),s.overlayContainer==null?(a!=null&&u.setLatLng(a),u.openOn(s.map)):s.overlayContainer.bindPopup(u),function(){var p;s.map.off({popupopen:c,popupclose:f}),(p=s.overlayContainer)==null||p.unbindPopup(),s.map.removeLayer(u)}},[n,s,h,a])}),m_=a_(function({url:n,...s},a){const h=new De.TileLayer(n,tn(s,a));return gi(h,a)},function(n,s,a){u_(n,s,a);const{url:h}=s;h!=null&&h!==a.url&&n.setUrl(h)}),p_=n_(function(n){return new De.Control.Zoom(n)});var Ma={exports:{}};(function(i,n){(function(s,a){a(n)})(Oa,function(s){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(r){L.Util.setOptions(this,r),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var u=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,u?this._withAnimation:this._noAnimation),this._markerCluster=u?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(r){if(r instanceof L.LayerGroup)return this.addLayers([r]);if(!r.getLatLng)return this._nonPointGroup.addLayer(r),this.fire("layeradd",{layer:r}),this;if(!this._map)return this._needsClustering.push(r),this.fire("layeradd",{layer:r}),this;if(this.hasLayer(r))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(r,this._maxZoom),this.fire("layeradd",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var u=r,c=this._zoom;if(r.__parent)for(;u.__parent._zoom>=c;)u=u.__parent;return this._currentShownBounds.contains(u.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(r,u):this._animationAddLayerNonAnimated(r,u)),this},removeLayer:function(r){return r instanceof L.LayerGroup?this.removeLayers([r]):r.getLatLng?this._map?r.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(r)),this._removeLayer(r,!0),this.fire("layerremove",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),r.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(r)&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,r)&&this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r}),this):(this._nonPointGroup.removeLayer(r),this.fire("layerremove",{layer:r}),this)},addLayers:function(r,u){if(!L.Util.isArray(r))return this.addLayer(r);var c=this._featureGroup,f=this._nonPointGroup,m=this.options.chunkedLoading,p=this.options.chunkInterval,_=this.options.chunkProgress,v=r.length,y=0,w=!0,P;if(this._map){var k=new Date().getTime(),C=L.bind(function(){var E=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();y<v;y++){if(m&&y%200===0){var V=new Date().getTime()-E;if(V>p)break}if(P=r[y],P instanceof L.LayerGroup){w&&(r=r.slice(),w=!1),this._extractNonGroupLayers(P,r),v=r.length;continue}if(!P.getLatLng){f.addLayer(P),u||this.fire("layeradd",{layer:P});continue}if(!this.hasLayer(P)&&(this._addLayer(P,this._maxZoom),u||this.fire("layeradd",{layer:P}),P.__parent&&P.__parent.getChildCount()===2)){var I=P.__parent.getAllChildMarkers(),F=I[0]===P?I[1]:I[0];c.removeLayer(F)}}_&&_(y,v,new Date().getTime()-k),y===v?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(C,this.options.chunkDelay)},this);C()}else for(var O=this._needsClustering;y<v;y++){if(P=r[y],P instanceof L.LayerGroup){w&&(r=r.slice(),w=!1),this._extractNonGroupLayers(P,r),v=r.length;continue}if(!P.getLatLng){f.addLayer(P);continue}this.hasLayer(P)||O.push(P)}return this},removeLayers:function(r){var u,c,f=r.length,m=this._featureGroup,p=this._nonPointGroup,_=!0;if(!this._map){for(u=0;u<f;u++){if(c=r[u],c instanceof L.LayerGroup){_&&(r=r.slice(),_=!1),this._extractNonGroupLayers(c,r),f=r.length;continue}this._arraySplice(this._needsClustering,c),p.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c})}return this}if(this._unspiderfy){this._unspiderfy();var v=r.slice(),y=f;for(u=0;u<y;u++){if(c=v[u],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,v),y=v.length;continue}this._unspiderfyLayer(c)}}for(u=0;u<f;u++){if(c=r[u],c instanceof L.LayerGroup){_&&(r=r.slice(),_=!1),this._extractNonGroupLayers(c,r),f=r.length;continue}if(!c.__parent){p.removeLayer(c),this.fire("layerremove",{layer:c});continue}this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),m.hasLayer(c)&&(m.removeLayer(c),c.clusterShow&&c.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(r){r.off(this._childMarkerEventHandlers,this),delete r.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var r=new L.LatLngBounds;this._topClusterLevel&&r.extend(this._topClusterLevel._bounds);for(var u=this._needsClustering.length-1;u>=0;u--)r.extend(this._needsClustering[u].getLatLng());return r.extend(this._nonPointGroup.getBounds()),r},eachLayer:function(r,u){var c=this._needsClustering.slice(),f=this._needsRemoving,m,p,_;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),p=c.length-1;p>=0;p--){for(m=!0,_=f.length-1;_>=0;_--)if(f[_].layer===c[p]){m=!1;break}m&&r.call(u,c[p])}this._nonPointGroup.eachLayer(r,u)},getLayers:function(){var r=[];return this.eachLayer(function(u){r.push(u)}),r},getLayer:function(r){var u=null;return r=parseInt(r,10),this.eachLayer(function(c){L.stamp(c)===r&&(u=c)}),u},hasLayer:function(r){if(!r)return!1;var u,c=this._needsClustering;for(u=c.length-1;u>=0;u--)if(c[u]===r)return!0;for(c=this._needsRemoving,u=c.length-1;u>=0;u--)if(c[u].layer===r)return!1;return!!(r.__parent&&r.__parent._group===this)||this._nonPointGroup.hasLayer(r)},zoomToShowLayer:function(r,u){var c=this._map;typeof u!="function"&&(u=function(){});var f=function(){(c.hasLayer(r)||c.hasLayer(r.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",f,this),this.off("animationend",f,this),c.hasLayer(r)?u():r.__parent._icon&&(this.once("spiderfied",u,this),r.__parent.spiderfy()))};r._icon&&this._map.getBounds().contains(r.getLatLng())?u():r.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",f,this),this._map.panTo(r.getLatLng())):(this._map.on("moveend",f,this),this.on("animationend",f,this),r.__parent.zoomToBounds())},onAdd:function(r){this._map=r;var u,c,f;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(r),this._nonPointGroup.addTo(r),this._gridClusters||this._generateInitialClusters(),this._maxLat=r.options.crs.projection.MAX_LATITUDE,u=0,c=this._needsRemoving.length;u<c;u++)f=this._needsRemoving[u],f.newlatlng=f.layer._latlng,f.layer._latlng=f.latlng;for(u=0,c=this._needsRemoving.length;u<c;u++)f=this._needsRemoving[u],this._removeLayer(f.layer,!0),f.layer._latlng=f.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(r){r.off("zoomend",this._zoomEnd,this),r.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(r){for(var u=r;u&&!u._icon;)u=u.__parent;return u||null},_arraySplice:function(r,u){for(var c=r.length-1;c>=0;c--)if(r[c]===u)return r.splice(c,1),!0},_removeFromGridUnclustered:function(r,u){for(var c=this._map,f=this._gridUnclustered,m=Math.floor(this._map.getMinZoom());u>=m&&f[u].removeObject(r,c.project(r.getLatLng(),u));u--);},_childMarkerDragStart:function(r){r.target.__dragStart=r.target._latlng},_childMarkerMoved:function(r){if(!this._ignoreMove&&!r.target.__dragStart){var u=r.target._popup&&r.target._popup.isOpen();this._moveChild(r.target,r.oldLatLng,r.latlng),u&&r.target.openPopup()}},_moveChild:function(r,u,c){r._latlng=u,this.removeLayer(r),r._latlng=c,this.addLayer(r)},_childMarkerDragEnd:function(r){var u=r.target.__dragStart;delete r.target.__dragStart,u&&this._moveChild(r.target,u,r.target._latlng)},_removeLayer:function(r,u,c){var f=this._gridClusters,m=this._gridUnclustered,p=this._featureGroup,_=this._map,v=Math.floor(this._map.getMinZoom());u&&this._removeFromGridUnclustered(r,this._maxZoom);var y=r.__parent,w=y._markers,P;for(this._arraySplice(w,r);y&&(y._childCount--,y._boundsNeedUpdate=!0,!(y._zoom<v));)u&&y._childCount<=1?(P=y._markers[0]===r?y._markers[1]:y._markers[0],f[y._zoom].removeObject(y,_.project(y._cLatLng,y._zoom)),m[y._zoom].addObject(P,_.project(P.getLatLng(),y._zoom)),this._arraySplice(y.__parent._childClusters,y),y.__parent._markers.push(P),P.__parent=y.__parent,y._icon&&(p.removeLayer(y),c||p.addLayer(P))):y._iconNeedsUpdate=!0,y=y.__parent;delete r.__parent},_isOrIsParent:function(r,u){for(;u;){if(r===u)return!0;u=u.parentNode}return!1},fire:function(r,u,c){if(u&&u.layer instanceof L.MarkerCluster){if(u.originalEvent&&this._isOrIsParent(u.layer._icon,u.originalEvent.relatedTarget))return;r="cluster"+r}L.FeatureGroup.prototype.fire.call(this,r,u,c)},listens:function(r,u){return L.FeatureGroup.prototype.listens.call(this,r,u)||L.FeatureGroup.prototype.listens.call(this,"cluster"+r,u)},_defaultIconCreateFunction:function(r){var u=r.getChildCount(),c=" marker-cluster-";return u<10?c+="small":u<100?c+="medium":c+="large",new L.DivIcon({html:"<div><span>"+u+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var r=this._map,u=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,f=this.options.zoomToBoundsOnClick,m=this.options.spiderfyOnEveryZoom;(u||f||m)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),r.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(r){var u=r.layer,c=u;if(!(r.type==="clusterkeypress"&&r.originalEvent&&r.originalEvent.keyCode!==13)){for(;c._childClusters.length===1;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===u._childCount&&this.options.spiderfyOnMaxZoom?u.spiderfy():this.options.zoomToBoundsOnClick&&u.zoomToBounds(),this.options.spiderfyOnEveryZoom&&u.spiderfy(),r.originalEvent&&r.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(r){var u=this._map;this._inZoomAnimation||(this._shownPolygon&&u.removeLayer(this._shownPolygon),r.layer.getChildCount()>2&&r.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(r.layer.getConvexHull(),this.options.polygonOptions),u.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var r=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom,m=this._map;(r||c||f)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),u&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),m.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var r=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,r),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),r),this._currentShownBounds=r}},_generateInitialClusters:function(){var r=Math.ceil(this._map.getMaxZoom()),u=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,f=c;typeof c!="function"&&(f=function(){return c}),this.options.disableClusteringAtZoom!==null&&(r=this.options.disableClusteringAtZoom-1),this._maxZoom=r,this._gridClusters={},this._gridUnclustered={};for(var m=r;m>=u;m--)this._gridClusters[m]=new L.DistanceGrid(f(m)),this._gridUnclustered[m]=new L.DistanceGrid(f(m));this._topClusterLevel=new this._markerCluster(this,u-1)},_addLayer:function(r,u){var c=this._gridClusters,f=this._gridUnclustered,m=Math.floor(this._map.getMinZoom()),p,_;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(r),r.on(this._childMarkerEventHandlers,this);u>=m;u--){p=this._map.project(r.getLatLng(),u);var v=c[u].getNearObject(p);if(v){v._addChild(r),r.__parent=v;return}if(v=f[u].getNearObject(p),v){var y=v.__parent;y&&this._removeLayer(v,!1);var w=new this._markerCluster(this,u,v,r);c[u].addObject(w,this._map.project(w._cLatLng,u)),v.__parent=w,r.__parent=w;var P=w;for(_=u-1;_>y._zoom;_--)P=new this._markerCluster(this,_,P),c[_].addObject(P,this._map.project(v.getLatLng(),_));y._addChild(P),this._removeFromGridUnclustered(v,u);return}f[u].addObject(r,p)}this._topClusterLevel._addChild(r),r.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(r){r instanceof L.MarkerCluster&&r._iconNeedsUpdate&&r._updateIcon()})},_enqueue:function(r){this._queue.push(r),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var r=0;r<this._queue.length;r++)this._queue[r].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var r=Math.round(this._map._zoom);this._processQueue(),this._zoom<r&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,r)):this._zoom>r?(this._animationStart(),this._animationZoomOut(this._zoom,r)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(r){var u=this._maxLat;return u!==void 0&&(r.getNorth()>=u&&(r._northEast.lat=1/0),r.getSouth()<=-u&&(r._southWest.lat=-1/0)),r},_animationAddLayerNonAnimated:function(r,u){if(u===r)this._featureGroup.addLayer(r);else if(u._childCount===2){u._addToMap();var c=u.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else u._updateIcon()},_extractNonGroupLayers:function(r,u){var c=r.getLayers(),f=0,m;for(u=u||[];f<c.length;f++){if(m=c[f],m instanceof L.LayerGroup){this._extractNonGroupLayers(m,u);continue}u.push(m)}return u},_overrideMarkerIcon:function(r){var u=r.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[r]}});return u}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(r,u){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(r,u){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(r,u){this._animationAddLayerNonAnimated(r,u)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(r,u){var c=this._getExpandedVisibleBounds(),f=this._featureGroup,m=Math.floor(this._map.getMinZoom()),p;this._ignoreMove=!0,this._topClusterLevel._recursively(c,r,m,function(_){var v=_._latlng,y=_._markers,w;for(c.contains(v)||(v=null),_._isSingleParent()&&r+1===u?(f.removeLayer(_),_._recursivelyAddChildrenToMap(null,u,c)):(_.clusterHide(),_._recursivelyAddChildrenToMap(v,u,c)),p=y.length-1;p>=0;p--)w=y[p],c.contains(w._latlng)||f.removeLayer(w)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(c,u),f.eachLayer(function(_){!(_ instanceof L.MarkerCluster)&&_._icon&&_.clusterShow()}),this._topClusterLevel._recursively(c,r,u,function(_){_._recursivelyRestoreChildPositions(u)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(c,r,m,function(_){f.removeLayer(_),_.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(r,u){this._animationZoomOutSingle(this._topClusterLevel,r-1,u),this._topClusterLevel._recursivelyAddChildrenToMap(null,u,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r,this._getExpandedVisibleBounds())},_animationAddLayer:function(r,u){var c=this,f=this._featureGroup;f.addLayer(r),u!==r&&(u._childCount>2?(u._updateIcon(),this._forceLayout(),this._animationStart(),r._setPos(this._map.latLngToLayerPoint(u.getLatLng())),r.clusterHide(),this._enqueue(function(){f.removeLayer(r),r.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(u,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(r,u,c){var f=this._getExpandedVisibleBounds(),m=Math.floor(this._map.getMinZoom());r._recursivelyAnimateChildrenInAndAddSelfToMap(f,m,u+1,c);var p=this;this._forceLayout(),r._recursivelyBecomeVisible(f,c),this._enqueue(function(){if(r._childCount===1){var _=r._markers[0];this._ignoreMove=!0,_.setLatLng(_.getLatLng()),this._ignoreMove=!1,_.clusterShow&&_.clusterShow()}else r._recursively(f,c,m,function(v){v._recursivelyRemoveChildrenFromMap(f,m,u+1)});p._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(r){return new L.MarkerClusterGroup(r)};var h=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(r,u,c,f){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this,pane:r.options.clusterPane}),this._group=r,this._zoom=u,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),f&&this._addChild(f)},getAllChildMarkers:function(r,u){r=r||[];for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c].getAllChildMarkers(r,u);for(var f=this._markers.length-1;f>=0;f--)u&&this._markers[f].__dragStart||r.push(this._markers[f]);return r},getChildCount:function(){return this._childCount},zoomToBounds:function(r){for(var u=this._childClusters.slice(),c=this._group._map,f=c.getBoundsZoom(this._bounds),m=this._zoom+1,p=c.getZoom(),_;u.length>0&&f>m;){m++;var v=[];for(_=0;_<u.length;_++)v=v.concat(u[_]._childClusters);u=v}f>m?this._group._map.setView(this._latlng,m):f<=p?this._group._map.setView(this._latlng,p+1):this._group._map.fitBounds(this._bounds,r)},getBounds:function(){var r=new L.LatLngBounds;return r.extend(this._bounds),r},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(r,u){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(r),r instanceof L.MarkerCluster?(u||(this._childClusters.push(r),r.__parent=this),this._childCount+=r._childCount):(u||this._markers.push(r),this._childCount++),this.__parent&&this.__parent._addChild(r,!0)},_setClusterCenter:function(r){this._cLatLng||(this._cLatLng=r._cLatLng||r._latlng)},_resetBounds:function(){var r=this._bounds;r._southWest&&(r._southWest.lat=1/0,r._southWest.lng=1/0),r._northEast&&(r._northEast.lat=-1/0,r._northEast.lng=-1/0)},_recalculateBounds:function(){var r=this._markers,u=this._childClusters,c=0,f=0,m=this._childCount,p,_,v,y;if(m!==0){for(this._resetBounds(),p=0;p<r.length;p++)v=r[p]._latlng,this._bounds.extend(v),c+=v.lat,f+=v.lng;for(p=0;p<u.length;p++)_=u[p],_._boundsNeedUpdate&&_._recalculateBounds(),this._bounds.extend(_._bounds),v=_._wLatLng,y=_._childCount,c+=v.lat*y,f+=v.lng*y;this._latlng=this._wLatLng=new L.LatLng(c/m,f/m),this._boundsNeedUpdate=!1}},_addToMap:function(r){r&&(this._backupLatlng=this._latlng,this.setLatLng(r)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(r,u,c){this._recursively(r,this._group._map.getMinZoom(),c-1,function(f){var m=f._markers,p,_;for(p=m.length-1;p>=0;p--)_=m[p],_._icon&&(_._setPos(u),_.clusterHide())},function(f){var m=f._childClusters,p,_;for(p=m.length-1;p>=0;p--)_=m[p],_._icon&&(_._setPos(u),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(r,u,c,f){this._recursively(r,f,u,function(m){m._recursivelyAnimateChildrenIn(r,m._group._map.latLngToLayerPoint(m.getLatLng()).round(),c),m._isSingleParent()&&c-1===f?(m.clusterShow(),m._recursivelyRemoveChildrenFromMap(r,u,c)):m.clusterHide(),m._addToMap()})},_recursivelyBecomeVisible:function(r,u){this._recursively(r,this._group._map.getMinZoom(),u,null,function(c){c.clusterShow()})},_recursivelyAddChildrenToMap:function(r,u,c){this._recursively(c,this._group._map.getMinZoom()-1,u,function(f){if(u!==f._zoom)for(var m=f._markers.length-1;m>=0;m--){var p=f._markers[m];c.contains(p._latlng)&&(r&&(p._backupLatlng=p.getLatLng(),p.setLatLng(r),p.clusterHide&&p.clusterHide()),f._group._featureGroup.addLayer(p))}},function(f){f._addToMap(r)})},_recursivelyRestoreChildPositions:function(r){for(var u=this._markers.length-1;u>=0;u--){var c=this._markers[u];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(r-1===this._zoom)for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f]._restorePosition();else for(var m=this._childClusters.length-1;m>=0;m--)this._childClusters[m]._recursivelyRestoreChildPositions(r)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(r,u,c,f){var m,p;this._recursively(r,u-1,c-1,function(_){for(p=_._markers.length-1;p>=0;p--)m=_._markers[p],(!f||!f.contains(m._latlng))&&(_._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())},function(_){for(p=_._childClusters.length-1;p>=0;p--)m=_._childClusters[p],(!f||!f.contains(m._latlng))&&(_._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())})},_recursively:function(r,u,c,f,m){var p=this._childClusters,_=this._zoom,v,y;if(u<=_&&(f&&f(this),m&&_===c&&m(this)),_<u||_<c)for(v=p.length-1;v>=0;v--)y=p[v],y._boundsNeedUpdate&&y._recalculateBounds(),r.intersects(y._bounds)&&y._recursively(r,u,c,f,m)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var r=this.options.opacity;return this.setOpacity(0),this.options.opacity=r,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(r){this._cellSize=r,this._sqCellSize=r*r,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(r,u){var c=this._getCoord(u.x),f=this._getCoord(u.y),m=this._grid,p=m[f]=m[f]||{},_=p[c]=p[c]||[],v=L.Util.stamp(r);this._objectPoint[v]=u,_.push(r)},updateObject:function(r,u){this.removeObject(r),this.addObject(r,u)},removeObject:function(r,u){var c=this._getCoord(u.x),f=this._getCoord(u.y),m=this._grid,p=m[f]=m[f]||{},_=p[c]=p[c]||[],v,y;for(delete this._objectPoint[L.Util.stamp(r)],v=0,y=_.length;v<y;v++)if(_[v]===r)return _.splice(v,1),y===1&&delete p[c],!0},eachObject:function(r,u){var c,f,m,p,_,v,y,w=this._grid;for(c in w){_=w[c];for(f in _)for(v=_[f],m=0,p=v.length;m<p;m++)y=r.call(u,v[m]),y&&(m--,p--)}},getNearObject:function(r){var u=this._getCoord(r.x),c=this._getCoord(r.y),f,m,p,_,v,y,w,P,k=this._objectPoint,C=this._sqCellSize,O=null;for(f=c-1;f<=c+1;f++)if(_=this._grid[f],_){for(m=u-1;m<=u+1;m++)if(v=_[m],v)for(p=0,y=v.length;p<y;p++)w=v[p],P=this._sqDist(k[L.Util.stamp(w)],r),(P<C||P<=C&&O===null)&&(C=P,O=w)}return O},_getCoord:function(r){var u=Math.floor(r/this._cellSize);return isFinite(u)?u:r},_sqDist:function(r,u){var c=u.x-r.x,f=u.y-r.y;return c*c+f*f}},function(){L.QuickHull={getDistant:function(r,u){var c=u[1].lat-u[0].lat,f=u[0].lng-u[1].lng;return f*(r.lat-u[0].lat)+c*(r.lng-u[0].lng)},findMostDistantPointFromBaseLine:function(r,u){var c=0,f=null,m=[],p,_,v;for(p=u.length-1;p>=0;p--){if(_=u[p],v=this.getDistant(_,r),v>0)m.push(_);else continue;v>c&&(c=v,f=_)}return{maxPoint:f,newPoints:m}},buildConvexHull:function(r,u){var c=[],f=this.findMostDistantPointFromBaseLine(r,u);return f.maxPoint?(c=c.concat(this.buildConvexHull([r[0],f.maxPoint],f.newPoints)),c=c.concat(this.buildConvexHull([f.maxPoint,r[1]],f.newPoints)),c):[r[0]]},getConvexHull:function(r){var u=!1,c=!1,f=!1,m=!1,p=null,_=null,v=null,y=null,w=null,P=null,k;for(k=r.length-1;k>=0;k--){var C=r[k];(u===!1||C.lat>u)&&(p=C,u=C.lat),(c===!1||C.lat<c)&&(_=C,c=C.lat),(f===!1||C.lng>f)&&(v=C,f=C.lng),(m===!1||C.lng<m)&&(y=C,m=C.lng)}c!==u?(P=_,w=p):(P=y,w=v);var O=[].concat(this.buildConvexHull([P,w],r),this.buildConvexHull([w,P],r));return O}}}(),L.MarkerCluster.include({getConvexHull:function(){var r=this.getAllChildMarkers(),u=[],c,f;for(f=r.length-1;f>=0;f--)c=r[f].getLatLng(),u.push(c);return L.QuickHull.getConvexHull(u)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var r=this.getAllChildMarkers(null,!0),u=this._group,c=u._map,f=c.latLngToLayerPoint(this._latlng),m;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?m=this._group.options.spiderfyShapePositions(r.length,f):r.length>=this._circleSpiralSwitchover?m=this._generatePointsSpiral(r.length,f):(f.y+=10,m=this._generatePointsCircle(r.length,f)),this._animationSpiderfy(r,m)}},unspiderfy:function(r){this._group._inZoomAnimation||(this._animationUnspiderfy(r),this._group._spiderfied=null)},_generatePointsCircle:function(r,u){var c=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+r),f=c/this._2PI,m=this._2PI/r,p=[],_,v;for(f=Math.max(f,35),p.length=r,_=0;_<r;_++)v=this._circleStartAngle+_*m,p[_]=new L.Point(u.x+f*Math.cos(v),u.y+f*Math.sin(v))._round();return p},_generatePointsSpiral:function(r,u){var c=this._group.options.spiderfyDistanceMultiplier,f=c*this._spiralLengthStart,m=c*this._spiralFootSeparation,p=c*this._spiralLengthFactor*this._2PI,_=0,v=[],y;for(v.length=r,y=r;y>=0;y--)y<r&&(v[y]=new L.Point(u.x+f*Math.cos(_),u.y+f*Math.sin(_))._round()),_+=m/f+y*5e-4,f+=p/_;return v},_noanimationUnspiderfy:function(){var r=this._group,u=r._map,c=r._featureGroup,f=this.getAllChildMarkers(null,!0),m,p;for(r._ignoreMove=!0,this.setOpacity(1),p=f.length-1;p>=0;p--)m=f[p],c.removeLayer(m),m._preSpiderfyLatlng&&(m.setLatLng(m._preSpiderfyLatlng),delete m._preSpiderfyLatlng),m.setZIndexOffset&&m.setZIndexOffset(0),m._spiderLeg&&(u.removeLayer(m._spiderLeg),delete m._spiderLeg);r.fire("unspiderfied",{cluster:this,markers:f}),r._ignoreMove=!1,r._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(r,u){var c=this._group,f=c._map,m=c._featureGroup,p=this._group.options.spiderLegPolylineOptions,_,v,y,w;for(c._ignoreMove=!0,_=0;_<r.length;_++)w=f.layerPointToLatLng(u[_]),v=r[_],y=new L.Polyline([this._latlng,w],p),f.addLayer(y),v._spiderLeg=y,v._preSpiderfyLatlng=v._latlng,v.setLatLng(w),v.setZIndexOffset&&v.setZIndexOffset(1e6),m.addLayer(v);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:r})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(r,u){var c=this,f=this._group,m=f._map,p=f._featureGroup,_=this._latlng,v=m.latLngToLayerPoint(_),y=L.Path.SVG,w=L.extend({},this._group.options.spiderLegPolylineOptions),P=w.opacity,k,C,O,E,V,I;for(P===void 0&&(P=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),y?(w.opacity=0,w.className=(w.className||"")+" leaflet-cluster-spider-leg"):w.opacity=P,f._ignoreMove=!0,k=0;k<r.length;k++)C=r[k],I=m.layerPointToLatLng(u[k]),O=new L.Polyline([_,I],w),m.addLayer(O),C._spiderLeg=O,y&&(E=O._path,V=E.getTotalLength()+.1,E.style.strokeDasharray=V,E.style.strokeDashoffset=V),C.setZIndexOffset&&C.setZIndexOffset(1e6),C.clusterHide&&C.clusterHide(),p.addLayer(C),C._setPos&&C._setPos(v);for(f._forceLayout(),f._animationStart(),k=r.length-1;k>=0;k--)I=m.layerPointToLatLng(u[k]),C=r[k],C._preSpiderfyLatlng=C._latlng,C.setLatLng(I),C.clusterShow&&C.clusterShow(),y&&(O=C._spiderLeg,E=O._path,E.style.strokeDashoffset=0,O.setStyle({opacity:P}));this.setOpacity(.3),f._ignoreMove=!1,setTimeout(function(){f._animationEnd(),f.fire("spiderfied",{cluster:c,markers:r})},200)},_animationUnspiderfy:function(r){var u=this,c=this._group,f=c._map,m=c._featureGroup,p=r?f._latLngToNewLayerPoint(this._latlng,r.zoom,r.center):f.latLngToLayerPoint(this._latlng),_=this.getAllChildMarkers(null,!0),v=L.Path.SVG,y,w,P,k,C,O;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),w=_.length-1;w>=0;w--)y=_[w],y._preSpiderfyLatlng&&(y.closePopup(),y.setLatLng(y._preSpiderfyLatlng),delete y._preSpiderfyLatlng,O=!0,y._setPos&&(y._setPos(p),O=!1),y.clusterHide&&(y.clusterHide(),O=!1),O&&m.removeLayer(y),v&&(P=y._spiderLeg,k=P._path,C=k.getTotalLength()+.1,k.style.strokeDashoffset=C,P.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout(function(){var E=0;for(w=_.length-1;w>=0;w--)y=_[w],y._spiderLeg&&E++;for(w=_.length-1;w>=0;w--)y=_[w],y._spiderLeg&&(y.clusterShow&&y.clusterShow(),y.setZIndexOffset&&y.setZIndexOffset(0),E>1&&m.removeLayer(y),f.removeLayer(y._spiderLeg),delete y._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:u,markers:_})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(r){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(r))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(r){this._spiderfied&&this._spiderfied.unspiderfy(r)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(r){r._spiderLeg&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow(),r.setZIndexOffset&&r.setZIndexOffset(0),this._map.removeLayer(r._spiderLeg),delete r._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(r){return r?r instanceof L.MarkerClusterGroup?r=r._topClusterLevel.getAllChildMarkers():r instanceof L.LayerGroup?r=r._layers:r instanceof L.MarkerCluster?r=r.getAllChildMarkers():r instanceof L.Marker&&(r=[r]):r=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(r),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(r),this},_flagParentsIconsNeedUpdate:function(r){var u,c;for(u in r)for(c=r[u].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(r){var u,c;for(u in r)c=r[u],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(r,u){var c=this.options.icon;return L.setOptions(c,r),this.setIcon(c),u&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=a,s.MarkerCluster=h,Object.defineProperty(s,"__esModule",{value:!0})})})(Ma,Ma.exports);delete en.Icon.Default.prototype._getIconUrl;en.Icon.Default.mergeOptions({iconRetinaUrl:new URL("./assets/marker-icon-2x.png",import.meta.url).href,iconUrl:new URL("./assets/marker-icon.png",import.meta.url).href,shadowUrl:new URL("./assets/marker-shadow.png",import.meta.url).href});function __(i){let n={},s={};const{children:a,...h}=i;return Object.entries(h).forEach(([r,u])=>{r.startsWith("on")?s={...s,[r]:u}:n={...n,[r]:u}}),{clusterProps:n,clusterEvents:s}}function g_(i,n){const{clusterProps:s,clusterEvents:a}=__(i),h=new en.MarkerClusterGroup(s);return Object.entries(a).forEach(([r,u])=>{const c=`cluster${r.substring(2).toLowerCase()}`;h.on(c,u)}),gi(h,hl(n,{layerContainer:h}))}const v_=(i,n,s)=>{},y_=r_(g_,v_),x_=new en.Icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});function w_({movements:i=[],onClick:n=()=>{}}){return M.jsx(y_,{chunkedLoading:!0,showCoverageOnHover:!1,maxClusterRadius:50,children:i.map(s=>{const a=s.event_id?String(s.event_id):`${s.person_id}_${s.event_type}_${s.date}`;return M.jsx(f_,{position:[s._markerLat,s._markerLng],icon:x_,eventHandlers:{click:()=>{n(s.person_id)}},children:M.jsxs(d_,{children:[M.jsx("strong",{children:Array.isArray(s.names)&&s.names.length?s.names[0]:"Unknown"}),M.jsx("br",{}),s.event_type," (",s.date&&new Date(s.date).getFullYear()||"?",")"]})},a)})})}function L_({center:i}){const n=l_();return S.useEffect(()=>{i&&Array.isArray(i)&&n.setView(i,n.getZoom())},[i,n]),null}function Qs({movements:i=[],onMarkerClick:n=()=>{},activePersonIds:s=new Set}){const a=S.useRef(null);S.useEffect(()=>{a.current&&setTimeout(()=>{a.current.invalidateSize()},200)},[]);const h=Me.useMemo(()=>{const _=new Map;return i.forEach(v=>{if(!v.location)return;const y=String(v.location).trim().toLowerCase();_.has(y)||_.set(y,[]),_.get(y).push(v)}),Array.from(_.entries()).filter(([v,y])=>y.some(w=>w.latitude===void 0||w.longitude===void 0||w.latitude===null||w.longitude===null||isNaN(Number(w.latitude))||isNaN(Number(w.longitude)))).map(([v])=>v)},[i]),[r,u]=S.useState({});S.useEffect(()=>{h.length!==0&&(u({}),h.forEach(async _=>{if(!_||_.length>150){u(v=>({...v,[_]:null}));return}try{const v=await fetch(`/api/geocode?place=${encodeURIComponent(_)}`);if(!v.ok){const k=await v.text();u(C=>({...C,[_]:null}));return}const y=await v.json(),{latitude:w,longitude:P}=y;u(w!==void 0&&P!==void 0?k=>({...k,[_]:[w,P]}):k=>({...k,[_]:null}))}catch{u(y=>({...y,[_]:null}))}}))},[h]);const c=Me.useMemo(()=>i.map(_=>{let[v,y]=[_.latitude,_.longitude];if((v===void 0||y===void 0||v===null||y===null||isNaN(Number(v))||isNaN(Number(y)))&&_.location){const w=String(_.location).trim().toLowerCase();Array.isArray(r[w])&&([v,y]=r[w])}return{..._,_markerLat:v,_markerLng:y}}),[i,r]),f=c.filter(_=>typeof _._markerLat=="number"&&typeof _._markerLng=="number"&&!isNaN(_._markerLat)&&!isNaN(_._markerLng));S.useEffect(()=>{},[c,f.length]);const m=f.length>0?[f[0]._markerLat,f[0]._markerLng]:[37.8,-96],p=S.useCallback(()=>{a.current&&a.current.setView(m,4)},[m]);return M.jsxs("div",{className:"relative h-full w-full",children:[M.jsxs(c_,{center:m,zoom:4,scrollWheelZoom:!0,zoomControl:!1,style:{height:"100%",width:"100%",background:"#101010"},whenCreated:_=>a.current=_,tabIndex:0,"aria-label":"Migration map",children:[M.jsx(m_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),M.jsx(p_,{position:"bottomleft"}),M.jsx(L_,{center:m}),M.jsx(w_,{movements:f,onClick:n})]},`map-${f.length}`),!1,M.jsx("button",{onClick:p,className:"absolute right-4 top-4 z-50 bg-black/70 text-white text-xs px-3 py-2 rounded-md border border-white/10 hover:bg-black/80","aria-label":"Reset map view",children:"Reset View"})]})}function P_(i){return M.jsx(Qs,{...i})}function b_(i){return M.jsx(Qs,{...i})}function T_(i){return M.jsx(Qs,{...i})}function A_(){const{treeId:i}=$h(),{filters:n,mode:s,setIsDrawerOpen:a,clearAll:h,setFilters:r,setMode:u}=jt(),{toggleSection:c}=Ee(),f=Bp(n,400),{movements:m,loading:p,error:_}=Vp(i,f,s),v=s==="family"?b_:s==="compare"?T_:P_,y=!p&&!_&&m.length===0,[w,P]=S.useState(!0);zp(n,r,s,u);const k=S.useCallback(C=>{const O=C.key.toLowerCase();O==="l"&&P(E=>!E),O==="f"&&(a(!0),c("filters")),O==="r"&&h()},[a,h,c]);return S.useEffect(()=>(window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)),[k]),M.jsxs("div",{className:"relative w-full h-full",children:[M.jsx(qp,{}),M.jsx(v,{movements:m}),M.jsx($p,{loading:p,error:_,empty:y}),w&&M.jsx(Zp,{}),M.jsx("button",{onClick:()=>P(C=>!C),className:"absolute right-4 bottom-4 z-50 bg-black/70 text-white text-xs px-3 py-2 rounded-md border border-white/10 hover:bg-black/80","aria-pressed":w,children:w?"Hide Legend (L)":"Show Legend (L)"})]})}export{A_ as default};
