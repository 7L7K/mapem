import{r as b,R as Yn,a as zh,c as Vh,g as Zh,j as A,u as Ae,b as vs,s as Nh,d as ka,e as Fh,f as jh,h as Wh,F as Hh}from"./index-ca53c5cd.js";import{c as Oa}from"./clsx-0839fdbe.js";function Da(i,n){const s=b.useRef(n);b.useEffect(function(){n!==s.current&&i.attributionControl!=null&&(s.current!=null&&i.attributionControl.removeAttribution(s.current),n!=null&&i.attributionControl.addAttribution(n)),s.current=n},[i,n])}const Uh=1;function Gh(i){return Object.freeze({__version:Uh,map:i})}function Kh(i,n){return Object.freeze({...i,...n})}const Ra=b.createContext(null),Ia=Ra.Provider;function Gi(){const i=b.useContext(Ra);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function qh(i){function n(s,r){const{instance:u,context:c}=i(s).current;return b.useImperativeHandle(r,()=>u),s.children==null?null:Yn.createElement(Ia,{value:c},s.children)}return b.forwardRef(n)}function $h(i){function n(s,r){const[u,c]=b.useState(!1),{instance:h}=i(s,c).current;b.useImperativeHandle(r,()=>h),b.useEffect(function(){u&&h.update()},[h,u,s.children]);const f=h._contentNode;return f?zh.createPortal(s.children,f):null}return b.forwardRef(n)}function Ba(i){function n(s,r){const{instance:u}=i(s).current;return b.useImperativeHandle(r,()=>u),null}return b.forwardRef(n)}function Yh(i){return function(s){const r=Gi(),u=i(s,r),{instance:c}=u.current,h=b.useRef(s.position),{position:f}=s;return b.useEffect(function(){return c.addTo(r.map),function(){c.remove()}},[r.map,c]),b.useEffect(function(){f!=null&&f!==h.current&&(c.setPosition(f),h.current=f)},[c,f]),u}}function za(i,n){const s=b.useRef();b.useEffect(function(){return n!=null&&i.instance.on(n),s.current=n,function(){s.current!=null&&i.instance.off(s.current),s.current=null}},[i,n])}function ys(i,n){const s=i.pane??n.pane;return s?{...i,pane:s}:i}function Xh(i,n){return function(r,u){const c=Gi(),h=i(ys(r,c),c);return Da(c.map,r.attribution),za(h.current,r.eventHandlers),n(h.current,c,r,u),h}}var Xn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,n){(function(s,r){r(n)})(Vh,function(s){var r="1.9.4";function u(t){var e,o,a,l;for(o=1,a=arguments.length;o<a;o++){l=arguments[o];for(e in l)t[e]=l[e]}return t}var c=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function h(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var a=o.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(o.call(arguments)):arguments)}}var f=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function _(t,e,o){var a,l,m,g;return g=function(){a=!1,l&&(m.apply(o,l),l=!1)},m=function(){a?l=arguments:(t.apply(o,arguments),setTimeout(g,e),a=!0)},m}function p(t,e,o){var a=e[1],l=e[0],m=a-l;return t===a&&o?t:((t-l)%m+m)%m+l}function v(){return!1}function y(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t){return w(t).split(/\s+/)}function C(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?c(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function O(t,e,o){var a=[];for(var l in t)a.push(encodeURIComponent(o?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!e||e.indexOf("?")===-1?"?":"&")+a.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function D(t,e){return t.replace(M,function(o,a){var l=e[a];if(l===void 0)throw new Error("No value provided for variable "+o);return typeof l=="function"&&(l=l(e)),l})}var k=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function K(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function N(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Y=0;function F(t){var e=+new Date,o=Math.max(0,16-(e-Y));return Y=e+o,window.setTimeout(t,o)}var nt=window.requestAnimationFrame||N("RequestAnimationFrame")||F,ft=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function st(t,e,o){if(o&&nt===F)t.call(e);else return nt.call(window,h(t,e))}function gt(t){t&&ft.call(window,t)}var tn={__proto__:null,extend:u,create:c,bind:h,get lastId(){return f},stamp:d,throttle:_,wrapNum:p,falseFn:v,formatNum:y,trim:w,splitWords:S,setOptions:C,getParamString:O,template:D,isArray:k,indexOf:K,emptyImageUrl:R,requestFn:nt,cancelFn:ft,requestAnimFrame:st,cancelAnimFrame:gt};function bt(){}bt.extend=function(t){var e=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,a=c(o);a.constructor=e,e.prototype=a;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(e[l]=this[l]);return t.statics&&u(e,t.statics),t.includes&&(eo(t.includes),u.apply(null,[a].concat(t.includes))),u(a,t),delete a.statics,delete a.includes,a.options&&(a.options=o.options?c(o.options):{},u(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,g=a._initHooks.length;m<g;m++)a._initHooks[m].call(this)}},e},bt.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},bt.mergeOptions=function(t){return u(this.prototype.options,t),this},bt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function eo(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=k(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xt={on:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e);else{t=S(t);for(var l=0,m=t.length;l<m;l++)this._on(t[l],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],e);else{t=S(t);for(var l=arguments.length===1,m=0,g=t.length;m<g;m++)l?this._off(t[m]):this._off(t[m],e,o)}return this},_on:function(t,e,o,a){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var l={fn:e,ctx:o};a&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,e,o){var a,l,m;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(l=0,m=a.length;l<m;l++)a[l].fn=v;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var g=this._listens(t,e,o);if(g!==!1){var x=a[g];this._firingCount&&(x.fn=v,this._events[t]=a=a.slice()),a.splice(g,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var a=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var m=0,g=l.length;m<g;m++){var x=l[m],P=x.fn;x.once&&this.off(t,P,x.ctx),P.call(x.ctx||this,a)}this._firingCount--}}return o&&this._propagateEvent(a),this},listens:function(t,e,o,a){typeof t!="string"&&console.warn('"string" type argument expected');var l=e;typeof e!="function"&&(a=!!e,l=void 0,o=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,l,o)!==!1)return!0;if(a){for(var g in this._eventParents)if(this._eventParents[g].listens(t,e,o,a))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;o===this&&(o=void 0);for(var l=0,m=a.length;l<m;l++)if(a[l].fn===e&&a[l].ctx===o)return l;return!1},once:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e,!0);else{t=S(t);for(var l=0,m=t.length;l<m;l++)this._on(t[l],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};xt.addEventListener=xt.on,xt.removeEventListener=xt.clearAllEventListeners=xt.off,xt.addOneTimeEventListener=xt.once,xt.fireEvent=xt.fire,xt.hasEventListeners=xt.listens;var ot=bt.extend(xt);function B(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var fe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(t){t=Z(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function Z(t,e,o){return t instanceof B?t:k(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,o)}function Q(t,e){if(t)for(var o=e?[t,e]:t,a=0,l=o.length;a<l;a++)this.extend(o[a])}Q.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof B||typeof t[0]=="number"||"x"in t)e=o=Z(t);else if(t=wt(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof B?t=Z(t):t=wt(t),t instanceof Q?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=wt(t);var e=this.min,o=this.max,a=t.min,l=t.max,m=l.x>=e.x&&a.x<=o.x,g=l.y>=e.y&&a.y<=o.y;return m&&g},overlaps:function(t){t=wt(t);var e=this.min,o=this.max,a=t.min,l=t.max,m=l.x>e.x&&a.x<o.x,g=l.y>e.y&&a.y<o.y;return m&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,a=Math.abs(e.x-o.x)*t,l=Math.abs(e.y-o.y)*t;return wt(Z(e.x-a,e.y-l),Z(o.x+a,o.y+l))},equals:function(t){return t?(t=wt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function wt(t,e){return!t||t instanceof Q?t:new Q(t,e)}function Pt(t,e){if(t)for(var o=e?[t,e]:t,a=0,l=o.length;a<l;a++)this.extend(o[a])}Pt.prototype={extend:function(t){var e=this._southWest,o=this._northEast,a,l;if(t instanceof $)a=t,l=t;else if(t instanceof Pt){if(a=t._southWest,l=t._northEast,!a||!l)return this}else return t?this.extend(U(t)||ut(t)):this;return!e&&!o?(this._southWest=new $(a.lat,a.lng),this._northEast=new $(l.lat,l.lng)):(e.lat=Math.min(a.lat,e.lat),e.lng=Math.min(a.lng,e.lng),o.lat=Math.max(l.lat,o.lat),o.lng=Math.max(l.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,a=Math.abs(e.lat-o.lat)*t,l=Math.abs(e.lng-o.lng)*t;return new Pt(new $(e.lat-a,e.lng-l),new $(o.lat+a,o.lng+l))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof $||"lat"in t?t=U(t):t=ut(t);var e=this._southWest,o=this._northEast,a,l;return t instanceof Pt?(a=t.getSouthWest(),l=t.getNorthEast()):a=l=t,a.lat>=e.lat&&l.lat<=o.lat&&a.lng>=e.lng&&l.lng<=o.lng},intersects:function(t){t=ut(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),l=t.getNorthEast(),m=l.lat>=e.lat&&a.lat<=o.lat,g=l.lng>=e.lng&&a.lng<=o.lng;return m&&g},overlaps:function(t){t=ut(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),l=t.getNorthEast(),m=l.lat>e.lat&&a.lat<o.lat,g=l.lng>e.lng&&a.lng<o.lng;return m&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ut(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(t,e){return t instanceof Pt?t:new Pt(t,e)}function $(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}$.prototype={equals:function(t,e){if(!t)return!1;t=U(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return qt.distance(this,U(t))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return ut([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function U(t,e,o){return t instanceof $?t:k(t)&&typeof t[0]!="object"?t.length===3?new $(t[0],t[1],t[2]):t.length===2?new $(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new $(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new $(t,e,o)}var jt={latLngToPoint:function(t,e){var o=this.projection.project(t),a=this.scale(e);return this.transformation._transform(o,a)},pointToLatLng:function(t,e){var o=this.scale(e),a=this.transformation.untransform(t,o);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),a=this.transformation.transform(e.min,o),l=this.transformation.transform(e.max,o);return new Q(a,l)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?p(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?p(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new $(o,e,a)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),a=e.lat-o.lat,l=e.lng-o.lng;if(a===0&&l===0)return t;var m=t.getSouthWest(),g=t.getNorthEast(),x=new $(m.lat-a,m.lng-l),P=new $(g.lat-a,g.lng-l);return new Pt(x,P)}},qt=u({},jt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,a=t.lat*o,l=e.lat*o,m=Math.sin((e.lat-t.lat)*o/2),g=Math.sin((e.lng-t.lng)*o/2),x=m*m+Math.cos(a)*Math.cos(l)*g*g,P=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*P}}),io=6378137,en={R:io,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,a=Math.max(Math.min(o,t.lat),-o),l=Math.sin(a*e);return new B(this.R*t.lng*e,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var e=180/Math.PI;return new $((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=io*Math.PI;return new Q([-t,-t],[t,t])}()};function nn(t,e,o,a){if(k(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=a}nn.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function De(t,e,o,a){return new nn(t,e,o,a)}var sn=u({},qt,{code:"EPSG:3857",projection:en,transformation:function(){var t=.5/(Math.PI*en.R);return De(t,.5,-t,.5)}()}),dl=u({},sn,{code:"EPSG:900913"});function no(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function so(t,e){var o="",a,l,m,g,x,P;for(a=0,m=t.length;a<m;a++){for(x=t[a],l=0,g=x.length;l<g;l++)P=x[l],o+=(l?"L":"M")+P.x+" "+P.y;o+=e?I.svg?"z":"x":""}return o||"M0 0"}var on=document.documentElement.style,di="ActiveXObject"in window,ml=di&&!document.addEventListener,oo="msLaunchUri"in navigator&&!("documentMode"in document),rn=Rt("webkit"),ro=Rt("android"),ao=Rt("android 2")||Rt("android 3"),pl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_l=ro&&Rt("Google")&&pl<537&&!("AudioNode"in window),an=!!window.opera,uo=!oo&&Rt("chrome"),lo=Rt("gecko")&&!rn&&!an&&!di,gl=!uo&&Rt("safari"),ho=Rt("phantom"),co="OTransition"in on,vl=navigator.platform.indexOf("Win")===0,fo=di&&"transition"in on,un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ao,mo="MozPerspective"in on,yl=!window.L_DISABLE_3D&&(fo||un||mo)&&!co&&!ho,Re=typeof orientation<"u"||Rt("mobile"),xl=Re&&rn,wl=Re&&un,po=!window.PointerEvent&&window.MSPointerEvent,_o=!!(window.PointerEvent||po),go="ontouchstart"in window||!!window.TouchEvent,Pl=!window.L_NO_TOUCH&&(go||_o),Tl=Re&&an,bl=Re&&lo,Ll=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Sl=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,e),window.removeEventListener("testPassiveEventSupport",v,e)}catch{}return t}(),Cl=function(){return!!document.createElement("canvas").getContext}(),ln=!!(document.createElementNS&&no("svg").createSVGRect),Ml=!!ln&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Al=!ln&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),El=navigator.platform.indexOf("Mac")===0,kl=navigator.platform.indexOf("Linux")===0;function Rt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var I={ie:di,ielt9:ml,edge:oo,webkit:rn,android:ro,android23:ao,androidStock:_l,opera:an,chrome:uo,gecko:lo,safari:gl,phantom:ho,opera12:co,win:vl,ie3d:fo,webkit3d:un,gecko3d:mo,any3d:yl,mobile:Re,mobileWebkit:xl,mobileWebkit3d:wl,msPointer:po,pointer:_o,touch:Pl,touchNative:go,mobileOpera:Tl,mobileGecko:bl,retina:Ll,passiveEvents:Sl,canvas:Cl,svg:ln,vml:Al,inlineSvg:Ml,mac:El,linux:kl},vo=I.msPointer?"MSPointerDown":"pointerdown",yo=I.msPointer?"MSPointerMove":"pointermove",xo=I.msPointer?"MSPointerUp":"pointerup",wo=I.msPointer?"MSPointerCancel":"pointercancel",hn={touchstart:vo,touchmove:yo,touchend:xo,touchcancel:wo},Po={touchstart:zl,touchmove:mi,touchend:mi,touchcancel:mi},de={},To=!1;function Ol(t,e,o){return e==="touchstart"&&Bl(),Po[e]?(o=Po[e].bind(this,o),t.addEventListener(hn[e],o,!1),o):(console.warn("wrong event specified:",e),v)}function Dl(t,e,o){if(!hn[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(hn[e],o,!1)}function Rl(t){de[t.pointerId]=t}function Il(t){de[t.pointerId]&&(de[t.pointerId]=t)}function bo(t){delete de[t.pointerId]}function Bl(){To||(document.addEventListener(vo,Rl,!0),document.addEventListener(yo,Il,!0),document.addEventListener(xo,bo,!0),document.addEventListener(wo,bo,!0),To=!0)}function mi(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in de)e.touches.push(de[o]);e.changedTouches=[e],t(e)}}function zl(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&dt(e),mi(t,e)}function Vl(t){var e={},o,a;for(a in t)o=t[a],e[a]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Zl=200;function Nl(t,e){t.addEventListener("dblclick",e);var o=0,a;function l(m){if(m.detail!==1){a=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var g=Ao(m);if(!(g.some(function(P){return P instanceof HTMLLabelElement&&P.attributes.for})&&!g.some(function(P){return P instanceof HTMLInputElement||P instanceof HTMLSelectElement}))){var x=Date.now();x-o<=Zl?(a++,a===2&&e(Vl(m))):a=1,o=x}}}return t.addEventListener("click",l),{dblclick:e,simDblclick:l}}function Fl(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var cn=gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ie=gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lo=Ie==="webkitTransition"||Ie==="OTransition"?Ie+"End":"transitionend";function So(t){return typeof t=="string"?document.getElementById(t):t}function Be(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);o=a?a[e]:null}return o==="auto"?null:o}function q(t,e,o){var a=document.createElement(t);return a.className=e||"",o&&o.appendChild(a),a}function tt(t){var e=t.parentNode;e&&e.removeChild(t)}function pi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function me(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function pe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function fn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=_i(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function W(t,e){if(t.classList!==void 0)for(var o=S(e),a=0,l=o.length;a<l;a++)t.classList.add(o[a]);else if(!fn(t,e)){var m=_i(t);dn(t,(m?m+" ":"")+e)}}function rt(t,e){t.classList!==void 0?t.classList.remove(e):dn(t,w((" "+_i(t)+" ").replace(" "+e+" "," ")))}function dn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function _i(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Lt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&jl(t,e)}function jl(t,e){var o=!1,a="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(a)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function gi(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function ee(t,e,o){var a=e||new B(0,0);t.style[cn]=(I.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(o?" scale("+o+")":"")}function lt(t,e){t._leaflet_pos=e,I.any3d?ee(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ie(t){return t._leaflet_pos||new B(0,0)}var ze,Ve,mn;if("onselectstart"in document)ze=function(){j(window,"selectstart",dt)},Ve=function(){X(window,"selectstart",dt)};else{var Ze=gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ze=function(){if(Ze){var t=document.documentElement.style;mn=t[Ze],t[Ze]="none"}},Ve=function(){Ze&&(document.documentElement.style[Ze]=mn,mn=void 0)}}function pn(){j(window,"dragstart",dt)}function _n(){X(window,"dragstart",dt)}var vi,gn;function vn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(yi(),vi=t,gn=t.style.outlineStyle,t.style.outlineStyle="none",j(window,"keydown",yi))}function yi(){vi&&(vi.style.outlineStyle=gn,vi=void 0,gn=void 0,X(window,"keydown",yi))}function Co(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function yn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Wl={__proto__:null,TRANSFORM:cn,TRANSITION:Ie,TRANSITION_END:Lo,get:So,getStyle:Be,create:q,remove:tt,empty:pi,toFront:me,toBack:pe,hasClass:fn,addClass:W,removeClass:rt,setClass:dn,getClass:_i,setOpacity:Lt,testProp:gi,setTransform:ee,setPosition:lt,getPosition:ie,get disableTextSelection(){return ze},get enableTextSelection(){return Ve},disableImageDrag:pn,enableImageDrag:_n,preventOutline:vn,restoreOutline:yi,getSizedParentNode:Co,getScale:yn};function j(t,e,o,a){if(e&&typeof e=="object")for(var l in e)wn(t,l,e[l],o);else{e=S(e);for(var m=0,g=e.length;m<g;m++)wn(t,e[m],o,a)}return this}var It="_leaflet_events";function X(t,e,o,a){if(arguments.length===1)Mo(t),delete t[It];else if(e&&typeof e=="object")for(var l in e)Pn(t,l,e[l],o);else if(e=S(e),arguments.length===2)Mo(t,function(x){return K(e,x)!==-1});else for(var m=0,g=e.length;m<g;m++)Pn(t,e[m],o,a);return this}function Mo(t,e){for(var o in t[It]){var a=o.split(/\d/)[0];(!e||e(a))&&Pn(t,a,null,null,o)}}var xn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wn(t,e,o,a){var l=e+d(o)+(a?"_"+d(a):"");if(t[It]&&t[It][l])return this;var m=function(x){return o.call(a||t,x||window.event)},g=m;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?m=Ol(t,e,m):I.touch&&e==="dblclick"?m=Nl(t,m):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(xn[e]||e,m,I.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(m=function(x){x=x||window.event,bn(t,x)&&g(x)},t.addEventListener(xn[e],m,!1)):t.addEventListener(e,g,!1):t.attachEvent("on"+e,m),t[It]=t[It]||{},t[It][l]=m}function Pn(t,e,o,a,l){l=l||e+d(o)+(a?"_"+d(a):"");var m=t[It]&&t[It][l];if(!m)return this;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?Dl(t,e,m):I.touch&&e==="dblclick"?Fl(t,m):"removeEventListener"in t?t.removeEventListener(xn[e]||e,m,!1):t.detachEvent("on"+e,m),t[It][l]=null}function ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Tn(t){return wn(t,"wheel",ne),this}function Ne(t){return j(t,"mousedown touchstart dblclick contextmenu",ne),t._leaflet_disable_click=!0,this}function dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function se(t){return dt(t),ne(t),this}function Ao(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function Eo(t,e){if(!e)return new B(t.clientX,t.clientY);var o=yn(e),a=o.boundingClientRect;return new B((t.clientX-a.left)/o.x-e.clientLeft,(t.clientY-a.top)/o.y-e.clientTop)}var Hl=I.linux&&I.chrome?window.devicePixelRatio:I.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ko(t){return I.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Hl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function bn(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Ul={__proto__:null,on:j,off:X,stopPropagation:ne,disableScrollPropagation:Tn,disableClickPropagation:Ne,preventDefault:dt,stop:se,getPropagationPath:Ao,getMousePosition:Eo,getWheelDelta:ko,isExternalTarget:bn,addListener:j,removeListener:X},Oo=ot.extend({run:function(t,e,o,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=ie(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=st(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),lt(this._el,o),this.fire("step")},_complete:function(){gt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),G=ot.extend({options:{crs:sn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=C(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ie&&I.any3d&&!I.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),j(this._proxy,Lo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(U(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=u({animate:o.animate},o.zoom),o.pan=u({animate:o.animate,duration:o.duration},o.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var a=this.getZoomScale(e),l=this.getSize().divideBy(2),m=t instanceof B?t:this.latLngToContainerPoint(t),g=m.subtract(l).multiplyBy(1-1/a),x=this.containerPointToLatLng(l.add(g));return this.setView(x,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ut(t);var o=Z(e.paddingTopLeft||e.padding||[0,0]),a=Z(e.paddingBottomRight||e.padding||[0,0]),l=this.getBoundsZoom(t,!1,o.add(a));if(l=typeof e.maxZoom=="number"?Math.min(e.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var m=a.subtract(o).divideBy(2),g=this.project(t.getSouthWest(),l),x=this.project(t.getNorthEast(),l),P=this.unproject(g.add(x).divideBy(2).add(m),l);return{center:P,zoom:l}},fitBounds:function(t,e){if(t=ut(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=Z(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){W(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!I.any3d)return this.setView(t,e,o);this._stop();var a=this.project(this.getCenter()),l=this.project(t),m=this.getSize(),g=this._zoom;t=U(t),e=e===void 0?g:e;var x=Math.max(m.x,m.y),P=x*this.getZoomScale(g,e),T=l.distanceTo(a)||1,E=1.42,V=E*E;function H(ht){var ki=ht?-1:1,Dh=ht?P:x,Rh=P*P-x*x+ki*V*V*T*T,Ih=2*Dh*V*T,In=Rh/Ih,fr=Math.sqrt(In*In+1)-In,Bh=fr<1e-9?-18:Math.log(fr);return Bh}function vt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function ct(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Ct(ht){return vt(ht)/ct(ht)}var Tt=H(0);function we(ht){return x*(ct(Tt)/ct(Tt+E*ht))}function Ah(ht){return x*(ct(Tt)*Ct(Tt+E*ht)-vt(Tt))/V}function Eh(ht){return 1-Math.pow(1-ht,1.5)}var kh=Date.now(),hr=(H(1)-Tt)/E,Oh=o.duration?1e3*o.duration:1e3*hr*.8;function cr(){var ht=(Date.now()-kh)/Oh,ki=Eh(ht)*hr;ht<=1?(this._flyToFrame=st(cr,this),this._move(this.unproject(a.add(l.subtract(a).multiplyBy(Ah(ki)/T)),g),this.getScaleZoom(x/we(ki),g),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),cr.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=ut(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),a=this._limitCenter(o,this._zoom,ut(t));return o.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=Z(e.paddingTopLeft||e.padding||[0,0]),a=Z(e.paddingBottomRight||e.padding||[0,0]),l=this.project(this.getCenter()),m=this.project(t),g=this.getPixelBounds(),x=wt([g.min.add(o),g.max.subtract(a)]),P=x.getSize();if(!x.contains(m)){this._enforcingBounds=!0;var T=m.subtract(x.getCenter()),E=x.extend(m).getSize().subtract(P);l.x+=T.x<0?-E.x:E.x,l.y+=T.y<0?-E.y:E.y,this.panTo(this.unproject(l),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=e.divideBy(2).round(),l=o.divideBy(2).round(),m=a.subtract(l);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=h(this._handleGeolocationResponse,this),o=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,a=new $(e,o),l=a.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var g=this.getBoundsZoom(l);this.setView(a,m.maxZoom?Math.min(g,m.maxZoom):g)}var x={latlng:a,bounds:l,timestamp:t.timestamp};for(var P in t.coords)typeof t.coords[P]=="number"&&(x[P]=t.coords[P]);this.fire("locationfound",x)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(gt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)tt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=q("div",o,e||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Pt(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=ut(t),o=Z(o||[0,0]);var a=this.getZoom()||0,l=this.getMinZoom(),m=this.getMaxZoom(),g=t.getNorthWest(),x=t.getSouthEast(),P=this.getSize().subtract(o),T=wt(this.project(x,a),this.project(g,a)).getSize(),E=I.any3d?this.options.zoomSnap:1,V=P.x/T.x,H=P.y/T.y,vt=e?Math.max(V,H):Math.min(V,H);return a=this.getScaleZoom(vt,a),E&&(a=Math.round(a/(E/100))*(E/100),a=e?Math.ceil(a/E)*E:Math.floor(a/E)*E),Math.max(l,Math.min(m,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new Q(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var a=o.zoom(t*o.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(Z(t),e)},layerPointToLatLng:function(t){var e=Z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(U(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ut(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return Eo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=So(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");j(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&I.any3d,W(t,"leaflet-container"+(I.touch?" leaflet-touch":"")+(I.retina?" leaflet-retina":"")+(I.ielt9?" leaflet-oldie":"")+(I.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Be(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),lt(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(W(t.markerPane,"leaflet-zoom-hide"),W(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){lt(this._mapPane,new B(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,o)._move(t,e)._moveEnd(l),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,a){e===void 0&&(e=this._zoom);var l=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?o&&o.pinch&&this.fire("zoom",o):((l||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return gt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){lt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?X:j;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),I.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){gt(this._resizeRequest),this._resizeRequest=st(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],a,l=e==="mouseout"||e==="mouseover",m=t.target||t.srcElement,g=!1;m;){if(a=this._targets[d(m)],a&&(e==="click"||e==="preclick")&&this._draggableMoved(a)){g=!0;break}if(a&&a.listens(e,!0)&&(l&&!bn(m,t)||(o.push(a),l))||m===this._container)break;m=m.parentNode}return!o.length&&!g&&!l&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&vn(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var a=u({},t);a.type="preclick",this._fireDOMEvent(a,a.type,o)}var l=this._findEventTargets(t,e);if(o){for(var m=[],g=0;g<o.length;g++)o[g].listens(e,!0)&&m.push(o[g]);l=m.concat(l)}if(l.length){e==="contextmenu"&&dt(t);var x=l[0],P={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var T=x.getLatLng&&(!x._radius||x._radius<=10);P.containerPoint=T?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),P.layerPoint=this.containerPointToLayerPoint(P.containerPoint),P.latlng=T?x.getLatLng():this.layerPointToLatLng(P.layerPoint)}for(g=0;g<l.length;g++)if(l[g].fire(e,P,!0),P.originalEvent._stopped||l[g].options.bubblingMouseEvents===!1&&K(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ie(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return wt([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var a=this.project(t,e),l=this.getSize().divideBy(2),m=new Q(a.subtract(l),a.add(l)),g=this._getBoundsOffset(m,o,e);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?t:this.unproject(a.add(g),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),a=new Q(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,o){var a=wt(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),l=a.min.subtract(t.min),m=a.max.subtract(t.max),g=this._rebound(l.x,-m.x),x=this._rebound(l.y,-m.y);return new B(g,x)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),a=I.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=q("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=cn,a=this._proxy.style[o];ee(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),a===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ee(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),l=this._getCenterOffset(t)._divideBy(1-1/a);return o.animate!==!0&&!this.getSize().contains(l)?!1:(st(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,a){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,W(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gl(t,e){return new G(t,e)}var kt=bt.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),a=t._controlCorners[o];return W(e,"leaflet-control"),o.indexOf("bottom")!==-1?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Fe=function(t){return new kt(t)};G.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=q("div",e+"control-container",this._container);function a(l,m){var g=e+l+" "+e+m;t[l+m]=q("div",g,o)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)tt(this._controlCorners[t]);tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Do=kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,a){return o<a?-1:a<o?1:0}},initialize:function(t,e,o){C(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return kt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){W(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(W(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=q("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Tn(e);var a=this._section=q("section",t+"-list");o&&(this._map.on("click",this.collapse,this),j(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=q("a",t+"-toggle",e);l.href="#",l.title="Layers",l.setAttribute("role","button"),j(l,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){dt(m),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=q("div",t+"-base",a),this._separator=q("div",t+"-separator",a),this._overlaysList=q("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(h(function(a,l){return this.options.sortFunction(a.layer,l.layer,a.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pi(this._baseLayersList),pi(this._overlaysList),this._layerControlInputs=[];var t,e,o,a,l=0;for(o=0;o<this._layers.length;o++)a=this._layers[o],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,l+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=o,a.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=o):a=this._createRadioElement("leaflet-base-layers_"+d(this),o),this._layerControlInputs.push(a),a.layerId=d(t.layer),j(a,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var m=document.createElement("span");e.appendChild(m),m.appendChild(a),m.appendChild(l);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,a=[],l=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)e=t[m],o=this._getLayer(e.layerId).layer,e.checked?a.push(o):e.checked||l.push(o);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])&&this._map.removeLayer(l[m]);for(m=0;m<a.length;m++)this._map.hasLayer(a[m])||this._map.addLayer(a[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,a=this._map.getZoom(),l=t.length-1;l>=0;l--)e=t[l],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&a<o.options.minZoom||o.options.maxZoom!==void 0&&a>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,j(t,"click",dt),this.expand();var e=this;setTimeout(function(){X(t,"click",dt),e._preventClick=!1})}}),Kl=function(t,e,o){return new Do(t,e,o)},Ln=kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=q("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,a,l){var m=q("a",o,a);return m.innerHTML=t,m.href="#",m.title=e,m.setAttribute("role","button"),m.setAttribute("aria-label",e),Ne(m),j(m,"click",se),j(m,"click",l,this),j(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";rt(this._zoomInButton,e),rt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(W(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(W(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});G.mergeOptions({zoomControl:!0}),G.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ln,this.addControl(this.zoomControl))});var ql=function(t){return new Ln(t)},Ro=kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=q("div",e),a=this.options;return this._addScales(a,e+"-line",o),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=q("div",e,o)),t.imperial&&(this._iScale=q("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,a,l;e>5280?(o=e/5280,a=this._getRoundNum(o),this._updateScale(this._iScale,a+" mi",a/o)):(l=this._getRoundNum(e),this._updateScale(this._iScale,l+" ft",l/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),$l=function(t){return new Ro(t)},Yl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Sn=kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(I.inlineSvg?Yl+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=q("div","leaflet-control-attribution"),Ne(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});G.mergeOptions({attributionControl:!0}),G.addInitHook(function(){this.options.attributionControl&&new Sn().addTo(this)});var Xl=function(t){return new Sn(t)};kt.Layers=Do,kt.Zoom=Ln,kt.Scale=Ro,kt.Attribution=Sn,Fe.layers=Kl,Fe.zoom=ql,Fe.scale=$l,Fe.attribution=Xl;var Bt=bt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bt.addTo=function(t,e){return t.addHandler(e,this),this};var Jl={Events:xt},Io=I.touch?"touchstart mousedown":"mousedown",$t=ot.extend({options:{clickTolerance:3},initialize:function(t,e,o,a){C(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||(j(this._dragStartTarget,Io,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($t._dragging===this&&this.finishDrag(!0),X(this._dragStartTarget,Io,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!fn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){$t._dragging===this&&this.finishDrag();return}if(!($t._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&($t._dragging=this,this._preventOutline&&vn(this._element),pn(),ze(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=Co(this._element);this._startPoint=new B(e.clientX,e.clientY),this._startPos=ie(this._element),this._parentScale=yn(o);var a=t.type==="mousedown";j(document,a?"mousemove":"touchmove",this._onMove,this),j(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new B(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,W(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),W(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),lt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),X(document,"mousemove touchmove",this._onMove,this),X(document,"mouseup touchend touchcancel",this._onUp,this),_n(),Ve();var e=this._moved&&this._moving;this._moving=!1,$t._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Bo(t,e,o){var a,l=[1,4,2,8],m,g,x,P,T,E,V,H;for(m=0,E=t.length;m<E;m++)t[m]._code=oe(t[m],e);for(x=0;x<4;x++){for(V=l[x],a=[],m=0,E=t.length,g=E-1;m<E;g=m++)P=t[m],T=t[g],P._code&V?T._code&V||(H=xi(T,P,V,e,o),H._code=oe(H,e),a.push(H)):(T._code&V&&(H=xi(T,P,V,e,o),H._code=oe(H,e),a.push(H)),a.push(P));t=a}return t}function zo(t,e){var o,a,l,m,g,x,P,T,E;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var V=U([0,0]),H=ut(t),vt=H.getNorthWest().distanceTo(H.getSouthWest())*H.getNorthEast().distanceTo(H.getNorthWest());vt<1700&&(V=Cn(t));var ct=t.length,Ct=[];for(o=0;o<ct;o++){var Tt=U(t[o]);Ct.push(e.project(U([Tt.lat-V.lat,Tt.lng-V.lng])))}for(x=P=T=0,o=0,a=ct-1;o<ct;a=o++)l=Ct[o],m=Ct[a],g=l.y*m.x-m.y*l.x,P+=(l.x+m.x)*g,T+=(l.y+m.y)*g,x+=g*3;x===0?E=Ct[0]:E=[P/x,T/x];var we=e.unproject(Z(E));return U([we.lat+V.lat,we.lng+V.lng])}function Cn(t){for(var e=0,o=0,a=0,l=0;l<t.length;l++){var m=U(t[l]);e+=m.lat,o+=m.lng,a++}return U([e/a,o/a])}var Ql={__proto__:null,clipPolygon:Bo,polygonCenter:zo,centroid:Cn};function Vo(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=ih(t,o),t=eh(t,o),t}function Zo(t,e,o){return Math.sqrt(je(t,e,o,!0))}function th(t,e,o){return je(t,e,o)}function eh(t,e){var o=t.length,a=typeof Uint8Array!=void 0+""?Uint8Array:Array,l=new a(o);l[0]=l[o-1]=1,Mn(t,l,e,0,o-1);var m,g=[];for(m=0;m<o;m++)l[m]&&g.push(t[m]);return g}function Mn(t,e,o,a,l){var m=0,g,x,P;for(x=a+1;x<=l-1;x++)P=je(t[x],t[a],t[l],!0),P>m&&(g=x,m=P);m>o&&(e[g]=1,Mn(t,e,o,a,g),Mn(t,e,o,g,l))}function ih(t,e){for(var o=[t[0]],a=1,l=0,m=t.length;a<m;a++)nh(t[a],t[l])>e&&(o.push(t[a]),l=a);return l<m-1&&o.push(t[m-1]),o}var No;function Fo(t,e,o,a,l){var m=a?No:oe(t,o),g=oe(e,o),x,P,T;for(No=g;;){if(!(m|g))return[t,e];if(m&g)return!1;x=m||g,P=xi(t,e,x,o,l),T=oe(P,o),x===m?(t=P,m=T):(e=P,g=T)}}function xi(t,e,o,a,l){var m=e.x-t.x,g=e.y-t.y,x=a.min,P=a.max,T,E;return o&8?(T=t.x+m*(P.y-t.y)/g,E=P.y):o&4?(T=t.x+m*(x.y-t.y)/g,E=x.y):o&2?(T=P.x,E=t.y+g*(P.x-t.x)/m):o&1&&(T=x.x,E=t.y+g*(x.x-t.x)/m),new B(T,E,l)}function oe(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function nh(t,e){var o=e.x-t.x,a=e.y-t.y;return o*o+a*a}function je(t,e,o,a){var l=e.x,m=e.y,g=o.x-l,x=o.y-m,P=g*g+x*x,T;return P>0&&(T=((t.x-l)*g+(t.y-m)*x)/P,T>1?(l=o.x,m=o.y):T>0&&(l+=g*T,m+=x*T)),g=t.x-l,x=t.y-m,a?g*g+x*x:new B(l,m)}function St(t){return!k(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function jo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function Wo(t,e){var o,a,l,m,g,x,P,T;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var E=U([0,0]),V=ut(t),H=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());H<1700&&(E=Cn(t));var vt=t.length,ct=[];for(o=0;o<vt;o++){var Ct=U(t[o]);ct.push(e.project(U([Ct.lat-E.lat,Ct.lng-E.lng])))}for(o=0,a=0;o<vt-1;o++)a+=ct[o].distanceTo(ct[o+1])/2;if(a===0)T=ct[0];else for(o=0,m=0;o<vt-1;o++)if(g=ct[o],x=ct[o+1],l=g.distanceTo(x),m+=l,m>a){P=(m-a)/l,T=[x.x-P*(x.x-g.x),x.y-P*(x.y-g.y)];break}var Tt=e.unproject(Z(T));return U([Tt.lat+E.lat,Tt.lng+E.lng])}var sh={__proto__:null,simplify:Vo,pointToSegmentDistance:Zo,closestPointOnSegment:th,clipSegment:Fo,_getEdgeIntersection:xi,_getBitCode:oe,_sqClosestPointOnSegment:je,isFlat:St,_flat:jo,polylineCenter:Wo},An={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new $(t.y,t.x)},bounds:new Q([-180,-90],[180,90])},En={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,a=t.lat*e,l=this.R_MINOR/o,m=Math.sqrt(1-l*l),g=m*Math.sin(a),x=Math.tan(Math.PI/4-a/2)/Math.pow((1-g)/(1+g),m/2);return a=-o*Math.log(Math.max(x,1e-10)),new B(t.lng*e*o,a)},unproject:function(t){for(var e=180/Math.PI,o=this.R,a=this.R_MINOR/o,l=Math.sqrt(1-a*a),m=Math.exp(-t.y/o),g=Math.PI/2-2*Math.atan(m),x=0,P=.1,T;x<15&&Math.abs(P)>1e-7;x++)T=l*Math.sin(g),T=Math.pow((1-T)/(1+T),l/2),P=Math.PI/2-2*Math.atan(m*T)-g,g+=P;return new $(g*e,t.x*e/o)}},oh={__proto__:null,LonLat:An,Mercator:En,SphericalMercator:en},rh=u({},qt,{code:"EPSG:3395",projection:En,transformation:function(){var t=.5/(Math.PI*En.R);return De(t,.5,-t,.5)}()}),Ho=u({},qt,{code:"EPSG:4326",projection:An,transformation:De(1/180,1,-1/180,.5)}),ah=u({},jt,{projection:An,transformation:De(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(o*o+a*a)},infinite:!0});jt.Earth=qt,jt.EPSG3395=rh,jt.EPSG3857=sn,jt.EPSG900913=dl,jt.EPSG4326=Ho,jt.Simple=ah;var Ot=ot.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});G.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?k(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var a in this._zoomBoundLayers){var l=this._zoomBoundLayers[a].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),e=l.maxZoom===void 0?e:Math.max(e,l.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _e=Ot.extend({initialize:function(t,e){C(this,e),this._layers={};var o,a;if(t)for(o=0,a=t.length;o<a;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,a;for(o in this._layers)a=this._layers[o],a[t]&&a[t].apply(a,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),uh=function(t,e){return new _e(t,e)},Wt=_e.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),_e.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),_e.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Pt;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),lh=function(t,e){return new Wt(t,e)},ge=bt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var o=this.options,a=o[e+"Size"];typeof a=="number"&&(a=[a,a]);var l=Z(a),m=Z(e==="shadow"&&o.shadowAnchor||o.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return I.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function hh(t){return new ge(t)}var We=ge.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof We.imagePath!="string"&&(We.imagePath=this._detectIconPath()),(this.options.imagePath||We.imagePath)+ge.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,a,l){var m=a.exec(o);return m&&m[l]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=q("div","leaflet-default-icon-path",document.body),e=Be(t,"background-image")||Be(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Uo=Bt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new $t(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),W(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,a=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,m=ie(e._icon),g=o.getPixelBounds(),x=o.getPixelOrigin(),P=wt(g.min._subtract(x).add(l),g.max._subtract(x).subtract(l));if(!P.contains(m)){var T=Z((Math.max(P.max.x,m.x)-P.max.x)/(g.max.x-P.max.x)-(Math.min(P.min.x,m.x)-P.min.x)/(g.min.x-P.min.x),(Math.max(P.max.y,m.y)-P.max.y)/(g.max.y-P.max.y)-(Math.min(P.min.y,m.y)-P.min.y)/(g.min.y-P.min.y)).multiplyBy(a);o.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),lt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=st(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(gt(this._panRequest),this._panRequest=st(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,a=ie(e._icon),l=e._map.layerPointToLatLng(a);o&&lt(o,a),e._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){gt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),wi=Ot.extend({options:{icon:new We,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){C(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),a=!1;o!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),W(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&j(o,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),m=!1;l!==this._shadow&&(this._removeShadow(),m=!0),l&&(W(l,e),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&X(this._icon,"focus",this._panOnFocus,this),tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&lt(this._icon,t),this._shadow&&lt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(W(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Uo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Uo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Lt(this._icon,t),this._shadow&&Lt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?Z(e.iconSize):Z(0,0),a=e.iconAnchor?Z(e.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:o.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ch(t,e){return new wi(t,e)}var Yt=Ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pi=Yt.extend({options:{fill:!0,radius:10},initialize:function(t,e){C(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Yt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),a=[t+o,e+o];this._pxBounds=new Q(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fh(t,e){return new Pi(t,e)}var kn=Pi.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=u({},o,{radius:e})),C(this,e),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Pt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Yt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,a=o.options.crs;if(a.distance===qt.distance){var l=Math.PI/180,m=this._mRadius/qt.R/l,g=o.project([e+m,t]),x=o.project([e-m,t]),P=g.add(x).divideBy(2),T=o.unproject(P).lat,E=Math.acos((Math.cos(m*l)-Math.sin(e*l)*Math.sin(T*l))/(Math.cos(e*l)*Math.cos(T*l)))/l;(isNaN(E)||E===0)&&(E=m/Math.cos(Math.PI/180*e)),this._point=P.subtract(o.getPixelOrigin()),this._radius=isNaN(E)?0:P.x-o.project([T,t-E]).x,this._radiusY=P.y-g.y}else{var V=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(V).x}this._updateBounds()}});function dh(t,e,o){return new kn(t,e,o)}var Ht=Yt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){C(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,a=je,l,m,g=0,x=this._parts.length;g<x;g++)for(var P=this._parts[g],T=1,E=P.length;T<E;T++){l=P[T-1],m=P[T];var V=a(t,l,m,!0);V<e&&(e=V,o=a(t,l,m))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Pt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=St(t),a=0,l=t.length;a<l;a++)o?(e[a]=U(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var a=t[0]instanceof $,l=t.length,m,g;if(a){for(g=[],m=0;m<l;m++)g[m]=this._map.latLngToLayerPoint(t[m]),o.extend(g[m]);e.push(g)}else for(m=0;m<l;m++)this._projectLatlngs(t[m],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,a,l,m,g,x,P;for(o=0,l=0,m=this._rings.length;o<m;o++)for(P=this._rings[o],a=0,g=P.length;a<g-1;a++)x=Fo(P[a],P[a+1],t,a,!0),x&&(e[l]=e[l]||[],e[l].push(x[0]),(x[1]!==P[a+1]||a===g-2)&&(e[l].push(x[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,a=t.length;o<a;o++)t[o]=Vo(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,a,l,m,g,x,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,m=this._parts.length;o<m;o++)for(x=this._parts[o],a=0,g=x.length,l=g-1;a<g;l=a++)if(!(!e&&a===0)&&Zo(t,x[l],x[a])<=P)return!0;return!1}});function mh(t,e){return new Ht(t,e)}Ht._flat=jo;var ve=Ht.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ht.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof $&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){Ht.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new B(e,e);if(t=new Q(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,l=this._rings.length,m;a<l;a++)m=Bo(this._rings[a],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,a,l,m,g,x,P,T;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,P=this._parts.length;m<P;m++)for(o=this._parts[m],g=0,T=o.length,x=T-1;g<T;x=g++)a=o[g],l=o[x],a.y>t.y!=l.y>t.y&&t.x<(l.x-a.x)*(t.y-a.y)/(l.y-a.y)+a.x&&(e=!e);return e||Ht.prototype._containsPoint.call(this,t,!0)}});function ph(t,e){return new ve(t,e)}var Ut=Wt.extend({initialize:function(t,e){C(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=k(t)?t:t.features,o,a,l;if(e){for(o=0,a=e.length;o<a;o++)l=e[o],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var g=Ti(t,m);return g?(g.feature=Si(t),g.defaultOptions=g.options,this.resetStyle(g),m.onEachFeature&&m.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Ti(t,e){var o=t.type==="Feature"?t.geometry:t,a=o?o.coordinates:null,l=[],m=e&&e.pointToLayer,g=e&&e.coordsToLatLng||On,x,P,T,E;if(!a&&!o)return null;switch(o.type){case"Point":return x=g(a),Go(m,t,x,e);case"MultiPoint":for(T=0,E=a.length;T<E;T++)x=g(a[T]),l.push(Go(m,t,x,e));return new Wt(l);case"LineString":case"MultiLineString":return P=bi(a,o.type==="LineString"?0:1,g),new Ht(P,e);case"Polygon":case"MultiPolygon":return P=bi(a,o.type==="Polygon"?1:2,g),new ve(P,e);case"GeometryCollection":for(T=0,E=o.geometries.length;T<E;T++){var V=Ti({geometry:o.geometries[T],type:"Feature",properties:t.properties},e);V&&l.push(V)}return new Wt(l);case"FeatureCollection":for(T=0,E=o.features.length;T<E;T++){var H=Ti(o.features[T],e);H&&l.push(H)}return new Wt(l);default:throw new Error("Invalid GeoJSON object.")}}function Go(t,e,o,a){return t?t(e,o):new wi(o,a&&a.markersInheritOptions&&a)}function On(t){return new $(t[1],t[0],t[2])}function bi(t,e,o){for(var a=[],l=0,m=t.length,g;l<m;l++)g=e?bi(t[l],e-1,o):(o||On)(t[l]),a.push(g);return a}function Dn(t,e){return t=U(t),t.alt!==void 0?[y(t.lng,e),y(t.lat,e),y(t.alt,e)]:[y(t.lng,e),y(t.lat,e)]}function Li(t,e,o,a){for(var l=[],m=0,g=t.length;m<g;m++)l.push(e?Li(t[m],St(t[m])?0:e-1,o,a):Dn(t[m],a));return!e&&o&&l.length>0&&l.push(l[0].slice()),l}function ye(t,e){return t.feature?u({},t.feature,{geometry:e}):Si(e)}function Si(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Rn={toGeoJSON:function(t){return ye(this,{type:"Point",coordinates:Dn(this.getLatLng(),t)})}};wi.include(Rn),kn.include(Rn),Pi.include(Rn),Ht.include({toGeoJSON:function(t){var e=!St(this._latlngs),o=Li(this._latlngs,e?1:0,!1,t);return ye(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),ve.include({toGeoJSON:function(t){var e=!St(this._latlngs),o=e&&!St(this._latlngs[0]),a=Li(this._latlngs,o?2:e?1:0,!0,t);return e||(a=[a]),ye(this,{type:(o?"Multi":"")+"Polygon",coordinates:a})}}),_e.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),ye(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",a=[];return this.eachLayer(function(l){if(l.toGeoJSON){var m=l.toGeoJSON(t);if(o)a.push(m.geometry);else{var g=Si(m);g.type==="FeatureCollection"?a.push.apply(a,g.features):a.push(g)}}}),o?ye(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function Ko(t,e){return new Ut(t,e)}var _h=Ko,Ci=Ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=ut(e),C(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(W(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&me(this._image),this},bringToBack:function(){return this._map&&pe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ut(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:q("img");if(W(e,"leaflet-image-layer"),this._zoomAnimated&&W(e,"leaflet-zoom-animated"),this.options.className&&W(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onload=h(this.fire,this,"load"),e.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ee(this._image,o,e)},_reset:function(){var t=this._image,e=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();lt(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){Lt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),gh=function(t,e,o){return new Ci(t,e,o)},qo=Ci.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:q("video");if(W(e,"leaflet-image-layer"),this._zoomAnimated&&W(e,"leaflet-zoom-animated"),this.options.className&&W(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onloadeddata=h(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),a=[],l=0;l<o.length;l++)a.push(o[l].src);this._url=o.length>0?a:[e.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var g=q("source");g.src=this._url[m],e.appendChild(g)}}});function vh(t,e,o){return new qo(t,e,o)}var $o=Ci.extend({_initImage:function(){var t=this._image=this._url;W(t,"leaflet-image-layer"),this._zoomAnimated&&W(t,"leaflet-zoom-animated"),this.options.className&&W(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function yh(t,e,o){return new $o(t,e,o)}var zt=Ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof $||k(t))?(this._latlng=U(t),C(this,e)):(C(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Lt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Lt(this._container,1),this.bringToFront(),this.options.interactive&&(W(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Lt(this._container,0),this._removeTimeout=setTimeout(h(tt,void 0,this._container),200)):tt(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&me(this._container),this},bringToBack:function(){return this._map&&pe(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Wt){e=null;var o=this._source._layers;for(var a in o)if(o[a]._map){e=o[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=Z(this.options.offset),o=this._getAnchor();this._zoomAnimated?lt(this._container,t.add(o)):e=e.add(t).add(o);var a=this._containerBottom=-e.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});G.include({_initOverlay:function(t,e,o,a){var l=e;return l instanceof t||(l=new t(a).setContent(e)),o&&l.setLatLng(o),l}}),Ot.include({_initOverlay:function(t,e,o,a){var l=o;return l instanceof t?(C(l,a),l._source=this):(l=e&&!a?e:new t(a,this),l.setContent(o)),l}});var Mi=zt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,zt.prototype.openOn.call(this,t)},onAdd:function(t){zt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yt||this._source.on("preclick",ne))},onRemove:function(t){zt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yt||this._source.off("preclick",ne))},getEvents:function(){var t=zt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=q("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=q("div",t+"-content-wrapper",e);if(this._contentNode=q("div",t+"-content",o),Ne(e),Tn(this._contentNode),j(e,"contextmenu",ne),this._tipContainer=q("div",t+"-tip-container",e),this._tip=q("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=q("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',j(a,"click",function(l){dt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,l=this.options.maxHeight,m="leaflet-popup-scrolled";l&&a>l?(e.height=l+"px",W(t,m)):rt(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();lt(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Be(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,a=this._containerWidth,l=new B(this._containerLeft,-o-this._containerBottom);l._add(ie(this._container));var m=t.layerPointToContainerPoint(l),g=Z(this.options.autoPanPadding),x=Z(this.options.autoPanPaddingTopLeft||g),P=Z(this.options.autoPanPaddingBottomRight||g),T=t.getSize(),E=0,V=0;m.x+a+P.x>T.x&&(E=m.x+a-T.x+P.x),m.x-E-x.x<0&&(E=m.x-x.x),m.y+o+P.y>T.y&&(V=m.y+o-T.y+P.y),m.y-V-x.y<0&&(V=m.y-x.y),(E||V)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([E,V]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xh=function(t,e){return new Mi(t,e)};G.mergeOptions({closePopupOnClick:!0}),G.include({openPopup:function(t,e,o){return this._initOverlay(Mi,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ot.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Mi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Wt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){se(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Yt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ai=zt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){zt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){zt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=zt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=q("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,a=this._map,l=this._container,m=a.latLngToContainerPoint(a.getCenter()),g=a.layerPointToContainerPoint(t),x=this.options.direction,P=l.offsetWidth,T=l.offsetHeight,E=Z(this.options.offset),V=this._getAnchor();x==="top"?(e=P/2,o=T):x==="bottom"?(e=P/2,o=0):x==="center"?(e=P/2,o=T/2):x==="right"?(e=0,o=T/2):x==="left"?(e=P,o=T/2):g.x<m.x?(x="right",e=0,o=T/2):(x="left",e=P+(E.x+V.x)*2,o=T/2),t=t.subtract(Z(e,o,!0)).add(E).add(V),rt(l,"leaflet-tooltip-right"),rt(l,"leaflet-tooltip-left"),rt(l,"leaflet-tooltip-top"),rt(l,"leaflet-tooltip-bottom"),W(l,"leaflet-tooltip-"+x),lt(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Lt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wh=function(t,e){return new Ai(t,e)};G.include({openTooltip:function(t,e,o){return this._initOverlay(Ai,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ot.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ai,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Wt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(j(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),j(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,a;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var Yo=ge.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(pi(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var a=Z(o.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ph(t){return new Yo(t)}ge.Default=We;var He=Ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:I.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),tt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),a=0,l=e.length,m;a<l;a++)m=e[a].style.zIndex,e[a]!==this._container&&m&&(o=t(o,+m));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!I.ielt9){Lt(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var a in this._tiles){var l=this._tiles[a];if(!(!l.current||!l.loaded)){var m=Math.min(1,(t-l.loaded)/200);Lt(l.el,m),m<1?e=!0:(l.active?o=!0:this._onOpaqueTile(l),l.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(gt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=q("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(tt(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var a=this._levels[t],l=this._map;return a||(a=this._levels[t]={},a.el=q("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,l.getCenter(),l.getZoom()),v(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)tt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,a){var l=Math.floor(t/2),m=Math.floor(e/2),g=o-1,x=new B(+l,+m);x.z=+g;var P=this._tileCoordsToKey(x),T=this._tiles[P];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),g>a?this._retainParent(l,m,g,a):!1)},_retainChildren:function(t,e,o,a){for(var l=2*t;l<2*t+2;l++)for(var m=2*e;m<2*e+2;m++){var g=new B(l,m);g.z=o+1;var x=this._tileCoordsToKey(g),P=this._tiles[x];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);o+1<a&&this._retainChildren(l,m,o+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,a){var l=Math.round(e);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var m=this.options.updateWhenZooming&&l!==this._tileZoom;(!a||m)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var a=this._map.getZoomScale(o,t.zoom),l=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,o)).round();I.any3d?ee(t.el,l,a):lt(t.el,l)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),a=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(o,this._tileZoom),l=e.project(t,this._tileZoom).floor(),m=e.getSize().divideBy(a*2);return new Q(l.subtract(m),l.add(m))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(a),m=l.getCenter(),g=[],x=this.options.keepBuffer,P=new Q(l.getBottomLeft().subtract([x,-x]),l.getTopRight().add([x,-x]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var E=this._tiles[T].coords;(E.z!==this._tileZoom||!P.contains(new B(E.x,E.y)))&&(this._tiles[T].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var V=l.min.y;V<=l.max.y;V++)for(var H=l.min.x;H<=l.max.x;H++){var vt=new B(H,V);if(vt.z=this._tileZoom,!!this._isValidTile(vt)){var ct=this._tiles[this._tileCoordsToKey(vt)];ct?ct.current=!0:g.push(vt)}}if(g.sort(function(Tt,we){return Tt.distanceTo(m)-we.distanceTo(m)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ct=document.createDocumentFragment();for(H=0;H<g.length;H++)this._addTile(g[H],Ct);this._level.el.appendChild(Ct)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return ut(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),a=t.scaleBy(o),l=a.add(o),m=e.unproject(a,t.z),g=e.unproject(l,t.z);return[m,g]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new Pt(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new B(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(tt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){W(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=v,t.onmousemove=v,I.ielt9&&this.options.opacity<1&&Lt(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),a=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&st(h(this._tileReady,this,t,null,l)),lt(l,o),this._tiles[a]={el:l,coords:t,current:!0},e.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var a=this._tileCoordsToKey(t);o=this._tiles[a],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Lt(o.el,0),gt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(W(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),I.ielt9||!this._map._fadeAnimated?st(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?p(t.x,this._wrapX):t.x,this._wrapY?p(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new Q(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Th(t){return new He(t)}var xe=He.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=C(this,e),e.detectRetina&&I.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return j(o,"load",h(this._tileOnLoad,this,e,o)),j(o,"error",h(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:I.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return D(this._url,u(e,this.options))},_tileOnLoad:function(t,e){I.ielt9?setTimeout(h(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,a=this.options.zoomOffset;return o&&(t=e-t),t+a},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=v,e.onerror=v,!e.complete)){e.src=R;var o=this._tiles[t].coords;tt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",R),He.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===R))return He.prototype._tileReady.call(this,t,e,o)}});function Xo(t,e){return new xe(t,e)}var Jo=xe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=u({},this.defaultWmsParams);for(var a in e)a in this.options||(o[a]=e[a]);e=C(this,e);var l=e.detectRetina&&I.retina?2:1,m=this.getTileSize();o.width=m.x*l,o.height=m.y*l,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,xe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,a=wt(o.project(e[0]),o.project(e[1])),l=a.min,m=a.max,g=(this._wmsVersion>=1.3&&this._crs===Ho?[l.y,l.x,m.y,m.x]:[l.x,l.y,m.x,m.y]).join(","),x=xe.prototype.getTileUrl.call(this,t);return x+O(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function bh(t,e){return new Jo(t,e)}xe.WMS=Jo,Xo.wms=bh;var Gt=Ot.extend({options:{padding:.1},initialize:function(t){C(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),W(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,e),m=a.multiplyBy(-o).add(l).subtract(this._map._getNewPixelOrigin(t,e));I.any3d?ee(this._container,m,o):lt(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new Q(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qo=Gt.extend({options:{tolerance:0},getEvents:function(){var t=Gt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");j(t,"mousemove",this._onMouseMove,this),j(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),j(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){gt(this._redrawRequest),delete this._ctx,tt(this._container),X(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gt.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),a=I.retina?2:1;lt(e,t.min),e.width=a*o.x,e.height=a*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",I.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Gt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,a=e.prev;o?o.prev=a:this._drawLast=a,a?a.next=o:this._drawFirst=o,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],a,l;for(l=0;l<e.length;l++){if(a=Number(e[l]),isNaN(a))return;o.push(a)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||st(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,a,l,m,g=t._parts,x=g.length,P=this._ctx;if(x){for(P.beginPath(),o=0;o<x;o++){for(a=0,l=g[o].length;a<l;a++)m=g[o][a],P[a?"lineTo":"moveTo"](m.x,m.y);e&&P.closePath()}this._fillStroke(P,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,a=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||a)/a;l!==1&&(o.save(),o.scale(1,l)),o.beginPath(),o.arc(e.x,e.y/l,a,0,Math.PI*2,!1),l!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,a,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(a=o);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(rt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,a,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(e)&&(a=o);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(W(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(o)o.prev=a;else return;a?a.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(a)a.next=o;else return;o?o.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function tr(t){return I.canvas?new Qo(t):null}var Ue=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Lh={_initContainer:function(){this._container=q("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ue("shape");W(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ue("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;tt(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,a=t.options,l=t._container;l.stroked=!!a.stroke,l.filled=!!a.fill,a.stroke?(e||(e=t._stroke=Ue("stroke")),l.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=k(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(l.removeChild(e),t._stroke=null),a.fill?(o||(o=t._fill=Ue("fill")),l.appendChild(o),o.color=a.fillColor||a.color,o.opacity=a.fillOpacity):o&&(l.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),a=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+a+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){me(t._container)},_bringToBack:function(t){pe(t._container)}},Ei=I.vml?Ue:no,Ge=Gt.extend({_initContainer:function(){this._container=Ei("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ei("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tt(this._container),X(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),lt(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ei("path");t.options.className&&W(e,t.options.className),t.options.interactive&&W(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){tt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,so(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||o,l="a"+o+","+a+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+l+o*2+",0 "+l+-o*2+",0 ";this._setPath(t,m)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){me(t._path)},_bringToBack:function(t){pe(t._path)}});I.vml&&Ge.include(Lh);function er(t){return I.svg||I.vml?new Ge(t):null}G.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&tr(t)||er(t)}});var ir=ve.extend({initialize:function(t,e){ve.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ut(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Sh(t,e){return new ir(t,e)}Ge.create=Ei,Ge.pointsToPath=so,Ut.geometryToLayer=Ti,Ut.coordsToLatLng=On,Ut.coordsToLatLngs=bi,Ut.latLngToCoords=Dn,Ut.latLngsToCoords=Li,Ut.getFeature=ye,Ut.asFeature=Si,G.mergeOptions({boxZoom:!0});var nr=Bt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){j(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){X(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ze(),pn(),this._startPoint=this._map.mouseEventToContainerPoint(t),j(document,{contextmenu:se,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=q("div","leaflet-zoom-box",this._container),W(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new Q(this._point,this._startPoint),o=e.getSize();lt(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(tt(this._box),rt(this._container,"leaflet-crosshair")),Ve(),_n(),X(document,{contextmenu:se,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var e=new Pt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});G.addInitHook("addHandler","boxZoom",nr),G.mergeOptions({doubleClickZoom:!0});var sr=Bt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),a=e.options.zoomDelta,l=t.originalEvent.shiftKey?o-a:o+a;e.options.doubleClickZoom==="center"?e.setZoom(l):e.setZoomAround(t.containerPoint,l)}});G.addInitHook("addHandler","doubleClickZoom",sr),G.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var or=Bt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new $t(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}W(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ut(this._map.options.maxBounds);this._offsetLimit=wt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,a=this._draggable._newPos.x,l=(a-e+o)%t+e-o,m=(a+e+o)%t-e-o,g=Math.abs(l+o)<Math.abs(m+o)?l:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var e=this._map,o=e.options,a=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,g=o.easeLinearity,x=l.multiplyBy(g/m),P=x.distanceTo([0,0]),T=Math.min(o.inertiaMaxSpeed,P),E=x.multiplyBy(T/P),V=T/(o.inertiaDeceleration*g),H=E.multiplyBy(-V/2).round();!H.x&&!H.y?e.fire("moveend"):(H=e._limitOffset(H,e.options.maxBounds),st(function(){e.panBy(H,{duration:V,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});G.addInitHook("addHandler","dragging",or),G.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rr=Bt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),j(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),X(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,a,l;for(a=0,l=o.left.length;a<l;a++)e[o.left[a]]=[-1*t,0];for(a=0,l=o.right.length;a<l;a++)e[o.right[a]]=[t,0];for(a=0,l=o.down.length;a<l;a++)e[o.down[a]]=[0,t];for(a=0,l=o.up.length;a<l;a++)e[o.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,a,l;for(a=0,l=o.zoomIn.length;a<l;a++)e[o.zoomIn[a]]=t;for(a=0,l=o.zoomOut.length;a<l;a++)e[o.zoomOut[a]]=-t},_addHooks:function(){j(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){X(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,a;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(a=this._panKeys[e],t.shiftKey&&(a=Z(a).multiplyBy(3)),o.options.maxBounds&&(a=o._limitOffset(Z(a),o.options.maxBounds)),o.options.worldCopyJump){var l=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(a)));o.panTo(l)}else o.panBy(a)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;se(t)}}});G.addInitHook("addHandler","keyboard",rr),G.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ar=Bt.extend({addHooks:function(){j(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){X(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ko(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),a),se(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,m=o?Math.ceil(l/o)*o:l,g=t._limitZoom(e+(this._delta>0?m:-m))-e;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+g):t.setZoomAround(this._lastMousePos,e+g))}});G.addInitHook("addHandler","scrollWheelZoom",ar);var Ch=600;G.mergeOptions({tapHold:I.touchNative&&I.safari&&I.mobile,tapTolerance:15});var ur=Bt.extend({addHooks:function(){j(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){X(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new B(e.clientX,e.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(j(document,"touchend",dt),j(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Ch),j(document,"touchend touchcancel contextmenu",this._cancel,this),j(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){X(document,"touchend",dt),X(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),X(document,"touchend touchcancel contextmenu",this._cancel,this),X(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});G.addInitHook("addHandler","tapHold",ur),G.mergeOptions({touchZoom:I.touch,bounceAtZoomLimits:!0});var lr=Bt.extend({addHooks:function(){W(this._map._container,"leaflet-touch-zoom"),j(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),X(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(a)._divideBy(2))),this._startDist=o.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),j(document,"touchmove",this._onTouchMove,this),j(document,"touchend touchcancel",this._onTouchEnd,this),dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),l=o.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(l,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&l<1||this._zoom>e.getMaxZoom()&&l>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var m=o._add(a)._divideBy(2)._subtract(this._centerPoint);if(l===1&&m.x===0&&m.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),gt(this._animRequest);var g=h(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=st(g,this,!0),dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,gt(this._animRequest),X(document,"touchmove",this._onTouchMove,this),X(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});G.addInitHook("addHandler","touchZoom",lr),G.BoxZoom=nr,G.DoubleClickZoom=sr,G.Drag=or,G.Keyboard=rr,G.ScrollWheelZoom=ar,G.TapHold=ur,G.TouchZoom=lr,s.Bounds=Q,s.Browser=I,s.CRS=jt,s.Canvas=Qo,s.Circle=kn,s.CircleMarker=Pi,s.Class=bt,s.Control=kt,s.DivIcon=Yo,s.DivOverlay=zt,s.DomEvent=Ul,s.DomUtil=Wl,s.Draggable=$t,s.Evented=ot,s.FeatureGroup=Wt,s.GeoJSON=Ut,s.GridLayer=He,s.Handler=Bt,s.Icon=ge,s.ImageOverlay=Ci,s.LatLng=$,s.LatLngBounds=Pt,s.Layer=Ot,s.LayerGroup=_e,s.LineUtil=sh,s.Map=G,s.Marker=wi,s.Mixin=Jl,s.Path=Yt,s.Point=B,s.PolyUtil=Ql,s.Polygon=ve,s.Polyline=Ht,s.Popup=Mi,s.PosAnimation=Oo,s.Projection=oh,s.Rectangle=ir,s.Renderer=Gt,s.SVG=Ge,s.SVGOverlay=$o,s.TileLayer=xe,s.Tooltip=Ai,s.Transformation=nn,s.Util=tn,s.VideoOverlay=qo,s.bind=h,s.bounds=wt,s.canvas=tr,s.circle=dh,s.circleMarker=fh,s.control=Fe,s.divIcon=Ph,s.extend=u,s.featureGroup=lh,s.geoJSON=Ko,s.geoJson=_h,s.gridLayer=Th,s.icon=hh,s.imageOverlay=gh,s.latLng=U,s.latLngBounds=ut,s.layerGroup=uh,s.map=Gl,s.marker=ch,s.point=Z,s.polygon=ph,s.polyline=mh,s.popup=xh,s.rectangle=Sh,s.setOptions=C,s.stamp=d,s.svg=er,s.svgOverlay=yh,s.tileLayer=Xo,s.tooltip=wh,s.transformation=De,s.version=r,s.videoOverlay=vh;var Mh=window.L;s.noConflict=function(){return window.L=Mh,this},window.L=s})})(Xn,Xn.exports);var Ee=Xn.exports;const Jh=Zh(Ee);function Ki(i,n,s){return Object.freeze({instance:i,context:n,container:s})}function qi(i,n){return n==null?function(r,u){const c=b.useRef();return c.current||(c.current=i(r,u)),c}:function(r,u){const c=b.useRef();c.current||(c.current=i(r,u));const h=b.useRef(r),{instance:f}=c.current;return b.useEffect(function(){h.current!==r&&(n(f,r,h.current),h.current=r)},[f,r,u]),c}}function Qh(i,n){b.useEffect(function(){return(n.layerContainer??n.map).addLayer(i.instance),function(){var c;(c=n.layerContainer)==null||c.removeLayer(i.instance),n.map.removeLayer(i.instance)}},[n,i])}function Va(i){return function(s){const r=Gi(),u=i(ys(s,r),r);return Da(r.map,s.attribution),za(u.current,s.eventHandlers),Qh(u.current,r),u}}function tc(i){function n(u,c){return Ki(i(u),c)}const s=qi(n),r=Yh(s);return Ba(r)}function ec(i,n){const s=qi(i,n),r=Va(s);return qh(r)}function ic(i,n){const s=qi(i),r=Xh(s,n);return $h(r)}function nc(i,n){const s=qi(i,n),r=Va(s);return Ba(r)}function sc(i,n,s){const{opacity:r,zIndex:u}=n;r!=null&&r!==s.opacity&&i.setOpacity(r),u!=null&&u!==s.zIndex&&i.setZIndex(u)}function oc(){return Gi().map}function Jn(){return Jn=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i},Jn.apply(this,arguments)}function rc({bounds:i,boundsOptions:n,center:s,children:r,className:u,id:c,placeholder:h,style:f,whenReady:d,zoom:_,...p},v){const[y]=b.useState({className:u,id:c,style:f}),[w,S]=b.useState(null);b.useImperativeHandle(v,()=>(w==null?void 0:w.map)??null,[w]);const C=b.useCallback(M=>{if(M!==null&&w===null){const D=new Ee.Map(M,p);s!=null&&_!=null?D.setView(s,_):i!=null&&D.fitBounds(i,n),d!=null&&D.whenReady(d),S(Gh(D))}},[]);b.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const O=w?Yn.createElement(Ia,{value:w},r):h??null;return Yn.createElement("div",Jn({},y,{ref:C}),O)}const ac=b.forwardRef(rc),uc=ec(function({position:n,...s},r){const u=new Ee.Marker(n,s);return Ki(u,Kh(r,{overlayContainer:u}))},function(n,s,r){s.position!==r.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==r.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==r.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==r.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==r.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),lc=ic(function(n,s){const r=new Ee.Popup(n,s.overlayContainer);return Ki(r,s)},function(n,s,{position:r},u){b.useEffect(function(){const{instance:h}=n;function f(_){_.popup===h&&(h.update(),u(!0))}function d(_){_.popup===h&&u(!1)}return s.map.on({popupopen:f,popupclose:d}),s.overlayContainer==null?(r!=null&&h.setLatLng(r),h.openOn(s.map)):s.overlayContainer.bindPopup(h),function(){var p;s.map.off({popupopen:f,popupclose:d}),(p=s.overlayContainer)==null||p.unbindPopup(),s.map.removeLayer(h)}},[n,s,u,r])}),hc=nc(function({url:n,...s},r){const u=new Ee.TileLayer(n,ys(s,r));return Ki(u,r)},function(n,s,r){sc(n,s,r);const{url:u}=s;u!=null&&u!==r.url&&n.setUrl(u)}),cc=tc(function(n){return new Ee.Control.Zoom(n)});const fc=new Jh.Icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});function dc({center:i}){const n=oc();return b.useEffect(()=>{i&&Array.isArray(i)&&(n.setView(i,n.getZoom()),console.log(" [MigrationMap] Re-centering map to:",i))},[i,n]),null}function mc({movements:i=[],center:n=[37.8,-96],onMarkerClick:s=()=>{},activePersonIds:r=new Set}){const u=b.useRef(null);return b.useEffect(()=>{u.current&&setTimeout(()=>{u.current.invalidateSize(),console.log(" [MigrationMap] Forcing map redraw (invalidateSize)")},200)},[]),A.jsxs(ac,{center:n,zoom:4,scrollWheelZoom:!0,zoomControl:!1,style:{height:"100%",width:"100%",position:"relative",zIndex:10,backgroundColor:"#101010"},whenCreated:c=>u.current=c,children:[A.jsx(hc,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),A.jsx(cc,{position:"bottomleft"}),A.jsx(dc,{center:n}),i.map((c,h)=>{if(!c.latitude||!c.longitude)return null;const f=[c.latitude,c.longitude];return r.has(c.person_id),A.jsx(uc,{position:f,icon:fc,eventHandlers:{click:()=>s(c.person_id)},children:A.jsx(lc,{children:A.jsxs("div",{children:[A.jsx("strong",{children:c.person_name})," ",A.jsx("br",{}),c.event_type," (",c.year,")"]})})},`marker-${h}`)})]},`map-${i.length}`)}const xs=b.createContext({});function ws(i){const n=b.useRef(null);return n.current===null&&(n.current=i()),n.current}const Ps=typeof window<"u",Za=Ps?b.useLayoutEffect:b.useEffect,$i=b.createContext(null),Ts=b.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class pc extends b.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const r=s.offsetParent,u=r instanceof HTMLElement&&r.offsetWidth||0,c=this.props.sizeRef.current;c.height=s.offsetHeight||0,c.width=s.offsetWidth||0,c.top=s.offsetTop,c.left=s.offsetLeft,c.right=u-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _c({children:i,isPresent:n,anchorX:s}){const r=b.useId(),u=b.useRef(null),c=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=b.useContext(Ts);return b.useInsertionEffect(()=>{const{width:f,height:d,top:_,left:p,right:v}=c.current;if(n||!u.current||!f||!d)return;const y=s==="left"?`left: ${p}`:`right: ${v}`;u.current.dataset.motionPopId=r;const w=document.createElement("style");return h&&(w.nonce=h),document.head.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${_}px !important;
          }
        `),()=>{document.head.removeChild(w)}},[n]),A.jsx(pc,{isPresent:n,childRef:u,sizeRef:c,children:b.cloneElement(i,{ref:u})})}const gc=({children:i,initial:n,isPresent:s,onExitComplete:r,custom:u,presenceAffectsLayout:c,mode:h,anchorX:f})=>{const d=ws(vc),_=b.useId();let p=!0,v=b.useMemo(()=>(p=!1,{id:_,initial:n,isPresent:s,custom:u,onExitComplete:y=>{d.set(y,!0);for(const w of d.values())if(!w)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[s,d,r]);return c&&p&&(v={...v}),b.useMemo(()=>{d.forEach((y,w)=>d.set(w,!1))},[s]),b.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),h==="popLayout"&&(i=A.jsx(_c,{isPresent:s,anchorX:f,children:i})),A.jsx($i.Provider,{value:v,children:i})};function vc(){return new Map}function Na(i=!0){const n=b.useContext($i);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:u}=n,c=b.useId();b.useEffect(()=>{if(i)return u(c)},[i]);const h=b.useCallback(()=>i&&r&&r(c),[c,r,i]);return!s&&r?[!1,h]:[!0]}const Oi=i=>i.key||"";function dr(i){const n=[];return b.Children.forEach(i,s=>{b.isValidElement(s)&&n.push(s)}),n}const yc=({children:i,custom:n,initial:s=!0,onExitComplete:r,presenceAffectsLayout:u=!0,mode:c="sync",propagate:h=!1,anchorX:f="left"})=>{const[d,_]=Na(h),p=b.useMemo(()=>dr(i),[i]),v=h&&!d?[]:p.map(Oi),y=b.useRef(!0),w=b.useRef(p),S=ws(()=>new Map),[C,O]=b.useState(p),[M,D]=b.useState(p);Za(()=>{y.current=!1,w.current=p;for(let R=0;R<M.length;R++){const N=Oi(M[R]);v.includes(N)?S.delete(N):S.get(N)!==!0&&S.set(N,!1)}},[M,v.length,v.join("-")]);const k=[];if(p!==C){let R=[...p];for(let N=0;N<M.length;N++){const Y=M[N],F=Oi(Y);v.includes(F)||(R.splice(N,0,Y),k.push(Y))}return c==="wait"&&k.length&&(R=k),D(dr(R)),O(p),null}const{forceRender:K}=b.useContext(xs);return A.jsx(A.Fragment,{children:M.map(R=>{const N=Oi(R),Y=h&&!d?!1:p===M||v.includes(N),F=()=>{if(S.has(N))S.set(N,!0);else return;let nt=!0;S.forEach(ft=>{ft||(nt=!1)}),nt&&(K==null||K(),D(w.current),h&&(_==null||_()),r&&r())};return A.jsx(gc,{isPresent:Y,initial:!y.current||s?void 0:!1,custom:n,presenceAffectsLayout:u,mode:c,onExitComplete:Y?void 0:F,anchorX:f,children:R},N)})})};function bs(i,n){i.indexOf(n)===-1&&i.push(n)}function Ls(i,n){const s=i.indexOf(n);s>-1&&i.splice(s,1)}let Fa=()=>{};const Qn={skipAnimations:!1,useManualTiming:!1};function Ss(i){let n;return()=>(n===void 0&&(n=i()),n)}const Et=i=>i,ti=(i,n,s)=>{const r=n-i;return r===0?1:(s-i)/r};class Cs{constructor(){this.subscriptions=[]}add(n){return bs(this.subscriptions,n),()=>Ls(this.subscriptions,n)}notify(n,s,r){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](n,s,r);else for(let c=0;c<u;c++){const h=this.subscriptions[c];h&&h(n,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vt=i=>i*1e3,Zt=i=>i/1e3;function ja(i,n){return n?i*(1e3/n):0}const xc=Ss(()=>window.ScrollTimeline!==void 0);class wc{constructor(n){this.stop=()=>this.runAll("stop"),this.animations=n.filter(Boolean)}get finished(){return Promise.all(this.animations.map(n=>n.finished))}getAll(n){return this.animations[0][n]}setAll(n,s){for(let r=0;r<this.animations.length;r++)this.animations[r][n]=s}attachTimeline(n,s){const r=this.animations.map(u=>{if(xc()&&u.attachTimeline)return u.attachTimeline(n);if(typeof s=="function")return s(u)});return()=>{r.forEach((u,c)=>{u&&u(),this.animations[c].stop()})}}get time(){return this.getAll("time")}set time(n){this.setAll("time",n)}get speed(){return this.getAll("speed")}set speed(n){this.setAll("speed",n)}get startTime(){return this.getAll("startTime")}get duration(){let n=0;for(let s=0;s<this.animations.length;s++)n=Math.max(n,this.animations[s].duration);return n}runAll(n){this.animations.forEach(s=>s[n]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Pc extends wc{then(n,s){return this.finished.finally(n).then(()=>{})}}const mr={value:null,addProjectionMetrics:null},Ms=i=>Array.isArray(i)&&typeof i[0]=="number",Tc={};function bc(i,n){const s=Ss(i);return()=>Tc[n]??s()}const ei=bc(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wa=(i,n,s=10)=>{let r="";const u=Math.max(Math.round(n/s),2);for(let c=0;c<u;c++)r+=i(c/(u-1))+", ";return`linear(${r.substring(0,r.length-2)})`},qe=([i,n,s,r])=>`cubic-bezier(${i}, ${n}, ${s}, ${r})`,ts={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qe([0,.65,.55,1]),circOut:qe([.55,0,1,.45]),backIn:qe([.31,.01,.66,-.59]),backOut:qe([.33,1.53,.69,.99])};function Ha(i,n){if(i)return typeof i=="function"&&ei()?Wa(i,n):Ms(i)?qe(i):Array.isArray(i)?i.map(s=>Ha(s,n)||ts.easeOut):ts[i]}function Lc(i,n,s,{delay:r=0,duration:u=300,repeat:c=0,repeatType:h="loop",ease:f="easeInOut",times:d}={},_=void 0){const p={[n]:s};d&&(p.offset=d);const v=Ha(f,u);return Array.isArray(v)&&(p.easing=v),i.animate(p,{delay:r,duration:u,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:c+1,direction:h==="reverse"?"alternate":"normal",pseudoElement:_})}function As(i){return typeof i=="function"&&"applyToOptions"in i}function Es(i,n){return(i==null?void 0:i[n])??(i==null?void 0:i.default)??i}const Zi=2e4;function ks(i){let n=0;const s=50;let r=i.next(n);for(;!r.done&&n<Zi;)n+=s,r=i.next(n);return n>=Zi?1/0:n}function Sc(i,n=100,s){const r=s({...i,keyframes:[0,n]}),u=Math.min(ks(r),Zi);return{type:"keyframes",ease:c=>r.next(u*c).value/n,duration:Zt(u)}}function Ua(i){return!!(typeof i=="function"&&ei()||!i||typeof i=="string"&&(i in ts||ei())||Ms(i)||Array.isArray(i)&&i.every(Ua))}function pr(i,n){i.timeline=n,i.onfinish=null}const Di=["read","resolveKeyframes","update","preRender","render","postRender"];function Cc(i,n){let s=new Set,r=new Set,u=!1,c=!1;const h=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1},d=0;function _(v){h.has(v)&&(p.schedule(v),i()),d++,v(f)}const p={schedule:(v,y=!1,w=!1)=>{const C=w&&u?s:r;return y&&h.add(v),C.has(v)||C.add(v),v},cancel:v=>{r.delete(v),h.delete(v)},process:v=>{if(f=v,u){c=!0;return}u=!0,[s,r]=[r,s],s.forEach(_),n&&mr.value&&mr.value.frameloop[n].push(d),d=0,s.clear(),u=!1,c&&(c=!1,p.process(v))}};return p}const Mc=40;function Ga(i,n){let s=!1,r=!0;const u={delta:0,timestamp:0,isProcessing:!1},c=()=>s=!0,h=Di.reduce((M,D)=>(M[D]=Cc(c,n?D:void 0),M),{}),{read:f,resolveKeyframes:d,update:_,preRender:p,render:v,postRender:y}=h,w=()=>{const M=performance.now();s=!1,u.delta=r?1e3/60:Math.max(Math.min(M-u.timestamp,Mc),1),u.timestamp=M,u.isProcessing=!0,f.process(u),d.process(u),_.process(u),p.process(u),v.process(u),y.process(u),u.isProcessing=!1,s&&n&&(r=!1,i(w))},S=()=>{s=!0,r=!0,u.isProcessing||i(w)};return{schedule:Di.reduce((M,D)=>{const k=h[D];return M[D]=(K,R=!1,N=!1)=>(s||S(),k.schedule(K,R,N)),M},{}),cancel:M=>{for(let D=0;D<Di.length;D++)h[Di[D]].cancel(M)},state:u,steps:h}}const{schedule:Os,cancel:e_}=Ga(queueMicrotask,!1),{schedule:J,cancel:Jt,state:mt,steps:Bn}=Ga(typeof requestAnimationFrame<"u"?requestAnimationFrame:Et,!0);let Bi;function Ac(){Bi=void 0}const Nt={now:()=>(Bi===void 0&&Nt.set(mt.isProcessing||Qn.useManualTiming?mt.timestamp:performance.now()),Bi),set:i=>{Bi=i,queueMicrotask(Ac)}},Dt={x:!1,y:!1};function Ka(){return Dt.x||Dt.y}function Ec(i){return i==="x"||i==="y"?Dt[i]?null:(Dt[i]=!0,()=>{Dt[i]=!1}):Dt.x||Dt.y?null:(Dt.x=Dt.y=!0,()=>{Dt.x=Dt.y=!1})}function kc(i,n,s){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let r=document;n&&(r=n.current);const u=(s==null?void 0:s[i])??r.querySelectorAll(i);return u?Array.from(u):[]}return Array.from(i)}function qa(i,n){const s=kc(i),r=new AbortController,u={passive:!0,...n,signal:r.signal};return[s,u,()=>r.abort()]}function _r(i){return!(i.pointerType==="touch"||Ka())}function Oc(i,n,s={}){const[r,u,c]=qa(i,s),h=f=>{if(!_r(f))return;const{target:d}=f,_=n(d,f);if(typeof _!="function"||!d)return;const p=v=>{_r(v)&&(_(v),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,u)};return r.forEach(f=>{f.addEventListener("pointerenter",h,u)}),c}const $a=(i,n)=>n?i===n?!0:$a(i,n.parentElement):!1,Ds=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,Dc=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rc(i){return Dc.has(i.tagName)||i.tabIndex!==-1}const $e=new WeakSet;function gr(i){return n=>{n.key==="Enter"&&i(n)}}function zn(i,n){i.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const Ic=(i,n)=>{const s=i.currentTarget;if(!s)return;const r=gr(()=>{if($e.has(s))return;zn(s,"down");const u=gr(()=>{zn(s,"up")}),c=()=>zn(s,"cancel");s.addEventListener("keyup",u,n),s.addEventListener("blur",c,n)});s.addEventListener("keydown",r,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),n)};function vr(i){return Ds(i)&&!Ka()}function Bc(i,n,s={}){const[r,u,c]=qa(i,s),h=f=>{const d=f.currentTarget;if(!vr(f)||$e.has(d))return;$e.add(d);const _=n(d,f),p=(w,S)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),!(!vr(w)||!$e.has(d))&&($e.delete(d),typeof _=="function"&&_(w,{success:S}))},v=w=>{p(w,d===window||d===document||s.useGlobalTarget||$a(d,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",v,u),window.addEventListener("pointercancel",y,u)};return r.forEach(f=>{(s.useGlobalTarget?window:f).addEventListener("pointerdown",h,u),f instanceof HTMLElement&&(f.addEventListener("focus",_=>Ic(_,u)),!Rc(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),c}const yr=30,zc=i=>!isNaN(parseFloat(i));class Vc{constructor(n,s={}){this.version="12.7.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,u=!0)=>{const c=Nt.now();this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),u&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=Nt.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=zc(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new Cs);const r=this.events[n].add(s);return n==="change"?()=>{r(),J.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n,s=!0){!s||!this.passiveEffect?this.updateAndNotify(n,s):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-r}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Nt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>yr)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,yr);return ja(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ii(i,n){return new Vc(i,n)}const Ya=b.createContext({strict:!1}),xr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ce={};for(const i in xr)Ce[i]={isEnabled:n=>xr[i].some(s=>!!n[s])};function Zc(i){for(const n in i)Ce[n]={...Ce[n],...i[n]}}const Nc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ni(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||Nc.has(i)}let Xa=i=>!Ni(i);function Fc(i){i&&(Xa=n=>n.startsWith("on")?!Ni(n):i(n))}try{Fc(require("@emotion/is-prop-valid").default)}catch{}function jc(i,n,s){const r={};for(const u in i)u==="values"&&typeof i.values=="object"||(Xa(u)||s===!0&&Ni(u)||!n&&!Ni(u)||i.draggable&&u.startsWith("onDrag"))&&(r[u]=i[u]);return r}function Wc(i){if(typeof Proxy>"u")return i;const n=new Map,s=(...r)=>i(...r);return new Proxy(s,{get:(r,u)=>u==="create"?i:(n.has(u)||n.set(u,i(u)),n.get(u))})}const Yi=b.createContext({});function Xi(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function ni(i){return typeof i=="string"||Array.isArray(i)}const Rs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Is=["initial",...Rs];function Ji(i){return Xi(i.animate)||Is.some(n=>ni(i[n]))}function Ja(i){return!!(Ji(i)||i.variants)}function Hc(i,n){if(Ji(i)){const{initial:s,animate:r}=i;return{initial:s===!1||ni(s)?s:void 0,animate:ni(r)?r:void 0}}return i.inherit!==!1?n:{}}function Uc(i){const{initial:n,animate:s}=Hc(i,b.useContext(Yi));return b.useMemo(()=>({initial:n,animate:s}),[wr(n),wr(s)])}function wr(i){return Array.isArray(i)?i.join(" "):i}const Gc=Symbol.for("motionComponentSymbol");function Pe(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function Kc(i,n,s){return b.useCallback(r=>{r&&i.onMount&&i.onMount(r),n&&(r?n.mount(r):n.unmount()),s&&(typeof s=="function"?s(r):Pe(s)&&(s.current=r))},[n])}const Bs=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qc="framerAppearId",Qa="data-"+Bs(qc),tu=b.createContext({});function $c(i,n,s,r,u){var C,O;const{visualElement:c}=b.useContext(Yi),h=b.useContext(Ya),f=b.useContext($i),d=b.useContext(Ts).reducedMotion,_=b.useRef(null);r=r||h.renderer,!_.current&&r&&(_.current=r(i,{visualState:n,parent:c,props:s,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:d}));const p=_.current,v=b.useContext(tu);p&&!p.projection&&u&&(p.type==="html"||p.type==="svg")&&Yc(_.current,s,u,v);const y=b.useRef(!1);b.useInsertionEffect(()=>{p&&y.current&&p.update(s,f)});const w=s[Qa],S=b.useRef(!!w&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,w))&&((O=window.MotionHasOptimisedAnimation)==null?void 0:O.call(window,w)));return Za(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Os.render(p.render),S.current&&p.animationState&&p.animationState.animateChanges())}),b.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,w)}),S.current=!1))}),p}function Yc(i,n,s,r){const{layoutId:u,layout:c,drag:h,dragConstraints:f,layoutScroll:d,layoutRoot:_,layoutCrossfade:p}=n;i.projection=new s(i.latestValues,n["data-framer-portal-id"]?void 0:eu(i.parent)),i.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!h||f&&Pe(f),visualElement:i,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:_})}function eu(i){if(i)return i.options.allowProjection!==!1?i.projection:eu(i.parent)}function Xc({preloadedFeatures:i,createVisualElement:n,useRender:s,useVisualState:r,Component:u}){i&&Zc(i);function c(f,d){let _;const p={...b.useContext(Ts),...f,layoutId:Jc(f)},{isStatic:v}=p,y=Uc(f),w=r(f,v);if(!v&&Ps){Qc();const S=tf(p);_=S.MeasureLayout,y.visualElement=$c(u,w,p,n,S.ProjectionNode)}return A.jsxs(Yi.Provider,{value:y,children:[_&&y.visualElement?A.jsx(_,{visualElement:y.visualElement,...p}):null,s(u,f,Kc(w,y.visualElement,d),w,v,y.visualElement)]})}c.displayName=`motion.${typeof u=="string"?u:`create(${u.displayName??u.name??""})`}`;const h=b.forwardRef(c);return h[Gc]=u,h}function Jc({layoutId:i}){const n=b.useContext(xs).id;return n&&i!==void 0?n+"-"+i:i}function Qc(i,n){b.useContext(Ya).strict}function tf(i){const{drag:n,layout:s}=Ce;if(!n&&!s)return{};const r={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(i)||s!=null&&s.isEnabled(i)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const iu=i=>n=>typeof n=="string"&&n.startsWith(i),zs=iu("--"),ef=iu("var(--"),Vs=i=>ef(i)?nf.test(i.split("/*")[0].trim()):!1,nf=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,si={};function sf(i){for(const n in i)si[n]=i[n],zs(n)&&(si[n].isCSSVariable=!0)}const ke=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ce=new Set(ke);function nu(i,{layout:n,layoutId:s}){return ce.has(i)||i.startsWith("origin")||(n||s!==void 0)&&(!!si[i]||i==="opacity")}const _t=i=>!!(i&&i.getVelocity),su=(i,n)=>n&&typeof i=="number"?n.transform(i):i,Kt=(i,n,s)=>s>n?n:s<i?i:s,Oe={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},oi={...Oe,transform:i=>Kt(0,1,i)},Ri={...Oe,default:1},li=i=>({test:n=>typeof n=="string"&&n.endsWith(i)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${i}`}),Xt=li("deg"),Ft=li("%"),z=li("px"),of=li("vh"),rf=li("vw"),Pr={...Ft,parse:i=>Ft.parse(i)/100,transform:i=>Ft.transform(i*100)},af={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,backgroundPositionX:z,backgroundPositionY:z},uf={rotate:Xt,rotateX:Xt,rotateY:Xt,rotateZ:Xt,scale:Ri,scaleX:Ri,scaleY:Ri,scaleZ:Ri,skew:Xt,skewX:Xt,skewY:Xt,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:oi,originX:Pr,originY:Pr,originZ:z},Tr={...Oe,transform:Math.round},Zs={...af,...uf,zIndex:Tr,size:z,fillOpacity:oi,strokeOpacity:oi,numOctaves:Tr},lf={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hf=ke.length;function cf(i,n,s){let r="",u=!0;for(let c=0;c<hf;c++){const h=ke[c],f=i[h];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(h.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||s){const _=su(f,Zs[h]);if(!d){u=!1;const p=lf[h]||h;r+=`${p}(${_}) `}s&&(n[h]=_)}}return r=r.trim(),s?r=s(n,u?"":r):u&&(r="none"),r}function Ns(i,n,s){const{style:r,vars:u,transformOrigin:c}=i;let h=!1,f=!1;for(const d in n){const _=n[d];if(ce.has(d)){h=!0;continue}else if(zs(d)){u[d]=_;continue}else{const p=su(_,Zs[d]);d.startsWith("origin")?(f=!0,c[d]=p):r[d]=p}}if(n.transform||(h||s?r.transform=cf(n,i.transform,s):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:_="50%",originZ:p=0}=c;r.transformOrigin=`${d} ${_} ${p}`}}const Fs=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ou(i,n,s){for(const r in n)!_t(n[r])&&!nu(r,s)&&(i[r]=n[r])}function ff({transformTemplate:i},n){return b.useMemo(()=>{const s=Fs();return Ns(s,n,i),Object.assign({},s.vars,s.style)},[n])}function df(i,n){const s=i.style||{},r={};return ou(r,s,i),Object.assign(r,ff(i,n)),r}function mf(i,n){const s={},r=df(i,n);return i.drag&&i.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(s.tabIndex=0),s.style=r,s}const pf=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function js(i){return typeof i!="string"||i.includes("-")?!1:!!(pf.indexOf(i)>-1||/[A-Z]/u.test(i))}const _f={offset:"stroke-dashoffset",array:"stroke-dasharray"},gf={offset:"strokeDashoffset",array:"strokeDasharray"};function vf(i,n,s=1,r=0,u=!0){i.pathLength=1;const c=u?_f:gf;i[c.offset]=z.transform(-r);const h=z.transform(n),f=z.transform(s);i[c.array]=`${h} ${f}`}function br(i,n,s){return typeof i=="string"?i:z.transform(n+s*i)}function yf(i,n,s){const r=br(n,i.x,i.width),u=br(s,i.y,i.height);return`${r} ${u}`}function Ws(i,{attrX:n,attrY:s,attrScale:r,originX:u,originY:c,pathLength:h,pathSpacing:f=1,pathOffset:d=0,..._},p,v){if(Ns(i,_,v),p){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:w,dimensions:S}=i;y.transform&&(S&&(w.transform=y.transform),delete y.transform),S&&(u!==void 0||c!==void 0||w.transform)&&(w.transformOrigin=yf(S,u!==void 0?u:.5,c!==void 0?c:.5)),n!==void 0&&(y.x=n),s!==void 0&&(y.y=s),r!==void 0&&(y.scale=r),h!==void 0&&vf(y,h,f,d,!1)}const ru=()=>({...Fs(),attrs:{}}),Hs=i=>typeof i=="string"&&i.toLowerCase()==="svg";function xf(i,n,s,r){const u=b.useMemo(()=>{const c=ru();return Ws(c,n,Hs(r),i.transformTemplate),{...c.attrs,style:{...c.style}}},[n]);if(i.style){const c={};ou(c,i.style,i),u.style={...c,...u.style}}return u}function wf(i=!1){return(s,r,u,{latestValues:c},h)=>{const d=(js(s)?xf:mf)(r,c,h,s),_=jc(r,typeof s=="string",i),p=s!==b.Fragment?{..._,...d,ref:u}:{},{children:v}=r,y=b.useMemo(()=>_t(v)?v.get():v,[v]);return b.createElement(s,{...p,children:y})}}function Lr(i){const n=[{},{}];return i==null||i.values.forEach((s,r)=>{n[0][r]=s.get(),n[1][r]=s.getVelocity()}),n}function Us(i,n,s,r){if(typeof n=="function"){const[u,c]=Lr(r);n=n(s!==void 0?s:i.custom,u,c)}if(typeof n=="string"&&(n=i.variants&&i.variants[n]),typeof n=="function"){const[u,c]=Lr(r);n=n(s!==void 0?s:i.custom,u,c)}return n}const es=i=>Array.isArray(i),Pf=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),Tf=i=>es(i)?i[i.length-1]||0:i;function zi(i){const n=_t(i)?i.get():i;return Pf(n)?n.toValue():n}function bf({scrapeMotionValuesFromProps:i,createRenderState:n,onUpdate:s},r,u,c){const h={latestValues:Lf(r,u,c,i),renderState:n()};return s&&(h.onMount=f=>s({props:r,current:f,...h}),h.onUpdate=f=>s(f)),h}const au=i=>(n,s)=>{const r=b.useContext(Yi),u=b.useContext($i),c=()=>bf(i,n,r,u);return s?c():ws(c)};function Lf(i,n,s,r){const u={},c=r(i,{});for(const y in c)u[y]=zi(c[y]);let{initial:h,animate:f}=i;const d=Ji(i),_=Ja(i);n&&_&&!d&&i.inherit!==!1&&(h===void 0&&(h=n.initial),f===void 0&&(f=n.animate));let p=s?s.initial===!1:!1;p=p||h===!1;const v=p?f:h;if(v&&typeof v!="boolean"&&!Xi(v)){const y=Array.isArray(v)?v:[v];for(let w=0;w<y.length;w++){const S=Us(i,y[w]);if(S){const{transitionEnd:C,transition:O,...M}=S;for(const D in M){let k=M[D];if(Array.isArray(k)){const K=p?k.length-1:0;k=k[K]}k!==null&&(u[D]=k)}for(const D in C)u[D]=C[D]}}}return u}function Gs(i,n,s){var c;const{style:r}=i,u={};for(const h in r)(_t(r[h])||n.style&&_t(n.style[h])||nu(h,i)||((c=s==null?void 0:s.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(u[h]=r[h]);return u}const Sf={useVisualState:au({scrapeMotionValuesFromProps:Gs,createRenderState:Fs})};function uu(i,n){try{n.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}function lu(i,{style:n,vars:s},r,u){Object.assign(i.style,n,u&&u.getProjectionStyles(r));for(const c in s)i.style.setProperty(c,s[c])}const hu=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cu(i,n,s,r){lu(i,n,void 0,r);for(const u in n.attrs)i.setAttribute(hu.has(u)?u:Bs(u),n.attrs[u])}function fu(i,n,s){const r=Gs(i,n,s);for(const u in i)if(_t(i[u])||_t(n[u])){const c=ke.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;r[c]=i[u]}return r}const Sr=["x","y","width","height","cx","cy","r"],Cf={useVisualState:au({scrapeMotionValuesFromProps:fu,createRenderState:ru,onUpdate:({props:i,prevProps:n,current:s,renderState:r,latestValues:u})=>{if(!s)return;let c=!!i.drag;if(!c){for(const f in u)if(ce.has(f)){c=!0;break}}if(!c)return;let h=!n;if(n)for(let f=0;f<Sr.length;f++){const d=Sr[f];i[d]!==n[d]&&(h=!0)}h&&J.read(()=>{uu(s,r),J.render(()=>{Ws(r,u,Hs(s.tagName),i.transformTemplate),cu(s,r)})})}})};function Mf(i,n){return function(r,{forwardMotionProps:u}={forwardMotionProps:!1}){const h={...js(r)?Cf:Sf,preloadedFeatures:i,useRender:wf(u),createVisualElement:n,Component:r};return Xc(h)}}function ri(i,n,s){const r=i.getProps();return Us(r,n,s!==void 0?s:r.custom,i)}const du=new Set(["width","height","top","left","right","bottom",...ke]);function Af(i,n,s){i.hasValue(n)?i.getValue(n).set(s):i.addValue(n,ii(s))}function Ef(i,n){const s=ri(i,n);let{transitionEnd:r={},transition:u={},...c}=s||{};c={...c,...r};for(const h in c){const f=Tf(c[h]);Af(i,h,f)}}function kf(i){return!!(_t(i)&&i.add)}function is(i,n){const s=i.getValue("willChange");if(kf(s))return s.add(n);if(!s&&Qn.WillChange){const r=new Qn.WillChange("auto");i.addValue("willChange",r),r.add(n)}}function mu(i){return i.props[Qa]}const pu=(i,n,s)=>(((1-3*s+3*n)*i+(3*s-6*n))*i+3*n)*i,Of=1e-7,Df=12;function Rf(i,n,s,r,u){let c,h,f=0;do h=n+(s-n)/2,c=pu(h,r,u)-i,c>0?s=h:n=h;while(Math.abs(c)>Of&&++f<Df);return h}function hi(i,n,s,r){if(i===n&&s===r)return Et;const u=c=>Rf(c,0,1,i,s);return c=>c===0||c===1?c:pu(u(c),n,r)}const _u=i=>n=>n<=.5?i(2*n)/2:(2-i(2*(1-n)))/2,gu=i=>n=>1-i(1-n),vu=hi(.33,1.53,.69,.99),Ks=gu(vu),yu=_u(Ks),xu=i=>(i*=2)<1?.5*Ks(i):.5*(2-Math.pow(2,-10*(i-1))),qs=i=>1-Math.sin(Math.acos(i)),wu=gu(qs),Pu=_u(qs),Tu=i=>/^0[^.\s]+$/u.test(i);function If(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||Tu(i):!0}const Ye=i=>Math.round(i*1e5)/1e5,$s=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Bf(i){return i==null}const zf=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ys=(i,n)=>s=>!!(typeof s=="string"&&zf.test(s)&&s.startsWith(i)||n&&!Bf(s)&&Object.prototype.hasOwnProperty.call(s,n)),bu=(i,n,s)=>r=>{if(typeof r!="string")return r;const[u,c,h,f]=r.match($s);return{[i]:parseFloat(u),[n]:parseFloat(c),[s]:parseFloat(h),alpha:f!==void 0?parseFloat(f):1}},Vf=i=>Kt(0,255,i),Vn={...Oe,transform:i=>Math.round(Vf(i))},ue={test:Ys("rgb","red"),parse:bu("red","green","blue"),transform:({red:i,green:n,blue:s,alpha:r=1})=>"rgba("+Vn.transform(i)+", "+Vn.transform(n)+", "+Vn.transform(s)+", "+Ye(oi.transform(r))+")"};function Zf(i){let n="",s="",r="",u="";return i.length>5?(n=i.substring(1,3),s=i.substring(3,5),r=i.substring(5,7),u=i.substring(7,9)):(n=i.substring(1,2),s=i.substring(2,3),r=i.substring(3,4),u=i.substring(4,5),n+=n,s+=s,r+=r,u+=u),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:u?parseInt(u,16)/255:1}}const ns={test:Ys("#"),parse:Zf,transform:ue.transform},Te={test:Ys("hsl","hue"),parse:bu("hue","saturation","lightness"),transform:({hue:i,saturation:n,lightness:s,alpha:r=1})=>"hsla("+Math.round(i)+", "+Ft.transform(Ye(n))+", "+Ft.transform(Ye(s))+", "+Ye(oi.transform(r))+")"},pt={test:i=>ue.test(i)||ns.test(i)||Te.test(i),parse:i=>ue.test(i)?ue.parse(i):Te.test(i)?Te.parse(i):ns.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?ue.transform(i):Te.transform(i)},Nf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ff(i){var n,s;return isNaN(i)&&typeof i=="string"&&(((n=i.match($s))==null?void 0:n.length)||0)+(((s=i.match(Nf))==null?void 0:s.length)||0)>0}const Lu="number",Su="color",jf="var",Wf="var(",Cr="${}",Hf=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ai(i){const n=i.toString(),s=[],r={color:[],number:[],var:[]},u=[];let c=0;const f=n.replace(Hf,d=>(pt.test(d)?(r.color.push(c),u.push(Su),s.push(pt.parse(d))):d.startsWith(Wf)?(r.var.push(c),u.push(jf),s.push(d)):(r.number.push(c),u.push(Lu),s.push(parseFloat(d))),++c,Cr)).split(Cr);return{values:s,split:f,indexes:r,types:u}}function Cu(i){return ai(i).values}function Mu(i){const{split:n,types:s}=ai(i),r=n.length;return u=>{let c="";for(let h=0;h<r;h++)if(c+=n[h],u[h]!==void 0){const f=s[h];f===Lu?c+=Ye(u[h]):f===Su?c+=pt.transform(u[h]):c+=u[h]}return c}}const Uf=i=>typeof i=="number"?0:i;function Gf(i){const n=Cu(i);return Mu(i)(n.map(Uf))}const Qt={test:Ff,parse:Cu,createTransformer:Mu,getAnimatableNone:Gf},Kf=new Set(["brightness","contrast","saturate","opacity"]);function qf(i){const[n,s]=i.slice(0,-1).split("(");if(n==="drop-shadow")return i;const[r]=s.match($s)||[];if(!r)return i;const u=s.replace(r,"");let c=Kf.has(n)?1:0;return r!==s&&(c*=100),n+"("+c+u+")"}const $f=/\b([a-z-]*)\(.*?\)/gu,ss={...Qt,getAnimatableNone:i=>{const n=i.match($f);return n?n.map(qf).join(" "):i}},Yf={...Zs,color:pt,backgroundColor:pt,outlineColor:pt,fill:pt,stroke:pt,borderColor:pt,borderTopColor:pt,borderRightColor:pt,borderBottomColor:pt,borderLeftColor:pt,filter:ss,WebkitFilter:ss},Au=i=>Yf[i];function Eu(i,n){let s=Au(i);return s!==ss&&(s=Qt),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const Xf=new Set(["auto","none","0"]);function Jf(i,n,s){let r=0,u;for(;r<i.length&&!u;){const c=i[r];typeof c=="string"&&!Xf.has(c)&&ai(c).values.length&&(u=i[r]),r++}if(u&&s)for(const c of n)i[c]=Eu(s,u)}const le=i=>i*180/Math.PI,os=i=>{const n=le(Math.atan2(i[1],i[0]));return rs(n)},Qf={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:os,rotateZ:os,skewX:i=>le(Math.atan(i[1])),skewY:i=>le(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},rs=i=>(i=i%360,i<0&&(i+=360),i),Mr=os,Ar=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),Er=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),td={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ar,scaleY:Er,scale:i=>(Ar(i)+Er(i))/2,rotateX:i=>rs(le(Math.atan2(i[6],i[5]))),rotateY:i=>rs(le(Math.atan2(-i[2],i[0]))),rotateZ:Mr,rotate:Mr,skewX:i=>le(Math.atan(i[4])),skewY:i=>le(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function kr(i){return i.includes("scale")?1:0}function as(i,n){if(!i||i==="none")return kr(n);const s=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,u;if(s)r=td,u=s;else{const f=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qf,u=f}if(!u)return kr(n);const c=r[n],h=u[1].split(",").map(id);return typeof c=="function"?c(h):h[c]}const ed=(i,n)=>{const{transform:s="none"}=getComputedStyle(i);return as(s,n)};function id(i){return parseFloat(i.trim())}const Or=i=>i===Oe||i===z,nd=new Set(["x","y","z"]),sd=ke.filter(i=>!nd.has(i));function od(i){const n=[];return sd.forEach(s=>{const r=i.getValue(s);r!==void 0&&(n.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),n}const Me={width:({x:i},{paddingLeft:n="0",paddingRight:s="0"})=>i.max-i.min-parseFloat(n)-parseFloat(s),height:({y:i},{paddingTop:n="0",paddingBottom:s="0"})=>i.max-i.min-parseFloat(n)-parseFloat(s),top:(i,{top:n})=>parseFloat(n),left:(i,{left:n})=>parseFloat(n),bottom:({y:i},{top:n})=>parseFloat(n)+(i.max-i.min),right:({x:i},{left:n})=>parseFloat(n)+(i.max-i.min),x:(i,{transform:n})=>as(n,"x"),y:(i,{transform:n})=>as(n,"y")};Me.translateX=Me.x;Me.translateY=Me.y;const he=new Set;let us=!1,ls=!1;function ku(){if(ls){const i=Array.from(he).filter(r=>r.needsMeasurement),n=new Set(i.map(r=>r.element)),s=new Map;n.forEach(r=>{const u=od(r);u.length&&(s.set(r,u),r.render())}),i.forEach(r=>r.measureInitialState()),n.forEach(r=>{r.render();const u=s.get(r);u&&u.forEach(([c,h])=>{var f;(f=r.getValue(c))==null||f.set(h)})}),i.forEach(r=>r.measureEndState()),i.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ls=!1,us=!1,he.forEach(i=>i.complete()),he.clear()}function Ou(){he.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(ls=!0)})}function rd(){Ou(),ku()}class Xs{constructor(n,s,r,u,c,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=r,this.motionValue=u,this.element=c,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(he.add(this),us||(us=!0,J.read(Ou),J.resolveKeyframes(ku))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:r,motionValue:u}=this;for(let c=0;c<n.length;c++)if(n[c]===null)if(c===0){const h=u==null?void 0:u.get(),f=n[n.length-1];if(h!==void 0)n[0]=h;else if(r&&s){const d=r.readValue(s,f);d!=null&&(n[0]=d)}n[0]===void 0&&(n[0]=f),u&&h===void 0&&u.set(n[0])}else n[c]=n[c-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),he.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,he.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Du=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),ad=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ud(i){const n=ad.exec(i);if(!n)return[,];const[,s,r,u]=n;return[`--${s??r}`,u]}function Ru(i,n,s=1){const[r,u]=ud(i);if(!r)return;const c=window.getComputedStyle(n).getPropertyValue(r);if(c){const h=c.trim();return Du(h)?parseFloat(h):h}return Vs(u)?Ru(u,n,s+1):u}const Iu=i=>n=>n.test(i),ld={test:i=>i==="auto",parse:i=>i},Bu=[Oe,z,Ft,Xt,rf,of,ld],Dr=i=>Bu.find(Iu(i));class zu extends Xs{constructor(n,s,r,u,c){super(n,s,r,u,c,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<n.length;d++){let _=n[d];if(typeof _=="string"&&(_=_.trim(),Vs(_))){const p=Ru(_,s.current);p!==void 0&&(n[d]=p),d===n.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!du.has(r)||n.length!==2)return;const[u,c]=n,h=Dr(u),f=Dr(c);if(h!==f)if(Or(h)&&Or(f))for(let d=0;d<n.length;d++){const _=n[d];typeof _=="string"&&(n[d]=parseFloat(_))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,r=[];for(let u=0;u<n.length;u++)If(n[u])&&r.push(u);r.length&&Jf(n,r,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:r}=this;if(!n||!n.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Me[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const u=s[s.length-1];u!==void 0&&n.getValue(r,u).jump(u,!1)}measureEndState(){var f;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const u=n.getValue(s);u&&u.jump(this.measuredOrigin,!1);const c=r.length-1,h=r[c];r[c]=Me[s](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,_])=>{n.getValue(d).set(_)}),this.resolveNoneKeyframes()}}const Rr=(i,n)=>n==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Qt.test(i)||i==="0")&&!i.startsWith("url("));function hd(i){const n=i[0];if(i.length===1)return!0;for(let s=0;s<i.length;s++)if(i[s]!==n)return!0}function cd(i,n,s,r){const u=i[0];if(u===null)return!1;if(n==="display"||n==="visibility")return!0;const c=i[i.length-1],h=Rr(u,n),f=Rr(c,n);return!h||!f?!1:hd(i)||(s==="spring"||As(s))&&r}const fd=i=>i!==null;function Qi(i,{repeat:n,repeatType:s="loop"},r){const u=i.filter(fd),c=n&&s!=="loop"&&n%2===1?0:u.length-1;return!c||r===void 0?u[c]:r}const dd=40;class Vu{constructor({autoplay:n=!0,delay:s=0,type:r="keyframes",repeat:u=0,repeatDelay:c=0,repeatType:h="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Nt.now(),this.options={autoplay:n,delay:s,type:r,repeat:u,repeatDelay:c,repeatType:h,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>dd?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rd(),this._resolved}onKeyframesResolved(n,s){this.resolvedAt=Nt.now(),this.hasAttemptedResolve=!0;const{name:r,type:u,velocity:c,delay:h,onComplete:f,onUpdate:d,isGenerator:_}=this.options;if(!_&&!cd(n,r,u,c))if(h)this.options.duration=0;else{d&&d(Qi(n,this.options,s)),f&&f(),this.resolveFinishedPromise();return}const p=this.initPlayback(n,s);p!==!1&&(this._resolved={keyframes:n,finalKeyframe:s,...p},this.onPostResolved())}onPostResolved(){}then(n,s){return this.currentFinishedPromise.then(n,s)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(n=>{this.resolveFinishedPromise=n})}}const et=(i,n,s)=>i+(n-i)*s;function Zn(i,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+(n-i)*6*s:s<1/2?n:s<2/3?i+(n-i)*(2/3-s)*6:i}function md({hue:i,saturation:n,lightness:s,alpha:r}){i/=360,n/=100,s/=100;let u=0,c=0,h=0;if(!n)u=c=h=s;else{const f=s<.5?s*(1+n):s+n-s*n,d=2*s-f;u=Zn(d,f,i+1/3),c=Zn(d,f,i),h=Zn(d,f,i-1/3)}return{red:Math.round(u*255),green:Math.round(c*255),blue:Math.round(h*255),alpha:r}}function Fi(i,n){return s=>s>0?n:i}const Nn=(i,n,s)=>{const r=i*i,u=s*(n*n-r)+r;return u<0?0:Math.sqrt(u)},pd=[ns,ue,Te],_d=i=>pd.find(n=>n.test(i));function Ir(i){const n=_d(i);if(!n)return!1;let s=n.parse(i);return n===Te&&(s=md(s)),s}const Br=(i,n)=>{const s=Ir(i),r=Ir(n);if(!s||!r)return Fi(i,n);const u={...s};return c=>(u.red=Nn(s.red,r.red,c),u.green=Nn(s.green,r.green,c),u.blue=Nn(s.blue,r.blue,c),u.alpha=et(s.alpha,r.alpha,c),ue.transform(u))},gd=(i,n)=>s=>n(i(s)),ci=(...i)=>i.reduce(gd),hs=new Set(["none","hidden"]);function vd(i,n){return hs.has(i)?s=>s<=0?i:n:s=>s>=1?n:i}function yd(i,n){return s=>et(i,n,s)}function Js(i){return typeof i=="number"?yd:typeof i=="string"?Vs(i)?Fi:pt.test(i)?Br:Pd:Array.isArray(i)?Zu:typeof i=="object"?pt.test(i)?Br:xd:Fi}function Zu(i,n){const s=[...i],r=s.length,u=i.map((c,h)=>Js(c)(c,n[h]));return c=>{for(let h=0;h<r;h++)s[h]=u[h](c);return s}}function xd(i,n){const s={...i,...n},r={};for(const u in s)i[u]!==void 0&&n[u]!==void 0&&(r[u]=Js(i[u])(i[u],n[u]));return u=>{for(const c in r)s[c]=r[c](u);return s}}function wd(i,n){const s=[],r={color:0,var:0,number:0};for(let u=0;u<n.values.length;u++){const c=n.types[u],h=i.indexes[c][r[c]],f=i.values[h]??0;s[u]=f,r[c]++}return s}const Pd=(i,n)=>{const s=Qt.createTransformer(n),r=ai(i),u=ai(n);return r.indexes.var.length===u.indexes.var.length&&r.indexes.color.length===u.indexes.color.length&&r.indexes.number.length>=u.indexes.number.length?hs.has(i)&&!u.values.length||hs.has(n)&&!r.values.length?vd(i,n):ci(Zu(wd(r,u),u.values),s):Fi(i,n)};function Nu(i,n,s){return typeof i=="number"&&typeof n=="number"&&typeof s=="number"?et(i,n,s):Js(i)(i,n)}const Td=5;function Fu(i,n,s){const r=Math.max(n-Td,0);return ja(s-i(r),n-r)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fn=.001;function bd({duration:i=it.duration,bounce:n=it.bounce,velocity:s=it.velocity,mass:r=it.mass}){let u,c,h=1-n;h=Kt(it.minDamping,it.maxDamping,h),i=Kt(it.minDuration,it.maxDuration,Zt(i)),h<1?(u=_=>{const p=_*h,v=p*i,y=p-s,w=cs(_,h),S=Math.exp(-v);return Fn-y/w*S},c=_=>{const v=_*h*i,y=v*s+s,w=Math.pow(h,2)*Math.pow(_,2)*i,S=Math.exp(-v),C=cs(Math.pow(_,2),h);return(-u(_)+Fn>0?-1:1)*((y-w)*S)/C}):(u=_=>{const p=Math.exp(-_*i),v=(_-s)*i+1;return-Fn+p*v},c=_=>{const p=Math.exp(-_*i),v=(s-_)*(i*i);return p*v});const f=5/i,d=Sd(u,c,f);if(i=Vt(i),isNaN(d))return{stiffness:it.stiffness,damping:it.damping,duration:i};{const _=Math.pow(d,2)*r;return{stiffness:_,damping:h*2*Math.sqrt(r*_),duration:i}}}const Ld=12;function Sd(i,n,s){let r=s;for(let u=1;u<Ld;u++)r=r-i(r)/n(r);return r}function cs(i,n){return i*Math.sqrt(1-n*n)}const Cd=["duration","bounce"],Md=["stiffness","damping","mass"];function zr(i,n){return n.some(s=>i[s]!==void 0)}function Ad(i){let n={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...i};if(!zr(i,Md)&&zr(i,Cd))if(i.visualDuration){const s=i.visualDuration,r=2*Math.PI/(s*1.2),u=r*r,c=2*Kt(.05,1,1-(i.bounce||0))*Math.sqrt(u);n={...n,mass:it.mass,stiffness:u,damping:c}}else{const s=bd(i);n={...n,...s,mass:it.mass},n.isResolvedFromDuration=!0}return n}function ji(i=it.visualDuration,n=it.bounce){const s=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:n}:i;let{restSpeed:r,restDelta:u}=s;const c=s.keyframes[0],h=s.keyframes[s.keyframes.length-1],f={done:!1,value:c},{stiffness:d,damping:_,mass:p,duration:v,velocity:y,isResolvedFromDuration:w}=Ad({...s,velocity:-Zt(s.velocity||0)}),S=y||0,C=_/(2*Math.sqrt(d*p)),O=h-c,M=Zt(Math.sqrt(d/p)),D=Math.abs(O)<5;r||(r=D?it.restSpeed.granular:it.restSpeed.default),u||(u=D?it.restDelta.granular:it.restDelta.default);let k;if(C<1){const R=cs(M,C);k=N=>{const Y=Math.exp(-C*M*N);return h-Y*((S+C*M*O)/R*Math.sin(R*N)+O*Math.cos(R*N))}}else if(C===1)k=R=>h-Math.exp(-M*R)*(O+(S+M*O)*R);else{const R=M*Math.sqrt(C*C-1);k=N=>{const Y=Math.exp(-C*M*N),F=Math.min(R*N,300);return h-Y*((S+C*M*O)*Math.sinh(F)+R*O*Math.cosh(F))/R}}const K={calculatedDuration:w&&v||null,next:R=>{const N=k(R);if(w)f.done=R>=v;else{let Y=0;C<1&&(Y=R===0?Vt(S):Fu(k,R,N));const F=Math.abs(Y)<=r,nt=Math.abs(h-N)<=u;f.done=F&&nt}return f.value=f.done?h:N,f},toString:()=>{const R=Math.min(ks(K),Zi),N=Wa(Y=>K.next(R*Y).value,R,30);return R+"ms "+N},toTransition:()=>{}};return K}ji.applyToOptions=i=>{const n=Sc(i,100,ji);return i.ease=ei()?n.ease:"easeOut",i.duration=Vt(n.duration),i.type="keyframes",i};function Vr({keyframes:i,velocity:n=0,power:s=.8,timeConstant:r=325,bounceDamping:u=10,bounceStiffness:c=500,modifyTarget:h,min:f,max:d,restDelta:_=.5,restSpeed:p}){const v=i[0],y={done:!1,value:v},w=F=>f!==void 0&&F<f||d!==void 0&&F>d,S=F=>f===void 0?d:d===void 0||Math.abs(f-F)<Math.abs(d-F)?f:d;let C=s*n;const O=v+C,M=h===void 0?O:h(O);M!==O&&(C=M-v);const D=F=>-C*Math.exp(-F/r),k=F=>M+D(F),K=F=>{const nt=D(F),ft=k(F);y.done=Math.abs(nt)<=_,y.value=y.done?M:ft};let R,N;const Y=F=>{w(y.value)&&(R=F,N=ji({keyframes:[y.value,S(y.value)],velocity:Fu(k,F,y.value),damping:u,stiffness:c,restDelta:_,restSpeed:p}))};return Y(0),{calculatedDuration:null,next:F=>{let nt=!1;return!N&&R===void 0&&(nt=!0,K(F),Y(F)),R!==void 0&&F>=R?N.next(F-R):(!nt&&K(F),y)}}}const Ed=hi(.42,0,1,1),kd=hi(0,0,.58,1),ju=hi(.42,0,.58,1),Od=i=>Array.isArray(i)&&typeof i[0]!="number",Dd={linear:Et,easeIn:Ed,easeInOut:ju,easeOut:kd,circIn:qs,circInOut:Pu,circOut:wu,backIn:Ks,backInOut:yu,backOut:vu,anticipate:xu},Zr=i=>{if(Ms(i)){Fa(i.length===4);const[n,s,r,u]=i;return hi(n,s,r,u)}else if(typeof i=="string")return Dd[i];return i};function Rd(i,n,s){const r=[],u=s||Nu,c=i.length-1;for(let h=0;h<c;h++){let f=u(i[h],i[h+1]);if(n){const d=Array.isArray(n)?n[h]||Et:n;f=ci(d,f)}r.push(f)}return r}function Id(i,n,{clamp:s=!0,ease:r,mixer:u}={}){const c=i.length;if(Fa(c===n.length),c===1)return()=>n[0];if(c===2&&n[0]===n[1])return()=>n[1];const h=i[0]===i[1];i[0]>i[c-1]&&(i=[...i].reverse(),n=[...n].reverse());const f=Rd(n,r,u),d=f.length,_=p=>{if(h&&p<i[0])return n[0];let v=0;if(d>1)for(;v<i.length-2&&!(p<i[v+1]);v++);const y=ti(i[v],i[v+1],p);return f[v](y)};return s?p=>_(Kt(i[0],i[c-1],p)):_}function Bd(i,n){const s=i[i.length-1];for(let r=1;r<=n;r++){const u=ti(0,n,r);i.push(et(s,1,u))}}function zd(i){const n=[0];return Bd(n,i.length-1),n}function Vd(i,n){return i.map(s=>s*n)}function Zd(i,n){return i.map(()=>n||ju).splice(0,i.length-1)}function Wi({duration:i=300,keyframes:n,times:s,ease:r="easeInOut"}){const u=Od(r)?r.map(Zr):Zr(r),c={done:!1,value:n[0]},h=Vd(s&&s.length===n.length?s:zd(n),i),f=Id(h,n,{ease:Array.isArray(u)?u:Zd(n,u)});return{calculatedDuration:i,next:d=>(c.value=f(d),c.done=d>=i,c)}}const Nd=i=>{const n=({timestamp:s})=>i(s);return{start:()=>J.update(n,!0),stop:()=>Jt(n),now:()=>mt.isProcessing?mt.timestamp:Nt.now()}},Fd={decay:Vr,inertia:Vr,tween:Wi,keyframes:Wi,spring:ji},jd=i=>i/100;class Qs extends Vu{constructor(n){super(n),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:s,motionValue:r,element:u,keyframes:c}=this.options,h=(u==null?void 0:u.KeyframeResolver)||Xs,f=(d,_)=>this.onKeyframesResolved(d,_);this.resolver=new h(c,f,s,r,u),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(n){const{type:s="keyframes",repeat:r=0,repeatDelay:u=0,repeatType:c,velocity:h=0}=this.options,f=As(s)?s:Fd[s]||Wi;let d,_;f!==Wi&&typeof n[0]!="number"&&(d=ci(jd,Nu(n[0],n[1])),n=[0,100]);const p=f({...this.options,keyframes:n});c==="mirror"&&(_=f({...this.options,keyframes:[...n].reverse(),velocity:-h})),p.calculatedDuration===null&&(p.calculatedDuration=ks(p));const{calculatedDuration:v}=p,y=v+u,w=y*(r+1)-u;return{generator:p,mirroredGenerator:_,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:y,totalDuration:w}}onPostResolved(){const{autoplay:n=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!n?this.pause():this.state=this.pendingPlayState}tick(n,s=!1){const{resolved:r}=this;if(!r){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:u,generator:c,mirroredGenerator:h,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:_,totalDuration:p,resolvedDuration:v}=r;if(this.startTime===null)return c.next(0);const{delay:y,repeat:w,repeatType:S,repeatDelay:C,onUpdate:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-p/this.speed,this.startTime)),s?this.currentTime=n:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(n-this.startTime)*this.speed;const M=this.currentTime-y*(this.speed>=0?1:-1),D=this.speed>=0?M<0:M>p;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let k=this.currentTime,K=c;if(w){const F=Math.min(this.currentTime,p)/v;let nt=Math.floor(F),ft=F%1;!ft&&F>=1&&(ft=1),ft===1&&nt--,nt=Math.min(nt,w+1),!!(nt%2)&&(S==="reverse"?(ft=1-ft,C&&(ft-=C/v)):S==="mirror"&&(K=h)),k=Kt(0,1,ft)*v}const R=D?{done:!1,value:d[0]}:K.next(k);f&&(R.value=f(R.value));let{done:N}=R;!D&&_!==null&&(N=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const Y=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return Y&&u!==void 0&&(R.value=Qi(d,this.options,u)),O&&O(R.value),Y&&this.finish(),R}get duration(){const{resolved:n}=this;return n?Zt(n.calculatedDuration):0}get time(){return Zt(this.currentTime)}set time(n){n=Vt(n),this.currentTime=n,this.holdTime!==null||this.speed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.speed)}get speed(){return this.playbackSpeed}set speed(n){const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=Zt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:n=Nd,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=n(c=>this.tick(c))),s&&s();const u=this.driver.now();this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=u):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}get finished(){return this.currentFinishedPromise}}const Wd=new Set(["opacity","clipPath","filter","transform"]),Hd=Ss(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Hi=10,Ud=2e4;function Gd(i){return As(i.type)||i.type==="spring"||!Ua(i.ease)}function Kd(i,n){const s=new Qs({...n,keyframes:i,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:i[0]};const u=[];let c=0;for(;!r.done&&c<Ud;)r=s.sample(c),u.push(r.value),c+=Hi;return{times:void 0,keyframes:u,duration:c-Hi,ease:"linear"}}const Wu={anticipate:xu,backInOut:yu,circInOut:Pu};function qd(i){return i in Wu}class Nr extends Vu{constructor(n){super(n);const{name:s,motionValue:r,element:u,keyframes:c}=this.options;this.resolver=new zu(c,(h,f)=>this.onKeyframesResolved(h,f),s,r,u),this.resolver.scheduleResolve()}initPlayback(n,s){let{duration:r=300,times:u,ease:c,type:h,motionValue:f,name:d,startTime:_}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof c=="string"&&ei()&&qd(c)&&(c=Wu[c]),Gd(this.options)){const{onComplete:v,onUpdate:y,motionValue:w,element:S,...C}=this.options,O=Kd(n,C);n=O.keyframes,n.length===1&&(n[1]=n[0]),r=O.duration,u=O.times,c=O.ease,h="keyframes"}const p=Lc(f.owner.current,d,n,{...this.options,duration:r,times:u,ease:c});return p.startTime=_??this.calcStartTime(),this.pendingTimeline?(pr(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;f.set(Qi(n,this.options,s)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:u,type:h,ease:c,keyframes:n}}get duration(){const{resolved:n}=this;if(!n)return 0;const{duration:s}=n;return Zt(s)}get time(){const{resolved:n}=this;if(!n)return 0;const{animation:s}=n;return Zt(s.currentTime||0)}set time(n){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=Vt(n)}get speed(){const{resolved:n}=this;if(!n)return 1;const{animation:s}=n;return s.playbackRate}get finished(){return this.resolved.animation.finished}set speed(n){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=n}get state(){const{resolved:n}=this;if(!n)return"idle";const{animation:s}=n;return s.playState}get startTime(){const{resolved:n}=this;if(!n)return null;const{animation:s}=n;return s.startTime}attachTimeline(n){if(!this._resolved)this.pendingTimeline=n;else{const{resolved:s}=this;if(!s)return Et;const{animation:r}=s;pr(r,n)}return Et}play(){if(this.isStopped)return;const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:n}=this;if(!n)return;const{animation:s,keyframes:r,duration:u,type:c,ease:h,times:f}=n;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:_,onUpdate:p,onComplete:v,element:y,...w}=this.options,S=new Qs({...w,keyframes:r,duration:u,type:c,ease:h,times:f,isGenerator:!0}),C=Vt(this.time);_.setWithVelocity(S.sample(C-Hi).value,S.sample(C).value,Hi)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:n}=this;n&&n.animation.finish()}cancel(){const{resolved:n}=this;n&&n.animation.cancel()}static supports(n){const{motionValue:s,name:r,repeatDelay:u,repeatType:c,damping:h,type:f}=n;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:_}=s.owner.getProps();return Hd()&&r&&Wd.has(r)&&(r!=="transform"||!_)&&!d&&!u&&c!=="mirror"&&h!==0&&f!=="inertia"}}const $d={type:"spring",stiffness:500,damping:25,restSpeed:10},Yd=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),Xd={type:"keyframes",duration:.8},Jd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qd=(i,{keyframes:n})=>n.length>2?Xd:ce.has(i)?i.startsWith("scale")?Yd(n[1]):$d:Jd;function tm({when:i,delay:n,delayChildren:s,staggerChildren:r,staggerDirection:u,repeat:c,repeatType:h,repeatDelay:f,from:d,elapsed:_,...p}){return!!Object.keys(p).length}const to=(i,n,s,r={},u,c)=>h=>{const f=Es(r,i)||{},d=f.delay||r.delay||0;let{elapsed:_=0}=r;_=_-Vt(d);let p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...f,delay:-_,onUpdate:y=>{n.set(y),f.onUpdate&&f.onUpdate(y)},onComplete:()=>{h(),f.onComplete&&f.onComplete()},name:i,motionValue:n,element:c?void 0:u};tm(f)||(p={...p,...Qd(i,p)}),p.duration&&(p.duration=Vt(p.duration)),p.repeatDelay&&(p.repeatDelay=Vt(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),p.allowFlatten=!f.type&&!f.ease,v&&!c&&n.get()!==void 0){const y=Qi(p.keyframes,f);if(y!==void 0)return J.update(()=>{p.onUpdate(y),p.onComplete()}),new Pc([])}return!c&&Nr.supports(p)?new Nr(p):new Qs(p)};function em({protectedKeys:i,needsAnimating:n},s){const r=i.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,r}function Hu(i,n,{delay:s=0,transitionOverride:r,type:u}={}){let{transition:c=i.getDefaultTransition(),transitionEnd:h,...f}=n;r&&(c=r);const d=[],_=u&&i.animationState&&i.animationState.getState()[u];for(const p in f){const v=i.getValue(p,i.latestValues[p]??null),y=f[p];if(y===void 0||_&&em(_,p))continue;const w={delay:s,...Es(c||{},p)};let S=!1;if(window.MotionHandoffAnimation){const O=mu(i);if(O){const M=window.MotionHandoffAnimation(O,p,J);M!==null&&(w.startTime=M,S=!0)}}is(i,p),v.start(to(p,v,y,i.shouldReduceMotion&&du.has(p)?{type:!1}:w,i,S));const C=v.animation;C&&d.push(C)}return h&&Promise.all(d).then(()=>{J.update(()=>{h&&Ef(i,h)})}),d}function fs(i,n,s={}){var d;const r=ri(i,n,s.type==="exit"?(d=i.presenceContext)==null?void 0:d.custom:void 0);let{transition:u=i.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(u=s.transitionOverride);const c=r?()=>Promise.all(Hu(i,r,s)):()=>Promise.resolve(),h=i.variantChildren&&i.variantChildren.size?(_=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:y}=u;return im(i,n,p+_,v,y,s)}:()=>Promise.resolve(),{when:f}=u;if(f){const[_,p]=f==="beforeChildren"?[c,h]:[h,c];return _().then(()=>p())}else return Promise.all([c(),h(s.delay)])}function im(i,n,s=0,r=0,u=1,c){const h=[],f=(i.variantChildren.size-1)*r,d=u===1?(_=0)=>_*r:(_=0)=>f-_*r;return Array.from(i.variantChildren).sort(nm).forEach((_,p)=>{_.notify("AnimationStart",n),h.push(fs(_,n,{...c,delay:s+d(p)}).then(()=>_.notify("AnimationComplete",n)))}),Promise.all(h)}function nm(i,n){return i.sortNodePosition(n)}function sm(i,n,s={}){i.notify("AnimationStart",n);let r;if(Array.isArray(n)){const u=n.map(c=>fs(i,c,s));r=Promise.all(u)}else if(typeof n=="string")r=fs(i,n,s);else{const u=typeof n=="function"?ri(i,n,s.custom):n;r=Promise.all(Hu(i,u,s))}return r.then(()=>{i.notify("AnimationComplete",n)})}function Uu(i,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==i.length)return!1;for(let r=0;r<s;r++)if(n[r]!==i[r])return!1;return!0}const om=Is.length;function Gu(i){if(!i)return;if(!i.isControllingVariants){const s=i.parent?Gu(i.parent)||{}:{};return i.props.initial!==void 0&&(s.initial=i.props.initial),s}const n={};for(let s=0;s<om;s++){const r=Is[s],u=i.props[r];(ni(u)||u===!1)&&(n[r]=u)}return n}const rm=[...Rs].reverse(),am=Rs.length;function um(i){return n=>Promise.all(n.map(({animation:s,options:r})=>sm(i,s,r)))}function lm(i){let n=um(i),s=Fr(),r=!0;const u=d=>(_,p)=>{var y;const v=ri(i,p,d==="exit"?(y=i.presenceContext)==null?void 0:y.custom:void 0);if(v){const{transition:w,transitionEnd:S,...C}=v;_={..._,...C,...S}}return _};function c(d){n=d(i)}function h(d){const{props:_}=i,p=Gu(i.parent)||{},v=[],y=new Set;let w={},S=1/0;for(let O=0;O<am;O++){const M=rm[O],D=s[M],k=_[M]!==void 0?_[M]:p[M],K=ni(k),R=M===d?D.isActive:null;R===!1&&(S=O);let N=k===p[M]&&k!==_[M]&&K;if(N&&r&&i.manuallyAnimateOnMount&&(N=!1),D.protectedKeys={...w},!D.isActive&&R===null||!k&&!D.prevProp||Xi(k)||typeof k=="boolean")continue;const Y=hm(D.prevProp,k);let F=Y||M===d&&D.isActive&&!N&&K||O>S&&K,nt=!1;const ft=Array.isArray(k)?k:[k];let st=ft.reduce(u(M),{});R===!1&&(st={});const{prevResolvedValues:gt={}}=D,tn={...gt,...st},bt=ot=>{F=!0,y.has(ot)&&(nt=!0,y.delete(ot)),D.needsAnimating[ot]=!0;const B=i.getValue(ot);B&&(B.liveStyle=!1)};for(const ot in tn){const B=st[ot],fe=gt[ot];if(w.hasOwnProperty(ot))continue;let Z=!1;es(B)&&es(fe)?Z=!Uu(B,fe):Z=B!==fe,Z?B!=null?bt(ot):y.add(ot):B!==void 0&&y.has(ot)?bt(ot):D.protectedKeys[ot]=!0}D.prevProp=k,D.prevResolvedValues=st,D.isActive&&(w={...w,...st}),r&&i.blockInitialAnimation&&(F=!1),F&&(!(N&&Y)||nt)&&v.push(...ft.map(ot=>({animation:ot,options:{type:M}})))}if(y.size){const O={};if(typeof _.initial!="boolean"){const M=ri(i,Array.isArray(_.initial)?_.initial[0]:_.initial);M&&M.transition&&(O.transition=M.transition)}y.forEach(M=>{const D=i.getBaseTarget(M),k=i.getValue(M);k&&(k.liveStyle=!0),O[M]=D??null}),v.push({animation:O})}let C=!!v.length;return r&&(_.initial===!1||_.initial===_.animate)&&!i.manuallyAnimateOnMount&&(C=!1),r=!1,C?n(v):Promise.resolve()}function f(d,_){var v;if(s[d].isActive===_)return Promise.resolve();(v=i.variantChildren)==null||v.forEach(y=>{var w;return(w=y.animationState)==null?void 0:w.setActive(d,_)}),s[d].isActive=_;const p=h(d);for(const y in s)s[y].protectedKeys={};return p}return{animateChanges:h,setActive:f,setAnimateFunction:c,getState:()=>s,reset:()=>{s=Fr(),r=!0}}}function hm(i,n){return typeof n=="string"?n!==i:Array.isArray(n)?!Uu(n,i):!1}function re(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fr(){return{animate:re(!0),whileInView:re(),whileHover:re(),whileTap:re(),whileDrag:re(),whileFocus:re(),exit:re()}}class te{constructor(n){this.isMounted=!1,this.node=n}update(){}}class cm extends te{constructor(n){super(n),n.animationState||(n.animationState=lm(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Xi(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let fm=0;class dm extends te{constructor(){super(...arguments),this.id=fm++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===r)return;const u=this.node.animationState.setActive("exit",!n);s&&!n&&u.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const mm={animation:{Feature:cm},exit:{Feature:dm}};function ui(i,n,s,r={passive:!0}){return i.addEventListener(n,s,r),()=>i.removeEventListener(n,s)}function fi(i){return{point:{x:i.pageX,y:i.pageY}}}const pm=i=>n=>Ds(n)&&i(n,fi(n));function Xe(i,n,s,r){return ui(i,n,pm(s),r)}function Ku({top:i,left:n,right:s,bottom:r}){return{x:{min:n,max:s},y:{min:i,max:r}}}function _m({x:i,y:n}){return{top:n.min,right:i.max,bottom:n.max,left:i.min}}function gm(i,n){if(!n)return i;const s=n({x:i.left,y:i.top}),r=n({x:i.right,y:i.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}const qu=1e-4,vm=1-qu,ym=1+qu,$u=.01,xm=0-$u,wm=0+$u;function yt(i){return i.max-i.min}function Pm(i,n,s){return Math.abs(i-n)<=s}function jr(i,n,s,r=.5){i.origin=r,i.originPoint=et(n.min,n.max,i.origin),i.scale=yt(s)/yt(n),i.translate=et(s.min,s.max,i.origin)-i.originPoint,(i.scale>=vm&&i.scale<=ym||isNaN(i.scale))&&(i.scale=1),(i.translate>=xm&&i.translate<=wm||isNaN(i.translate))&&(i.translate=0)}function Je(i,n,s,r){jr(i.x,n.x,s.x,r?r.originX:void 0),jr(i.y,n.y,s.y,r?r.originY:void 0)}function Wr(i,n,s){i.min=s.min+n.min,i.max=i.min+yt(n)}function Tm(i,n,s){Wr(i.x,n.x,s.x),Wr(i.y,n.y,s.y)}function Hr(i,n,s){i.min=n.min-s.min,i.max=i.min+yt(n)}function Qe(i,n,s){Hr(i.x,n.x,s.x),Hr(i.y,n.y,s.y)}const Ur=()=>({translate:0,scale:1,origin:0,originPoint:0}),be=()=>({x:Ur(),y:Ur()}),Gr=()=>({min:0,max:0}),at=()=>({x:Gr(),y:Gr()});function At(i){return[i("x"),i("y")]}function jn(i){return i===void 0||i===1}function ds({scale:i,scaleX:n,scaleY:s}){return!jn(i)||!jn(n)||!jn(s)}function ae(i){return ds(i)||Yu(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function Yu(i){return Kr(i.x)||Kr(i.y)}function Kr(i){return i&&i!=="0%"}function Ui(i,n,s){const r=i-s,u=n*r;return s+u}function qr(i,n,s,r,u){return u!==void 0&&(i=Ui(i,u,r)),Ui(i,s,r)+n}function ms(i,n=0,s=1,r,u){i.min=qr(i.min,n,s,r,u),i.max=qr(i.max,n,s,r,u)}function Xu(i,{x:n,y:s}){ms(i.x,n.translate,n.scale,n.originPoint),ms(i.y,s.translate,s.scale,s.originPoint)}const $r=.999999999999,Yr=1.0000000000001;function bm(i,n,s,r=!1){const u=s.length;if(!u)return;n.x=n.y=1;let c,h;for(let f=0;f<u;f++){c=s[f],h=c.projectionDelta;const{visualElement:d}=c.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Se(i,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),h&&(n.x*=h.x.scale,n.y*=h.y.scale,Xu(i,h)),r&&ae(c.latestValues)&&Se(i,c.latestValues))}n.x<Yr&&n.x>$r&&(n.x=1),n.y<Yr&&n.y>$r&&(n.y=1)}function Le(i,n){i.min=i.min+n,i.max=i.max+n}function Xr(i,n,s,r,u=.5){const c=et(i.min,i.max,u);ms(i,n,s,c,r)}function Se(i,n){Xr(i.x,n.x,n.scaleX,n.scale,n.originX),Xr(i.y,n.y,n.scaleY,n.scale,n.originY)}function Ju(i,n){return Ku(gm(i.getBoundingClientRect(),n))}function Lm(i,n,s){const r=Ju(i,s),{scroll:u}=n;return u&&(Le(r.x,u.offset.x),Le(r.y,u.offset.y)),r}const Qu=({current:i})=>i?i.ownerDocument.defaultView:null,Jr=(i,n)=>Math.abs(i-n);function Sm(i,n){const s=Jr(i.x,n.x),r=Jr(i.y,n.y);return Math.sqrt(s**2+r**2)}class tl{constructor(n,s,{transformPagePoint:r,contextWindow:u,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Hn(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=Sm(v.offset,{x:0,y:0})>=3;if(!y&&!w)return;const{point:S}=v,{timestamp:C}=mt;this.history.push({...S,timestamp:C});const{onStart:O,onMove:M}=this.handlers;y||(O&&O(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Wn(y,this.transformPagePoint),J.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=Hn(v.type==="pointercancel"?this.lastMoveEventInfo:Wn(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,O),S&&S(v,O)},!Ds(n))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=r,this.contextWindow=u||window;const h=fi(n),f=Wn(h,this.transformPagePoint),{point:d}=f,{timestamp:_}=mt;this.history=[{...d,timestamp:_}];const{onSessionStart:p}=s;p&&p(n,Hn(f,this.history)),this.removeListeners=ci(Xe(this.contextWindow,"pointermove",this.handlePointerMove),Xe(this.contextWindow,"pointerup",this.handlePointerUp),Xe(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Jt(this.updatePoint)}}function Wn(i,n){return n?{point:n(i.point)}:i}function Qr(i,n){return{x:i.x-n.x,y:i.y-n.y}}function Hn({point:i},n){return{point:i,delta:Qr(i,el(n)),offset:Qr(i,Cm(n)),velocity:Mm(n,.1)}}function Cm(i){return i[0]}function el(i){return i[i.length-1]}function Mm(i,n){if(i.length<2)return{x:0,y:0};let s=i.length-1,r=null;const u=el(i);for(;s>=0&&(r=i[s],!(u.timestamp-r.timestamp>Vt(n)));)s--;if(!r)return{x:0,y:0};const c=Zt(u.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const h={x:(u.x-r.x)/c,y:(u.y-r.y)/c};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function Am(i,{min:n,max:s},r){return n!==void 0&&i<n?i=r?et(n,i,r.min):Math.max(i,n):s!==void 0&&i>s&&(i=r?et(s,i,r.max):Math.min(i,s)),i}function ta(i,n,s){return{min:n!==void 0?i.min+n:void 0,max:s!==void 0?i.max+s-(i.max-i.min):void 0}}function Em(i,{top:n,left:s,bottom:r,right:u}){return{x:ta(i.x,s,u),y:ta(i.y,n,r)}}function ea(i,n){let s=n.min-i.min,r=n.max-i.max;return n.max-n.min<i.max-i.min&&([s,r]=[r,s]),{min:s,max:r}}function km(i,n){return{x:ea(i.x,n.x),y:ea(i.y,n.y)}}function Om(i,n){let s=.5;const r=yt(i),u=yt(n);return u>r?s=ti(n.min,n.max-r,i.min):r>u&&(s=ti(i.min,i.max-u,n.min)),Kt(0,1,s)}function Dm(i,n){const s={};return n.min!==void 0&&(s.min=n.min-i.min),n.max!==void 0&&(s.max=n.max-i.min),s}const ps=.35;function Rm(i=ps){return i===!1?i=0:i===!0&&(i=ps),{x:ia(i,"left","right"),y:ia(i,"top","bottom")}}function ia(i,n,s){return{min:na(i,n),max:na(i,s)}}function na(i,n){return typeof i=="number"?i:i[n]||0}const Im=new WeakMap;class Bm{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=n}start(n,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const u=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(fi(p).point)},c=(p,v)=>{const{drag:y,dragPropagation:w,onDragStart:S}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ec(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(O=>{let M=this.getAxisMotionValue(O).get()||0;if(Ft.test(M)){const{projection:D}=this.visualElement;if(D&&D.layout){const k=D.layout.layoutBox[O];k&&(M=yt(k)*(parseFloat(M)/100))}}this.originPoint[O]=M}),S&&J.postRender(()=>S(p,v)),is(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},h=(p,v)=>{const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:S,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:O}=v;if(w&&this.currentDirection===null){this.currentDirection=zm(O),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,O),this.updateAxis("y",v.point,O),this.visualElement.render(),C&&C(p,v)},f=(p,v)=>this.stop(p,v),d=()=>At(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)==null?void 0:v.play())}),{dragSnapToOrigin:_}=this.getProps();this.panSession=new tl(n,{onSessionStart:u,onStart:c,onMove:h,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,contextWindow:Qu(this.visualElement)})}stop(n,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&J.postRender(()=>c(n,s))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,r){const{drag:u}=this.getProps();if(!r||!Ii(n,u,this.currentDirection))return;const c=this.getAxisMotionValue(n);let h=this.originPoint[n]+r[n];this.constraints&&this.constraints[n]&&(h=Am(h,this.constraints[n],this.elastic[n])),c.set(h)}resolveConstraints(){var c;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,u=this.constraints;n&&Pe(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Em(r.layoutBox,n):this.constraints=!1,this.elastic=Rm(s),u!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&At(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Dm(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!Pe(n))return!1;const r=n.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const c=Lm(r,u.root,this.visualElement.getTransformPagePoint());let h=km(u.layout.layoutBox,c);if(s){const f=s(_m(h));this.hasMutatedConstraints=!!f,f&&(h=Ku(f))}return h}startAnimation(n){const{drag:s,dragMomentum:r,dragElastic:u,dragTransition:c,dragSnapToOrigin:h,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},_=At(p=>{if(!Ii(p,s,this.currentDirection))return;let v=d&&d[p]||{};h&&(v={min:0,max:0});const y=u?200:1e6,w=u?40:1e7,S={type:"inertia",velocity:r?n[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...c,...v};return this.startAxisValueAnimation(p,S)});return Promise.all(_).then(f)}startAxisValueAnimation(n,s){const r=this.getAxisMotionValue(n);return is(this.visualElement,n),r.start(to(n,r,0,s,this.visualElement,!1))}stopAnimation(){At(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){At(n=>{var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.pause()})}getAnimationState(n){var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,r=this.visualElement.getProps(),u=r[s];return u||this.visualElement.getValue(n,(r.initial?r.initial[n]:void 0)||0)}snapToCursor(n){At(s=>{const{drag:r}=this.getProps();if(!Ii(s,r,this.currentDirection))return;const{projection:u}=this.visualElement,c=this.getAxisMotionValue(s);if(u&&u.layout){const{min:h,max:f}=u.layout.layoutBox[s];c.set(n[s]-et(h,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Pe(s)||!r||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};At(h=>{const f=this.getAxisMotionValue(h);if(f&&this.constraints!==!1){const d=f.get();u[h]=Om({min:d,max:d},this.constraints[h])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),At(h=>{if(!Ii(h,n,null))return;const f=this.getAxisMotionValue(h),{min:d,max:_}=this.constraints[h];f.set(et(d,_,u[h]))})}addListeners(){if(!this.visualElement.current)return;Im.set(this.visualElement,this);const n=this.visualElement.current,s=Xe(n,"pointerdown",d=>{const{drag:_,dragListener:p=!0}=this.getProps();_&&p&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Pe(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,c=u.addEventListener("measure",r);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),J.read(r);const h=ui(window,"resize",()=>this.scalePositionWithinConstraints()),f=u.addEventListener("didUpdate",({delta:d,hasLayoutChanged:_})=>{this.isDragging&&_&&(At(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())});return()=>{h(),s(),c(),f&&f()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:u=!1,dragConstraints:c=!1,dragElastic:h=ps,dragMomentum:f=!0}=n;return{...n,drag:s,dragDirectionLock:r,dragPropagation:u,dragConstraints:c,dragElastic:h,dragMomentum:f}}}function Ii(i,n,s){return(n===!0||n===i)&&(s===null||s===i)}function zm(i,n=10){let s=null;return Math.abs(i.y)>n?s="y":Math.abs(i.x)>n&&(s="x"),s}class Vm extends te{constructor(n){super(n),this.removeGroupControls=Et,this.removeListeners=Et,this.controls=new Bm(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Et}unmount(){this.removeGroupControls(),this.removeListeners()}}const sa=i=>(n,s)=>{i&&J.postRender(()=>i(n,s))};class Zm extends te{constructor(){super(...arguments),this.removePointerDownListener=Et}onPointerDown(n){this.session=new tl(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qu(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:r,onPanEnd:u}=this.node.getProps();return{onSessionStart:sa(n),onStart:sa(s),onMove:r,onEnd:(c,h)=>{delete this.session,u&&J.postRender(()=>u(c,h))}}}mount(){this.removePointerDownListener=Xe(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oa(i,n){return n.max===n.min?0:i/(n.max-n.min)*100}const Ke={correct:(i,n)=>{if(!n.target)return i;if(typeof i=="string")if(z.test(i))i=parseFloat(i);else return i;const s=oa(i,n.target.x),r=oa(i,n.target.y);return`${s}% ${r}%`}},Nm={correct:(i,{treeScale:n,projectionDelta:s})=>{const r=i,u=Qt.parse(i);if(u.length>5)return r;const c=Qt.createTransformer(i),h=typeof u[0]!="number"?1:0,f=s.x.scale*n.x,d=s.y.scale*n.y;u[0+h]/=f,u[1+h]/=d;const _=et(f,d,.5);return typeof u[2+h]=="number"&&(u[2+h]/=_),typeof u[3+h]=="number"&&(u[3+h]/=_),c(u)}};class Fm extends b.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:r,layoutId:u}=this.props,{projection:c}=n;sf(jm),c&&(s.group&&s.group.add(c),r&&r.register&&u&&r.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Vi.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:r,drag:u,isPresent:c}=this.props,h=r.projection;return h&&(h.isPresent=c,u||n.layoutDependency!==s||s===void 0||n.isPresent!==c?h.willUpdate():this.safeToRemove(),n.isPresent!==c&&(c?h.promote():h.relegate()||J.postRender(()=>{const f=h.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Os.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:u}=n;u&&(u.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(u),r&&r.deregister&&r.deregister(u))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function il(i){const[n,s]=Na(),r=b.useContext(xs);return A.jsx(Fm,{...i,layoutGroup:r,switchLayoutGroup:b.useContext(tu),isPresent:n,safeToRemove:s})}const jm={borderRadius:{...Ke,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ke,borderTopRightRadius:Ke,borderBottomLeftRadius:Ke,borderBottomRightRadius:Ke,boxShadow:Nm};function Wm(i,n,s){const r=_t(i)?i:ii(i);return r.start(to("",r,n,s)),r.animation}function Hm(i){return i instanceof SVGElement&&i.tagName!=="svg"}const Um=(i,n)=>i.depth-n.depth;class Gm{constructor(){this.children=[],this.isDirty=!1}add(n){bs(this.children,n),this.isDirty=!0}remove(n){Ls(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(Um),this.isDirty=!1,this.children.forEach(n)}}function Km(i,n){const s=Nt.now(),r=({timestamp:u})=>{const c=u-s;c>=n&&(Jt(r),i(c-n))};return J.read(r,!0),()=>Jt(r)}const nl=["TopLeft","TopRight","BottomLeft","BottomRight"],qm=nl.length,ra=i=>typeof i=="string"?parseFloat(i):i,aa=i=>typeof i=="number"||z.test(i);function $m(i,n,s,r,u,c){u?(i.opacity=et(0,s.opacity??1,Ym(r)),i.opacityExit=et(n.opacity??1,0,Xm(r))):c&&(i.opacity=et(n.opacity??1,s.opacity??1,r));for(let h=0;h<qm;h++){const f=`border${nl[h]}Radius`;let d=ua(n,f),_=ua(s,f);if(d===void 0&&_===void 0)continue;d||(d=0),_||(_=0),d===0||_===0||aa(d)===aa(_)?(i[f]=Math.max(et(ra(d),ra(_),r),0),(Ft.test(_)||Ft.test(d))&&(i[f]+="%")):i[f]=_}(n.rotate||s.rotate)&&(i.rotate=et(n.rotate||0,s.rotate||0,r))}function ua(i,n){return i[n]!==void 0?i[n]:i.borderRadius}const Ym=sl(0,.5,wu),Xm=sl(.5,.95,Et);function sl(i,n,s){return r=>r<i?0:r>n?1:s(ti(i,n,r))}function la(i,n){i.min=n.min,i.max=n.max}function Mt(i,n){la(i.x,n.x),la(i.y,n.y)}function ha(i,n){i.translate=n.translate,i.scale=n.scale,i.originPoint=n.originPoint,i.origin=n.origin}function ca(i,n,s,r,u){return i-=n,i=Ui(i,1/s,r),u!==void 0&&(i=Ui(i,1/u,r)),i}function Jm(i,n=0,s=1,r=.5,u,c=i,h=i){if(Ft.test(n)&&(n=parseFloat(n),n=et(h.min,h.max,n/100)-h.min),typeof n!="number")return;let f=et(c.min,c.max,r);i===c&&(f-=n),i.min=ca(i.min,n,s,f,u),i.max=ca(i.max,n,s,f,u)}function fa(i,n,[s,r,u],c,h){Jm(i,n[s],n[r],n[u],n.scale,c,h)}const Qm=["x","scaleX","originX"],tp=["y","scaleY","originY"];function da(i,n,s,r){fa(i.x,n,Qm,s?s.x:void 0,r?r.x:void 0),fa(i.y,n,tp,s?s.y:void 0,r?r.y:void 0)}function ma(i){return i.translate===0&&i.scale===1}function ol(i){return ma(i.x)&&ma(i.y)}function pa(i,n){return i.min===n.min&&i.max===n.max}function ep(i,n){return pa(i.x,n.x)&&pa(i.y,n.y)}function _a(i,n){return Math.round(i.min)===Math.round(n.min)&&Math.round(i.max)===Math.round(n.max)}function rl(i,n){return _a(i.x,n.x)&&_a(i.y,n.y)}function ga(i){return yt(i.x)/yt(i.y)}function va(i,n){return i.translate===n.translate&&i.scale===n.scale&&i.originPoint===n.originPoint}class ip{constructor(){this.members=[]}add(n){bs(this.members,n),n.scheduleRender()}remove(n){if(Ls(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(u=>n===u);if(s===0)return!1;let r;for(let u=s;u>=0;u--){const c=this.members[u];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(n,s){const r=this.lead;if(n!==r&&(this.prevLead=r,this.lead=n,n.show(),r)){r.instance&&r.scheduleRender(),n.scheduleRender(),n.resumeFrom=r,s&&(n.resumeFrom.preserveOpacity=!0),r.snapshot&&(n.snapshot=r.snapshot,n.snapshot.latestValues=r.animationValues||r.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:u}=n.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:r}=n;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function np(i,n,s){let r="";const u=i.x.translate/n.x,c=i.y.translate/n.y,h=(s==null?void 0:s.z)||0;if((u||c||h)&&(r=`translate3d(${u}px, ${c}px, ${h}px) `),(n.x!==1||n.y!==1)&&(r+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:_,rotate:p,rotateX:v,rotateY:y,skewX:w,skewY:S}=s;_&&(r=`perspective(${_}px) ${r}`),p&&(r+=`rotate(${p}deg) `),v&&(r+=`rotateX(${v}deg) `),y&&(r+=`rotateY(${y}deg) `),w&&(r+=`skewX(${w}deg) `),S&&(r+=`skewY(${S}deg) `)}const f=i.x.scale*n.x,d=i.y.scale*n.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const Un=["","X","Y","Z"],sp={visibility:"hidden"},ya=1e3;let op=0;function Gn(i,n,s,r){const{latestValues:u}=n;u[i]&&(s[i]=u[i],n.setStaticValue(i,0),r&&(r[i]=0))}function al(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:n}=i.options;if(!n)return;const s=mu(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:u,layoutId:c}=i.options;window.MotionCancelOptimisedAnimation(s,"transform",J,!(u||c))}const{parent:r}=i;r&&!r.hasCheckedOptimisedAppear&&al(r)}function ul({attachResizeListener:i,defaultParent:n,measureScroll:s,checkIsScrollRoot:r,resetTransform:u}){return class{constructor(h={},f=n==null?void 0:n()){this.id=op++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(up),this.nodes.forEach(dp),this.nodes.forEach(mp),this.nodes.forEach(lp)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gm)}addEventListener(h,f){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new Cs),this.eventHandlers.get(h).add(f)}notifyListeners(h,...f){const d=this.eventHandlers.get(h);d&&d.notify(...f)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Hm(h),this.instance=h;const{layoutId:d,layout:_,visualElement:p}=this.options;if(p&&!p.current&&p.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(_||d)&&(this.isLayoutDirty=!0),i){let v;const y=()=>this.root.updateBlockedByResize=!1;i(h,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=Km(y,250),Vi.hasAnimatedSinceResize&&(Vi.hasAnimatedSinceResize=!1,this.nodes.forEach(wa))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||_)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||yp,{onLayoutAnimationStart:O,onLayoutAnimationComplete:M}=p.getProps(),D=!this.targetLayout||!rl(this.targetLayout,S),k=!y&&w;if(this.options.layoutRoot||this.resumeFrom||k||y&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,k);const K={...Es(C,"layout"),onPlay:O,onComplete:M};(p.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K)}else y||wa(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Jt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pp),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&al(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xa);return}this.isUpdating||this.nodes.forEach(cp),this.isUpdating=!1,this.nodes.forEach(fp),this.nodes.forEach(rp),this.nodes.forEach(ap),this.clearAllSnapshots();const f=Nt.now();mt.delta=Kt(0,1e3/60,f-mt.timestamp),mt.timestamp=f,mt.isProcessing=!0,Bn.update.process(mt),Bn.preRender.process(mt),Bn.render.process(mt),mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Os.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hp),this.sharedNodes.forEach(_p)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,J.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){J.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yt(this.snapshot.measuredBox.x)&&!yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!u)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!ol(this.projectionDelta),d=this.getTransformTemplate(),_=d?d(this.latestValues,""):void 0,p=_!==this.prevTransformTemplateValue;h&&(f||ae(this.latestValues)||p)&&(u(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return h&&(d=this.removeTransform(d)),xp(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var _;const{visualElement:h}=this.options;if(!h)return at();const f=h.measureViewportBox();if(!(((_=this.scroll)==null?void 0:_.wasRoot)||this.path.some(wp))){const{scroll:p}=this.root;p&&(Le(f.x,p.offset.x),Le(f.y,p.offset.y))}return f}removeElementScroll(h){var d;const f=at();if(Mt(f,h),(d=this.scroll)!=null&&d.wasRoot)return f;for(let _=0;_<this.path.length;_++){const p=this.path[_],{scroll:v,options:y}=p;p!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&Mt(f,h),Le(f.x,v.offset.x),Le(f.y,v.offset.y))}return f}applyTransform(h,f=!1){const d=at();Mt(d,h);for(let _=0;_<this.path.length;_++){const p=this.path[_];!f&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Se(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ae(p.latestValues)&&Se(d,p.latestValues)}return ae(this.latestValues)&&Se(d,this.latestValues),d}removeTransform(h){const f=at();Mt(f,h);for(let d=0;d<this.path.length;d++){const _=this.path[d];if(!_.instance||!ae(_.latestValues))continue;ds(_.latestValues)&&_.updateSnapshot();const p=at(),v=_.measurePageBox();Mt(p,v),da(f,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,p)}return ae(this.latestValues)&&da(f,this.latestValues),f}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var y;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(h||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=mt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Qe(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Mt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Tm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mt(this.target,this.layout.layoutBox),Xu(this.target,this.targetDelta)):Mt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Qe(this.relativeTargetOrigin,this.target,w.target),Mt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ds(this.parent.latestValues)||Yu(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let d=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===mt.timestamp&&(d=!1),d)return;const{layout:_,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||p))return;Mt(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;bm(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=at());const{target:w}=h;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ha(this.prevProjectionDelta.x,this.projectionDelta.x),ha(this.prevProjectionDelta.y,this.projectionDelta.y)),Je(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!va(this.projectionDelta.x,this.prevProjectionDelta.x)||!va(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),h){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=be(),this.projectionDelta=be(),this.projectionDeltaWithTransform=be()}setAnimationOrigin(h,f=!1){const d=this.snapshot,_=d?d.latestValues:{},p={...this.latestValues},v=be();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const y=at(),w=d?d.source:void 0,S=this.layout?this.layout.source:void 0,C=w!==S,O=this.getStack(),M=!O||O.members.length<=1,D=!!(C&&!M&&this.options.crossfade===!0&&!this.path.some(vp));this.animationProgress=0;let k;this.mixTargetDelta=K=>{const R=K/1e3;Pa(v.x,h.x,R),Pa(v.y,h.y,R),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qe(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gp(this.relativeTarget,this.relativeTargetOrigin,y,R),k&&ep(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=at()),Mt(k,this.relativeTarget)),C&&(this.animationValues=p,$m(p,_,this.latestValues,R,D,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Jt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J.update(()=>{Vi.hasAnimatedSinceResize=!0,this.currentAnimation=Wm(0,ya,{...h,onUpdate:f=>{this.mixTargetDelta(f),h.onUpdate&&h.onUpdate(f)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ya),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:f,target:d,layout:_,latestValues:p}=h;if(!(!f||!d||!_)){if(this!==h&&this.layout&&_&&ll(this.options.animationType,this.layout.layoutBox,_.layoutBox)){d=this.target||at();const v=yt(this.layout.layoutBox.x);d.x.min=h.target.x.min,d.x.max=d.x.min+v;const y=yt(this.layout.layoutBox.y);d.y.min=h.target.y.min,d.y.max=d.y.min+y}Mt(f,d),Se(f,p),Je(this.projectionDeltaWithTransform,this.layoutCorrected,f,p)}}registerSharedNode(h,f){this.sharedNodes.has(h)||this.sharedNodes.set(h,new ip),this.sharedNodes.get(h).add(f);const _=f.options.initialPromotionConfig;f.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(f):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var f;const{layoutId:h}=this.options;return h?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:h}=this.options;return h?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:f,preserveFollowOpacity:d}={}){const _=this.getStack();_&&_.promote(this,d),h&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let f=!1;const{latestValues:d}=h;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const _={};d.z&&Gn("z",h,_,this.animationValues);for(let p=0;p<Un.length;p++)Gn(`rotate${Un[p]}`,h,_,this.animationValues),Gn(`skew${Un[p]}`,h,_,this.animationValues);h.render();for(const p in _)h.setStaticValue(p,_[p]),this.animationValues&&(this.animationValues[p]=_[p]);h.scheduleRender()}getProjectionStyles(h){if(!this.instance||this.isSVG)return;if(!this.isVisible)return sp;const f={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=zi(h==null?void 0:h.pointerEvents)||"",f.transform=d?d(this.latestValues,""):"none",f;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=zi(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!ae(this.latestValues)&&(w.transform=d?d({},""):"none",this.hasProjected=!1),w}const p=_.animationValues||_.latestValues;this.applyTransformsToTarget(),f.transform=np(this.projectionDeltaWithTransform,this.treeScale,p),d&&(f.transform=d(p,f.transform));const{x:v,y}=this.projectionDelta;f.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,_.animationValues?f.opacity=_===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=_===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in si){if(p[w]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:O}=si[w],M=f.transform==="none"?p[w]:S(p[w],_);if(C){const D=C.length;for(let k=0;k<D;k++)f[C[k]]=M}else O?this.options.visualElement.renderState.vars[w]=M:f[w]=M}return this.options.layoutId&&(f.pointerEvents=_===this?zi(h==null?void 0:h.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var f;return(f=h.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(xa),this.root.sharedNodes.clear()}}}function rp(i){i.updateLayout()}function ap(i){var s;const n=((s=i.resumeFrom)==null?void 0:s.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&n&&i.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:u}=i.layout,{animationType:c}=i.options,h=n.source!==i.layout.source;c==="size"?At(v=>{const y=h?n.measuredBox[v]:n.layoutBox[v],w=yt(y);y.min=r[v].min,y.max=y.min+w}):ll(c,n.layoutBox,r)&&At(v=>{const y=h?n.measuredBox[v]:n.layoutBox[v],w=yt(r[v]);y.max=y.min+w,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+w)});const f=be();Je(f,r,n.layoutBox);const d=be();h?Je(d,i.applyTransform(u,!0),n.measuredBox):Je(d,r,n.layoutBox);const _=!ol(f);let p=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:w}=v;if(y&&w){const S=at();Qe(S,n.layoutBox,y.layoutBox);const C=at();Qe(C,r,w.layoutBox),rl(S,C)||(p=!0),v.options.layoutRoot&&(i.relativeTarget=C,i.relativeTargetOrigin=S,i.relativeParent=v)}}}i.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:_,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:r}=i.options;r&&r()}i.options.transition=void 0}function up(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function lp(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function hp(i){i.clearSnapshot()}function xa(i){i.clearMeasurements()}function cp(i){i.isLayoutDirty=!1}function fp(i){const{visualElement:n}=i.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),i.resetTransform()}function wa(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function dp(i){i.resolveTargetDelta()}function mp(i){i.calcProjection()}function pp(i){i.resetSkewAndRotation()}function _p(i){i.removeLeadSnapshot()}function Pa(i,n,s){i.translate=et(n.translate,0,s),i.scale=et(n.scale,1,s),i.origin=n.origin,i.originPoint=n.originPoint}function Ta(i,n,s,r){i.min=et(n.min,s.min,r),i.max=et(n.max,s.max,r)}function gp(i,n,s,r){Ta(i.x,n.x,s.x,r),Ta(i.y,n.y,s.y,r)}function vp(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const yp={duration:.45,ease:[.4,0,.1,1]},ba=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),La=ba("applewebkit/")&&!ba("chrome/")?Math.round:Et;function Sa(i){i.min=La(i.min),i.max=La(i.max)}function xp(i){Sa(i.x),Sa(i.y)}function ll(i,n,s){return i==="position"||i==="preserve-aspect"&&!Pm(ga(n),ga(s),.2)}function wp(i){var n;return i!==i.root&&((n=i.scroll)==null?void 0:n.wasRoot)}const Pp=ul({attachResizeListener:(i,n)=>ui(i,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kn={current:void 0},hl=ul({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Kn.current){const i=new Pp({});i.mount(window),i.setOptions({layoutScroll:!0}),Kn.current=i}return Kn.current},resetTransform:(i,n)=>{i.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Tp={pan:{Feature:Zm},drag:{Feature:Vm,ProjectionNode:hl,MeasureLayout:il}};function Ca(i,n,s){const{props:r}=i;i.animationState&&r.whileHover&&i.animationState.setActive("whileHover",s==="Start");const u="onHover"+s,c=r[u];c&&J.postRender(()=>c(n,fi(n)))}class bp extends te{mount(){const{current:n}=this.node;n&&(this.unmount=Oc(n,(s,r)=>(Ca(this.node,r,"Start"),u=>Ca(this.node,u,"End"))))}unmount(){}}class Lp extends te{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ci(ui(this.node.current,"focus",()=>this.onFocus()),ui(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ma(i,n,s){const{props:r}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&r.whileTap&&i.animationState.setActive("whileTap",s==="Start");const u="onTap"+(s==="End"?"":s),c=r[u];c&&J.postRender(()=>c(n,fi(n)))}class Sp extends te{mount(){const{current:n}=this.node;n&&(this.unmount=Bc(n,(s,r)=>(Ma(this.node,r,"Start"),(u,{success:c})=>Ma(this.node,u,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _s=new WeakMap,qn=new WeakMap,Cp=i=>{const n=_s.get(i.target);n&&n(i)},Mp=i=>{i.forEach(Cp)};function Ap({root:i,...n}){const s=i||document;qn.has(s)||qn.set(s,{});const r=qn.get(s),u=JSON.stringify(n);return r[u]||(r[u]=new IntersectionObserver(Mp,{root:i,...n})),r[u]}function Ep(i,n,s){const r=Ap(n);return _s.set(i,s),r.observe(i),()=>{_s.delete(i),r.unobserve(i)}}const kp={some:0,all:1};class Op extends te{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:r,amount:u="some",once:c}=n,h={root:s?s.current:void 0,rootMargin:r,threshold:typeof u=="number"?u:kp[u]},f=d=>{const{isIntersecting:_}=d;if(this.isInView===_||(this.isInView=_,c&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),y=_?p:v;y&&y(d)};return Ep(this.node.current,h,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(Dp(n,s))&&this.startObserver()}unmount(){}}function Dp({viewport:i={}},{viewport:n={}}={}){return s=>i[s]!==n[s]}const Rp={inView:{Feature:Op},tap:{Feature:Sp},focus:{Feature:Lp},hover:{Feature:bp}},Ip={layout:{ProjectionNode:hl,MeasureLayout:il}},gs={current:null},cl={current:!1};function Bp(){if(cl.current=!0,!!Ps)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),n=()=>gs.current=i.matches;i.addListener(n),n()}else gs.current=!1}const zp=[...Bu,pt,Qt],Vp=i=>zp.find(Iu(i)),Zp=new WeakMap;function Np(i,n,s){for(const r in n){const u=n[r],c=s[r];if(_t(u))i.addValue(r,u);else if(_t(c))i.addValue(r,ii(u,{owner:i}));else if(c!==u)if(i.hasValue(r)){const h=i.getValue(r);h.liveStyle===!0?h.jump(u):h.hasAnimated||h.set(u)}else{const h=i.getStaticValue(r);i.addValue(r,ii(h!==void 0?h:u,{owner:i}))}}for(const r in s)n[r]===void 0&&i.removeValue(r);return n}const Aa=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fp{scrapeMotionValuesFromProps(n,s,r){return{}}constructor({parent:n,props:s,presenceContext:r,reducedMotionConfig:u,blockInitialAnimation:c,visualState:h},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xs,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Nt.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,J.render(this.render,!1,!0))};const{latestValues:d,renderState:_,onUpdate:p}=h;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=_,this.parent=n,this.props=s,this.presenceContext=r,this.depth=n?n.depth+1:0,this.reducedMotionConfig=u,this.options=f,this.blockInitialAnimation=!!c,this.isControllingVariants=Ji(s),this.isVariantNode=Ja(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(s,{},this);for(const w in y){const S=y[w];d[w]!==void 0&&_t(S)&&S.set(d[w],!1)}}mount(n){this.current=n,Zp.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),cl.current||Bp(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gs.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Jt(this.notifyUpdate),Jt(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const r=ce.has(n);r&&this.onBindTransform&&this.onBindTransform();const u=s.on("change",f=>{this.latestValues[n]=f,this.props.onUpdate&&J.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),c=s.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{u(),c(),h&&h(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in Ce){const s=Ce[n];if(!s)continue;const{isEnabled:r,Feature:u}=s;if(!this.features[n]&&u&&r(this.props)&&(this.features[n]=new u(this)),this.features[n]){const c=this.features[n];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Aa.length;r++){const u=Aa[r];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const c="on"+u,h=n[c];h&&(this.propEventSubscriptions[u]=this.on(u,h))}this.prevMotionValues=Np(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const r=this.values.get(n);s!==r&&(r&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let r=this.values.get(n);return r===void 0&&s!==void 0&&(r=ii(s===null?void 0:s,{owner:this}),this.addValue(n,r)),r}readValue(n,s){let r=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return r!=null&&(typeof r=="string"&&(Du(r)||Tu(r))?r=parseFloat(r):!Vp(r)&&Qt.test(s)&&(r=Eu(n,s)),this.setBaseTarget(n,_t(r)?r.get():r)),_t(r)?r.get():r}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){var c;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const h=Us(this.props,s,(c=this.presenceContext)==null?void 0:c.custom);h&&(r=h[n])}if(s&&r!==void 0)return r;const u=this.getBaseTargetFromProps(this.props,n);return u!==void 0&&!_t(u)?u:this.initialValues[n]!==void 0&&r===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new Cs),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}}class fl extends Fp{constructor(){super(...arguments),this.KeyframeResolver=zu}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:r}){delete s[n],delete r[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;_t(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function jp(i){return window.getComputedStyle(i)}class Wp extends fl{constructor(){super(...arguments),this.type="html",this.renderInstance=lu}readValueFromInstance(n,s){if(ce.has(s))return ed(n,s);{const r=jp(n),u=(zs(s)?r.getPropertyValue(s):r[s])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(n,{transformPagePoint:s}){return Ju(n,s)}build(n,s,r){Ns(n,s,r.transformTemplate)}scrapeMotionValuesFromProps(n,s,r){return Gs(n,s,r)}}class Hp extends fl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=at,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&uu(this.current,this.renderState)}}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(ce.has(s)){const r=Au(s);return r&&r.default||0}return s=hu.has(s)?s:Bs(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,r){return fu(n,s,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&J.postRender(this.updateDimensions)}build(n,s,r){Ws(n,s,this.isSVGTag,r.transformTemplate)}renderInstance(n,s,r,u){cu(n,s,r,u)}mount(n){this.isSVGTag=Hs(n.tagName),super.mount(n)}}const Up=(i,n)=>js(i)?new Hp(n):new Wp(n,{allowProjection:i!==b.Fragment}),Gp=Mf({...mm,...Rp,...Tp,...Ip},Up),Ea=Wc(Gp);function Kp({open:i,onClose:n,children:s,className:r="",width:u="w-80",side:c="right"}){const h={hidden:{x:c==="right"?"100%":"-100%"},visible:{x:0}};return A.jsx(yc,{children:i&&A.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[A.jsx(Ea.div,{className:"absolute inset-0 bg-black/60",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),A.jsx(Ea.div,{className:Oa("relative bg-surface text-text shadow-xl overflow-y-auto",u),initial:"hidden",animate:"visible",exit:"hidden",variants:h,transition:{type:"tween",duration:.3},children:s})]})})}function $n({title:i,children:n,className:s=""}){return A.jsxs("section",{className:Oa("space-y-2",s),children:[i&&A.jsx("h2",{className:"text-xl font-display text-text",children:i}),A.jsx("div",{className:"space-y-4",children:n})]})}function qp(){const{filters:i,setFilters:n,isDrawerOpen:s,setIsDrawerOpen:r,clearAll:u}=Ae(),c=(f,d)=>n(_=>({..._,[f]:{..._[f],[d]:!_[f][d]}})),h=(f,d)=>n(_=>{const p=[..._.yearRange];return p[f]=Number(d),{..._,yearRange:p}});return A.jsx(Kp,{open:s,onClose:()=>r(!1),width:"w-72",className:"backdrop-blur-md",children:A.jsxs("div",{className:`
          flex flex-col h-full
          bg-[var(--surface)]/80 backdrop-blur-lg
          text-[var(--text)]
          p-4
          rounded-l-lg
        `,children:[A.jsxs("header",{className:"flex items-center justify-between mb-4",children:[A.jsx("h2",{className:"text-xl font-display font-semibold",children:"Filters"}),A.jsx("button",{onClick:u,className:"text-sm text-accent hover:underline",children:"Clear all"})]}),A.jsx($n,{title:"Years",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"number",value:i.yearRange[0],onChange:f=>h(0,f.target.value),className:"w-20 bg-[var(--surface)] border border-white/20 rounded p-1"}),A.jsx("span",{children:""}),A.jsx("input",{type:"number",value:i.yearRange[1],onChange:f=>h(1,f.target.value),className:"w-20 bg-[var(--surface)] border border-white/20 rounded p-1"})]})}),[{label:"Event Types",key:"eventTypes"},{label:"Relations",key:"relations"},{label:"Sources",key:"sources"}].map(({label:f,key:d})=>A.jsx($n,{title:f,children:A.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(i[d]).map(([_,p])=>A.jsx("button",{onClick:()=>c(d,_),className:`filter-pill ${p?"bg-accent text-black":"bg-white/10 text-white"}`,children:_},_))})},d)),A.jsx($n,{title:"Location Confidence",children:A.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:i.vague,onChange:()=>n(f=>({...f,vague:!f.vague}))}),A.jsx("span",{children:"Include vague / state-only places"})]})}),A.jsx("footer",{className:"flex justify-end space-x-4 pt-4 border-t border-white/10 mt-6",children:A.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-white text-black rounded hover:bg-neutral-200 transition",children:"Apply"})})]})})}function $p(){const{activeSection:i,toggleSection:n}=vs(),{filters:s,setFilters:r}=Ae(),u=i==="search",c=()=>n("search"),h=f=>r(d=>({...d,person:f.target.value}));return A.jsx("div",{className:`transition-all ${u?"w-full":"w-40"}`,children:A.jsx("input",{className:"bg-surface border border-border rounded px-3 py-1 w-full",placeholder:"Type name...",value:s.person,onFocus:c,onChange:h})})}function Yp(){const{activeSection:i,toggleSection:n}=vs(),{filters:s,setFilters:r}=Ae(),u=i==="person",[c,h]=b.useState([]);b.useEffect(()=>{if(s.person.trim().length<2)return h([]);Nh(s.person).then(h)},[s.person]);const f=d=>{r(_=>({..._,selectedPersonId:d.id})),n("person")};return A.jsx("div",{className:`transition-all ${u?"w-full":"w-40"} bg-[var(--surface)] border border-white/10 rounded overflow-hidden`,children:A.jsx("ul",{className:"divide-y divide-white/10",children:c.map(d=>A.jsx("li",{children:A.jsxs("button",{onClick:()=>f(d),className:"w-full text-left px-3 py-2 hover:bg-white/10 transition",children:[d.name," ",d.birthYear&&`(${d.birthYear})`]})},d.id))})})}function Xp({onClose:i}){const{counts:n}=ka(),{filters:s,setFilters:r}=Ae(),u=n.relatives||{},c=h=>r(f=>({...f,relations:{...f.relations,[h]:!f.relations[h]}}));return A.jsxs("div",{className:"absolute left-full ml-2 top-0 bg-[rgba(24,24,24,0.95)] backdrop-blur-md rounded-xl p-3 space-y-2 shadow-xl z-50 w-44",children:[Object.entries(u).map(([h,f])=>A.jsxs("button",{onClick:()=>c(h),className:"flex justify-between w-full text-left px-2 py-1 rounded hover:bg-white/10",children:[A.jsx("span",{className:"capitalize",children:h}),A.jsx("span",{children:f.length})]},h)),A.jsx("button",{onClick:i,className:"mt-2 w-full py-1 bg-accent/20 hover:bg-accent/40 rounded text-sm",children:"Close"})]})}function Jp(){const{counts:i}=ka(),{filters:n}=Ae(),[s,r]=b.useState(!1);return b.useEffect(()=>{},[i,n]),A.jsxs("div",{className:"legend-panel fixed left-4 bottom-4 z-40 rounded-2xl p-4 text-sm space-y-3 shadow-xl backdrop-blur-md",style:{width:"288px",backgroundColor:"rgba(24,24,24,0.85)",maxHeight:"none",bottom:"1rem"},children:[A.jsx("h3",{className:"font-semibold mb-1 text-white",children:"Legend"}),[["","People",i.people],["","Families",i.families],n.selectedPersonId&&["","Household",i.household],["","Whole Tree",i.wholeTree]].filter(Boolean).map(([u,c,h])=>A.jsxs("div",{className:"flex justify-between text-white",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("span",{className:"mr-2",children:u}),c]}),A.jsx("div",{children:h})]},c)),A.jsx("button",{onClick:()=>r(!s),className:"w-full bg-accent/20 hover:bg-accent/40 rounded-lg py-1 text-sm transition text-white",children:"Choose Relatives"}),s&&A.jsx(Xp,{onClose:()=>r(!1)})]})}function n_(){const{treeId:i,setTreeId:n}=Fh();Ae();const{activeSection:s,toggleSection:r}=vs(),[u,c]=b.useState([]),[h,f]=b.useState(!1),[d,_]=b.useState(null);return b.useEffect(()=>{i||jh().then(p=>p.length&&n(p[0].id))},[i]),b.useEffect(()=>{i&&(f(!0),Wh(i).then(p=>{const v=(p||[]).flatMap(y=>y.movements.map(w=>({...w,person_id:y.person_id,person_name:y.person_name})));c(v)}).catch(()=>_("Failed to load movements.")).finally(()=>f(!1)))},[i]),A.jsxs("div",{className:"relative w-full h-full",children:[!1,A.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-50 w-[90vw] max-w-4xl",children:A.jsxs(Hh,{children:[s===null||s==="search"?A.jsx($p,{}):null,s==="person"&&A.jsx(Yp,{}),s===null&&A.jsx("button",{onClick:()=>r("filters"),className:"text-sm text-accent hover:underline",children:"Filters"})]})}),s==="filters"&&A.jsx(qp,{}),A.jsx(mc,{movements:u,loading:h,error:d}),A.jsx(Jp,{})]})}export{n_ as default};
